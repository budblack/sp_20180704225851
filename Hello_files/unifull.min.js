!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,exports,e){e(24),e(43),e(16),e(42),e(17),e(18),e(19),e(20),e(21),e(22),t.exports=e(23)},function(t,exports){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function n(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!n(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var e,n,o,r,h,d;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),n.apply(this,r)}else if(s(n))for(r=Array.prototype.slice.call(arguments,1),d=n.slice(),o=d.length,h=0;h<o;h++)d[h].apply(this,r);return!0},e.prototype.addListener=function(t,n){var o;if(!i(n))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(n.listener)?n.listener:n),this._events[t]?s(this._events[t])?this._events[t].push(n):this._events[t]=[this._events[t],n]:this._events[t]=n,s(this._events[t])&&!this._events[t].warned&&(o=a(this._maxListeners)?e.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,e){function n(){this.removeListener(t,n),s||(s=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var s=!1;return n.listener=e,this.on(t,n),this},e.prototype.removeListener=function(t,e){var n,a,o,r;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,a=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(r=o;r-- >0;)if(n[r]===e||n[r].listener&&n[r].listener===e){a=r;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},e.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},e.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e}Object.defineProperty(exports,"__esModule",{value:!0});var s=e(4),a=i(s),o=e(41),r=(i(o),e(48)),h=(i(r),e(45)),d=i(h);window.Promise||(window.Promise=d.default);var l={TAG:"util",jsopInfo:{},KEYARR:[19,1,4,7,30,14,28,8,24,17,6,35,34,16,9,10,13,22,32,29,31,21,18,3,2,23,25,27,11,20,5,15,12,0,33,26],protocol:"http:",addEventListenerHander:function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i},removeEventListenerHander:function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=null},getById:function(t,e){return e&&e instanceof HTMLElement?e.getElementById(t):document.getElementById(t)},getByClass:function(t,e){return e&&e instanceof HTMLElement?e.getElementsByClassName(t):document.getElementsByClassName(t)},get:function(t,e){if(e=e||document,0===t.indexOf(".")){var i=t.substr(1,t.length-1);return e.getElementsByClassName(i)}var n=t;return 0===t.indexOf("#")&&(n=t.substr(1,t.length-1)),e.getElementById(n)},getScreenState:function(){var t=window.orientation;switch(t){case 90:case-90:t=0;break;default:t=1}return t},urlParameter:function(t){var e=[];for(var i in t)e.push(i+"="+t[i]);return e.join("&")},toJSON:function(t){var e=[];for(var i in t)e.push('"'+i+'":"'+t[i]+'"');return"{"+e.join(",")+"}"},getURlKey:function(t,e){var i=e.split("?");if(i.length>1){i=i[1].split("&");for(var n=i.length,s=0;s<n;s++){var a=i[s].split("=");if(a.length>1&&a[0]===t)return a[1]}}return null},sendlog:function(t,e){var i="youku-uniplayer-stat";t.indexOf("http:")<0&&t.indexOf("https:")<0&&(t=this.protocol+t);var n=document.createElement("img");e&&n.addEventListener("error",e,!1),n.src=t+"&r_="+Math.floor(1e4*Math.random()),n.id=i},loadfile:function(t,e){var i=null;"js"==e?(i=document.createElement("script"),i.setAttribute("type","text/javascript"),i.setAttribute("src",t)):"css"==e&&(i=document.createElement("link"),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",t)),"undefined"!=typeof i&&document.getElementsByTagName("head")[0].appendChild(i)},getJsonp:function(t,e,i,n,s){for(var a="";;)if(a=(""+(new Date).getTime()+Math.random()).replace(/\./,"").slice(3,20),!this["_stId"+a])break;var o=t,r="_stId"+a,h=document.createElement("script"),d="json"+a,l=this;h.type="text/javascript",h.onerror=h.onbort=function(){l[r]&&(clearTimeout(l[r]),delete l[r],i&&i(),document.getElementsByTagName("head")[0].removeChild(h),delete window[d])};var u=s?s:15e3;l[r]=setTimeout(function(t){l[t]&&(clearTimeout(l[t]),delete l[t],n&&n(),document.getElementsByTagName("head")[0].removeChild(h),delete window[d])}(r),u),window[d]=function(t){l[r]&&(clearTimeout(l[r]),delete l[r],e(t),document.getElementsByTagName("head")[0].removeChild(h),delete window[d])},o+="&callback="+d,h.src=o,document.getElementsByTagName("head")[0].appendChild(h)},request:function(t,e,i,n,s){"m.youku.com"===location.host||"h5.m.youku.com"===location.host?l.fetchrequest(t,e,i,n,s):l.getJsonp(t,e,i,n,s)},fetchrequest:function(t,e,i,s,a){document.domain="youku.com",fetch(t,{timeout:a||5e3,credentials:"include"}).then(n).then(function(t){return t.json()}).then(function(t){e&&e(t)}).catch(function(n){if(n&&n.response)n.code=n.response.status,n.note="数据获取失败，请检查网络之后重试";else if(n&&"Failed to fetch"===n.message)return void l.getJsonp(t,e,i,s,a);i&&i(n)})},translate:function(t,e){for(var i=[],n=0;n<t.length;n++){var s=0;s=t[n]>="a"&&t[n]<="z"?t[n].charCodeAt(0)-"a".charCodeAt(0):t[n]-"0"+26;for(var a=0;a<36;a++)if(e[a]==s){s=a;break}s>25?i[n]=s-26:i[n]=String.fromCharCode(s+97)}return i.join("")},decode64:function(t){if(!t)return"";t=t.toString();var e=void 0,i=void 0,n=void 0,s=void 0,a=void 0,o=void 0,r=void 0,h=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);for(o=t.length,a=0,r="";a<o;){do e=h[255&t.charCodeAt(a++)];while(a<o&&e==-1);if(e==-1)break;do i=h[255&t.charCodeAt(a++)];while(a<o&&i==-1);if(i==-1)break;r+=String.fromCharCode(e<<2|(48&i)>>4);do{if(n=255&t.charCodeAt(a++),61==n)return r;n=h[n]}while(a<o&&n==-1);if(n==-1)break;r+=String.fromCharCode((15&i)<<4|(60&n)>>2);do{if(s=255&t.charCodeAt(a++),61==s)return r;s=h[s]}while(a<o&&s==-1);if(s==-1)break;r+=String.fromCharCode((3&n)<<6|s)}return r},encode64:function(t){if(!t)return"";t=t.toString();var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=void 0,n=void 0,s=void 0,a=void 0,o=void 0,r=void 0;for(s=t.length,n=0,i="";n<s;){if(a=255&t.charCodeAt(n++),n==s){i+=e.charAt(a>>2),i+=e.charAt((3&a)<<4),i+="==";break}if(o=t.charCodeAt(n++),n==s){i+=e.charAt(a>>2),i+=e.charAt((3&a)<<4|(240&o)>>4),i+=e.charAt((15&o)<<2),i+="=";break}r=t.charCodeAt(n++),i+=e.charAt(a>>2),i+=e.charAt((3&a)<<4|(240&o)>>4),i+=e.charAt((15&o)<<2|(192&r)>>6),i+=e.charAt(63&r)}return i},rc4:function(t,e){for(var i=[],n=0,s=void 0,a="",o=0;o<256;o++)i[o]=o;for(o=0;o<256;o++)n=(n+i[o]+t.charCodeAt(o%t.length))%256,s=i[o],i[o]=i[n],i[n]=s;o=0,n=0;for(var r=0;r<e.length;r++)o=(o+1)%256,n=(n+i[o])%256,s=i[o],i[o]=i[n],i[n]=s,a+=String.fromCharCode(e.charCodeAt(r)^i[(i[o]+i[n])%256]);return a},mergeObject:function(t,e){for(var i in t)e[i]=t[i];return e},htmlEncodeAll:function(t){return null==t?"":t.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},cookie:{isCookie:!0,getCookie:function(t,e){try{for(var i=document.cookie.split(";"),n=i.length,s=0;s<n;s++){var o=i[s].split("=");if(o[0]=o[0].split(" ").join(""),o.length>1&&o[0]===t)return decodeURIComponent(o[1])}}catch(t){return this.isCookie=!1,a.default.w(this.TAG,"document.cookie is excption"),null}},setCookie:function(t,e,i){try{i=i||{},null===e&&(e="",i.expires=-1);var n="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var s=void 0;"number"==typeof i.expires?(s=new Date,s.setTime(s.getTime()+24*i.expires*60*60*1e3)):s=i.expires,n="; ex2pires="+s.toUTCString()}var o=i.path?"; path="+i.path:"",r=i.domain?"; domain="+i.domain:"",h=i.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),n,o,r,h].join("")}catch(t){this.isCookie=!1,a.default.w(this.TAG,"document.cookie is excption")}}},show:function(t,e){if(e=e||"block",t instanceof Array)for(var i=0,n=t.length;i<n;i++){var s=t[i];s&&s instanceof HTMLElement&&(s.style.display=e)}t&&t instanceof HTMLElement&&(t.style.display=e)},hide:function(t){if(t instanceof Array)for(var e=0,i=t.length;e<i;e++){var n=t[e];n&&n instanceof HTMLElement&&(n.style.display="none")}t&&t instanceof HTMLElement&&(t.style.display="none")},createElement:function(t,e,i,n){n=n||"div";var s=document.createElement(n);return t&&(s.className=t),e&&(s.id=e),i&&(s.innerHTML=i),s},getTimeModel:function(t){var e=void 0,i=void 0,n=void 0,s=[];return e=Math.floor(t/3600),t%=3600,i=Math.floor(t/60),n=parseInt(t%60),e>0?s.push(e):"",i>9?s.push(i):s.push("0"+i),n>9?s.push(n):s.push("0"+n),s.join(":")},checkBind:function(){Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("What is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){};return fBound=function(){return i.apply(this instanceof n?this:t,e.concat(Array.prototype.slice.call(arguments)))},n.prototype=this.prototype,fBound.prototype=new n,fBound})},addAplusMeta:function(){var t=document.location.href;if(t.indexOf("youku.com")<0&&t.indexOf("tudou.com")<0){var e=document.getElementsByTagName("head")[0],i=document.createElement("meta");i.name="aplus-disable-pvid",i.content="true",e.appendChild(i)}},loadAplus:function(){window.goldlog?window.goldlog.pvid&&(window.goldlog.pvid=""):(l.addAplusMeta(),this.loadfile(this.protocol+"//g.alicdn.com/alilog/??s/7.6.2/plugin/aplus_client.js,aplus_cplugin/0.1.2/monitor.js,s/7.6.2/aplus_o.js,s/7.6.2/plugin/aplus_urchin2.js","js"));var t=window.goldlog_queue||(window.goldlog_queue=[]);t.push({action:"goldlog.aplus_pubsub.subscribe",arguments:["sendPV",function(t,e,i){i&&i.cna&&(this.cna=i.cna)}]})},getUCStr:function(t){var e="",i=navigator.userAgent.toLowerCase();if(i.indexOf("ucbrowser")>-1)if("undefined"!=typeof uckey&&uckey.getUCKey)try{var n=uckey.getUCKey(t);e+="&uc_param_str=xk&xk="+n,a.default.i(this.TAG,n)}catch(t){e+="&uc_param_str=x"}else{var s=i.search(/ucbrowser/i);s!=-1&&parseFloat(i.substr(s+10,4))>=9.8&&(e+="&uc_param_str=xk",a.default.i(this.TAG,parseFloat(i.substr(s+10,4))))}return e},checkProtocol:function(){var t="";t=document.location&&document.location.protocol?document.location.protocol:document.location&&document.location.href&&document.location.href.indexOf("https:")>-1?"https:":"http:",this.protocol=t},getCna:function(){return this.cna?this.cna:this.cookie.getCookie("cna")?(this.cna=this.cookie.getCookie("cna"),this.cna):window.goldlog&&window.goldlog.Etag?(this.cna=window.goldlog.Etag,this.cna):(this.loadfile("https://log.mmstat.com/eg.js","js"),null)},initUA_OPT:function(){if(!window.UA_Opt){var t=new Object;window.UA_Opt=t,this.uaKey="collina_"+(new Date).getTime(),t.OnlyHost=1,t.SendMethod=9,t.FormId="login_submit_form",t.ExTarget=["password"],t.LogVal=this.uaKey,window[t.LogVal]="",t.Token=(new Date).getTime()+":"+Math.random(),t.MaxMCLog=50,t.MaxKSLog=50,t.MaxMPLog=50,t.MaxTCLog=50,t.MaxFocusLog=50,t.ResHost="aeu.alicdn.com",t.Flag=1670350}if(window.UA_Opt.callback=function(){this.ckey=window[window.UA_Opt.LogVal]},"undefined"==typeof window.acjs){var e=document.createElement("script");e.src="//af.alicdn.com/js/uac.js",document.head.appendChild(e)}},getUA:function(){var t=window[window.UA_Opt.LogVal];return window.UA_Opt.Token=(new Date).getTime()+":"+Math.random(),window.UA_Opt.reload&&window.UA_Opt.reload(),t&&t.length>1e3&&(t=t.substr(0,1e3)),t},setBetaUrl:function(t){var e="",i="";if(t)return l.m3u8test=t.beta&&t.beta.m3u8?t.beta.m3u8:null,void(l.m3u8test=t.beta&&t.beta.ups?t.beta.ups:null);var n=location.href;e=this.getURlKey("m3u8test",n),i=this.getURlKey("upstest",n),e&&(l.m3u8test=e),i&&(l.upstest=i)}};l.initUA_OPT(),l.checkBind(),l.checkProtocol(),l.loadAplus(),l.setBetaUrl(),exports.default=l},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventEmitter=exports.util=exports.Log=exports.Browser=exports.YoukuH5PlayerCore=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(36),o=i(a),r=e(14),h=i(r),d=e(4),l=i(d),u=e(2),c=i(u),f=e(15),m=(i(f),e(37)),p=i(m),_=e(33),v=i(_),y=e(35),g=i(y),E=e(34),T=i(E),A=e(13),b=e(6),P=i(b),k=e(11),w=e(1),D=i(w),S=e(8),I=e(39),L=i(I),C=e(7),O=e(12),x=i(O),R=function(){function t(e,i){if(n(this,t),this.TAG="YoukuH5PlayerCore",!(e&&(i.videoId||i.param&&i.param.showid)))return void console.error("the param is error,please check!!!");if(this.util=c.default,"string"==typeof e&&c.default.getById(e))this.containerId=e,this.container=c.default.getById(e),this.mediaElementId="xplayer_"+e;else if(e instanceof HTMLElement){this.container=e;var s=(new Date).getTime()+"";this.mediaElementId="xplayer"+s}else l.default.e("the value of container id error,please check!!!");this.config=i,this.config.ccode||(this.config.ccode="0501"),this.config.client_id||(this.config.client_id="youkumobileplaypage"),this.control=this.config.control?this.config.control:{},this.supportType=this._getSupportType(),this.winType=this.config.winType?this.config.winType:h.default.isMobile?"xplayer_m3u8":"xplayer_h5",this.isThirdParty=this._isThirdParty(),this.control.beta?c.default.setBetaUrl(this.control):"",this.control.lang||(this.control.lang="guoyu"),this.control.hd||(this.control.hd="mp4hd"),this.error=!1,this._firstTag=!0,this._isAdPlaying=!1,this.currentTime=0,this._frontAd=!1,this._replay=!1,this.isPause=!0,this.cna=c.default.getCna();var a={};if(a.vid=i.videoId,a.ccode=i.ccode,a.client_ip="0.0.0.0",this.config.param)for(var r in this.config.param){if(!this.config.param[r])return;a[r]=this.config.param[r]}a.client_ts=parseInt((new Date).getTime()/1e3),a.utid=this.cna;var d=null;this.isThirdParty&&(d={},this.config.password&&(this.custumPassword=this.config.password,d.password=this.config.password),d.client_id=this.config.client_id,d.video_id=this.config.videoId,d.embsig=this.config.embsig,window.self===window.top?d.refer=encodeURIComponent(window.location.href):d.refer=window.document.referrer),this._upsInfo=new o.default(a,d,this.sendCustomLog),this._videoInfo=new p.default(this.config.ccode),"m3u8"===this.supportType?this._player=new T.default({}):this._player=new g.default({}),this._emitter=new D.default,this._createVideo();var u={supportType:"mp4",sid:"",client_id:this.config.client_id,ccode:this.config.ccode,vvlogconfig:this.config.logconfig,cna:this.cna,vvlogextParam:this.config.vvlogextParam||{},tslogextParam:this.config.tslogextParam||{}};this._reporter=new L.default(this.mediaElement,null,u,this),this._e={onPlay:this._onPlay.bind(this),onPause:this._onPause.bind(this),onEnded:this._onEnded.bind(this),onCanPlay:this._onCanplay.bind(this),onTimeUpdate:this._onTimeupdate.bind(this),onError:this._onError.bind(this),onLoadedData:this._onLoadeddata.bind(this),onLoadedMetaData:this._onLoadedmetaData.bind(this),onAbort:this._onAbort.bind(this),onStalled:this._onStalled.bind(this),onSuspend:this._onSuspend.bind(this),onWaiting:this._onWaiting.bind(this),onVolumeChange:this._onVolumeChange.bind(this),onPlaying:this._onPlaying.bind(this),onSeeked:this._onSeeked.bind(this),onSeeking:this._onSeeking.bind(this),onDurationChange:this._onDurationChange.bind(this),onProgress:this._onProgress.bind(this),onRateChange:this._onRateChange.bind(this),onLoadStart:this._onLoadStart.bind(this)},this._adEvent={onAdStartPlay:this._onAdStartPlay.bind(this),onAdEnd:this._onAdEnd.bind(this),onAdPause:this._onAdPause.bind(this),onAdTimeUpdate:this._onAdTimeUpdate.bind(this),onAdError:this._onAdError.bind(this),onAdLoading:this._onAdLoading.bind(this),onAdCanPlay:this._onAdCanPlay.bind(this),onAdTimeout:this._onAdTimeout.bind(this),adDataOk:this._adDataOk.bind(this),adDataError:this._adDataError.bind(this),onAdReady:this._onAdReady.bind(this)},this.currentState=C.YKP.PLAYER_STATE.INIT,this._adplugin=new v.default(this.mediaElement,{supportType:this.supportType,ccode:this.config.ccode}),this._attachAdEvents(),this.load(null,d)}return s(t,[{key:"destroy",value:function(){this.error=!1,this._firstTag=!0,this._isAdPlaying=!1,this.currentTime=0,this._frontAd=!1,this._replay=!1,this._originalData=null,this.totalTime=0,this.isPause=!0,this.vv59=!1,this._player.destroy(),this._videoInfo.destroy(),this._adplugin.destroy(),this._reporter.destroy()}},{key:"_createVideo",value:function(t,e){if(!this.mediaElement){var i=document.createElement("video");i.id=this.mediaElementId,i.setAttribute("webkit-playsinline",!0),i.setAttribute("playsinline",!0),i.style.width="100%",i.style.height="100%",i.style.display="none",i.style.position="relative",this.control.autoplay&&(i.autoplay="autoplay"),t&&(i.width="string"==typeof t&&t.indexOf("px")>0?t:t+"px"),e&&(t.height="string"==typeof e&&e.indexOf("px")>0?e:e+"px"),this.container.appendChild(i),this.mediaElement=i}}},{key:"_attachPlayerEvents",value:function(){if(!this.ifEvent&&(this.ifEvent=!0,this._player&&this._e))for(var t in S.VIDEO_EVENTS)this._player.on(S.VIDEO_EVENTS[t],this._e[S.VIDEO_EVENTS[t]])}},{key:"_dettachPlayerEvents",value:function(){if(this._player&&this._e)for(var t in S.VIDEO_EVENTS)this._player.off(S.VIDEO_EVENTS[t],this._e[S.VIDEO_EVENTS[t]])}},{key:"_attachAdEvents",value:function(){this._adplugin&&this._adEvent&&(this._adplugin.on(P.default.AD_DATA_OK,this._adEvent.adDataOk),this._adplugin.on(P.default.AD_DATA_ERROR,this._adEvent.adDataError),this._adplugin.on(P.default.AD_PLAY,this._adEvent.onAdStartPlay),this._adplugin.on(P.default.AD_PAUSE,this._adEvent.onAdPause),this._adplugin.on(P.default.AD_END,this._adEvent.onAdEnd),this._adplugin.on(P.default.AD_TIMEUPDATE,this._adEvent.onAdTimeUpdate),this._adplugin.on(P.default.AD_ERROR,this._adEvent.onAdError),this._adplugin.on(P.default.AD_CANPLAY,this._adEvent.onAdCanPlay),this._adplugin.on(P.default.AD_LOADING,this._adEvent.onAdLoading),this._adplugin.on(P.default.AD_TIMEOUT,this._adEvent.onAdTimeout),this._adplugin.on(P.default.AD_READY,this._adEvent.onAdReady))}},{key:"_dettachAdEvents",value:function(){this._adplugin&&this._adEvent&&(this._adplugin.off(P.default.AD_DATA_OK,this._adEvent.adDataOk),this._adplugin.off(P.default.AD_DATA_ERROR,this._adEvent.adDataError),this._adplugin.off(P.default.AD_PLAY,this._adEvent.onAdStartPlay),this._adplugin.off(P.default.AD_PAUSE,this._adEvent.onAdPause),this._adplugin.off(P.default.AD_END,this._adEvent.onAdEnd),this._adplugin.off(P.default.AD_TIMEUPDATE,this._adEvent.onAdTimeUpdate),this._adplugin.off(P.default.AD_ERROR,this._adEvent.onAdError),this._adplugin.off(P.default.AD_CANPLAY,this._adEvent.onAdCanPlay),this._adplugin.off(P.default.AD_LOADING,this._adEvent.onAdLoading),this._adplugin.off(P.default.AD_TIMEOUT,this._adEvent.onAdTimeout),this._adplugin.off(P.default.AD_READY,this._adEvent.onAdReady))}},{key:"_isThirdParty",value:function(){return!(!this.config.client_id||16!=(this.config.client_id+"").length)&&(this.winType="BDskin",!0)}},{key:"_getSupportType",value:function(){if(this.control&&"mp4"===this.control.playerType)return"mp4";var t=navigator.userAgent.toLowerCase();return t.indexOf("ucbrowser")>-1||this.control&&"m3u8"===this.control.playerType||h.default.ios&&h.default.isMobile||"mac"===h.default.device&&h.default.safari?"m3u8":"mp4"}},{key:"_upsdataSuccess",value:function(t,e){this.error=!1,this.thirdData=e;var i=null;if(this.custumPassword&&(this.password=this.custumPassword,i=this.config.client_id),1==e.showCallButton&&""==e.callButtonUrl&&""==e.callButtonDes&&(e.callButtonDes="打开优酷app观看"),t.error){var n=t.error.code,s=["-2002","-2003","-3001","-3002","-3006","-3007","-3008"];if(s.join(",").indexOf(n)>-1)this._originalData=t,this._videoInfo.init(t,this.password,i,e.showCallButton,e.callButtonDes,e.callButtonUrl),this._initControlInfo();else{switch(n){case"-4004":this.sendErrorLog("23","23404");break;case"-4005":this.sendErrorLog("23","23405");break;case"-5001":this.sendErrorLog("23","23501");break;case"-6001":this.sendErrorLog("23","23601");break;case"-6003":this.sendErrorLog("23","23603");break;case"-6004":this.sendErrorLog("23","23604")}this.currentState=C.YKP.PLAYER_STATE.ERROR}this.error=!0,this._upsDataError(t.error)}else{this._originalData=t,this._videoInfo.init(t,this.password,i,e.showCallButton,e.callButtonDes,e.callButtonUrl),this._initControlInfo(),this.totalTime=this._videoInfo.video?Number(this._videoInfo.video.seconds):0;var a=this._videoInfo.getStreamData(this.control.lang,this.control.hd);this.totalTime=a.seconds_video>this.totalTime?a.seconds_video:this.totalTime,this.headAdTime=a.headTime,this.tailAdTime=a.tailTime,this._initAdPlugin(),this._reporter.init(this._videoInfo),l.default.i(this.TAG,"get ups data from upsInfo vid is:"+t.video.id)}this.upsDataSuccess(t),this.upsDataReady(t)}},{key:"_initAdPlugin",value:function(){var t={};t.fu=this.control.fullscreen,t.vr=0,t.rst=h.default.isMobile&&"ios"===h.default.os?"m3u8":"mp4",t.dq=A.VIDEOHD_MAP[this.control.hd],t.os=h.default.os,t.bt=h.default.device,t.bd=h.default.brand,t.tict=0,t.fu=this.control.fullscreen?1:0,t.d=this.config.param&&this.config.param.playlist_id?this.config.param.playlist_id:0,this.isThirdParty&&(t.partnerid=this.config.client_id,t.atm=this.thirdData&&this.thirdData.atm?this.thirdData.atm:"");var e={};e.param=t,this.config.adConfig&&(e.adConfig=this.config.adConfig),this.config.adext&&(e.adext=this.config.adext),e.supportType=this.supportType,e.lang=this.control.lang,e.hd=this.control.hd,e.m3u8_url=this._videoInfo.stream[this.control.lang][this.control.hd].m3u8_url,this._adplugin.init(this._videoInfo,e)}},{key:"_realStartPlay",value:function(t){if(l.default.i(this.TAG,"_realStartPlay"+t+" "),this._firstTag){var e={};this._player.attachMediaElement(this.mediaElement),this._attachPlayerEvents();var i=this._videoInfo.stream[this.control.lang][this.control.hd];if(this.totalTime=i.seconds_video>this.totalTime?i.seconds_video:this.totalTime,this.config.limitTime&&this.config.limitTime.end<this.totalTime&&(this.totalTime=this.config.limitTime.end),this._videoInfo.trial&&this._videoInfo.trial.time<this.totalTime?e.totalTime=this._videoInfo.trial.time:e.totalTime=this.totalTime,e.time=this.config.limitTime?this.config.limitTime.start:this.config.firsttime?this.config.firsttime:0,"m3u8"===this.supportType){var n=i.m3u8_url;this._adError?e.m3u8Url=n:e.m3u8Url=this._adplugin.buildM3u8(n,!1),e.frontAdTime=this._adplugin.frontAdTime}else e.segs=i.segs;this._player.load(e),this.currentState=C.YKP.PLAYER_STATE.PLAYING,this.isThirdParty&&this._upsInfo.sendThirdToken(),this.vv59||(this._reporter.addPlayerDurationReport(59),this.vv59=!0),this.control.autoplay||this._player.play()}else this.sendEventLog("xpl","c"),this._player.play();this.currentState=C.YKP.PLAYER_STATE.PLAYING}},{key:"_initControlInfo",value:function(){if(this._videoInfo.langcodes){var t=this.control,e=this._videoInfo.langcodes.join(",")+",",i=t.lang;!t.lang||e.indexOf(i+",")<0?this.control.lang=this._videoInfo.langcodes[0]:this.control.lang=t.lang,this.control.hd=t.hd||"mp4hd";var n=this._videoInfo.hdList[this.control.lang].hdcodes,s=n.join(",")+",";s.indexOf(this.control.hd+",")<0&&(this.control.hd=n.join(",").indexOf("3gphd")>-1?"3gphd":n[0]),this.control.autoplay=t.autoplay||!1,this.control.fullscreen=t.fullscreen||!1}}},{key:"_upsTimeout",value:function(){this.currentState=C.YKP.PLAYER_STATE.ERROR,l.default.i(this.TAG,"get ups data timeout,please try again"),this.sendErrorLog("20","20408");var t={code:"0001",note:"数据获取失败，请检查网络之后重试"};this.upsDataFail(t)}},{key:"_upsDataError",value:function(t){this.currentState=C.YKP.PLAYER_STATE.ERROR,l.default.d(this.TAG,"_upsDataError:"+JSON.stringify(t)),this.upsDataError(t)}},{key:"_upsDataFail",value:function(t){l.default.d(this.TAG,t),this.currentState=C.YKP.PLAYER_STATE.ERROR,t&&t.response&&this.sendErrorLog("21","21"+t.code),t&&!t.response&&this.sendErrorLog("21","21408"),t||this.sendErrorLog("20","20404"),t=t?t:{code:"0002",note:"数据获取失败，请检查网络之后重试"},this.upsDataFail(t),l.default.d(this.TAG,"_upsDataFail:get upsinfo fail,the service is 404 or 503")}},{key:"_onPlay",value:function(t){l.default.d(this.TAG,"_onPlay"+this._player.currentTime),this._firstTag&&(this._firstTag=!1,this._reporter.addPlayerDurationReport(60),this._reporter.sendTSLog(60),this._reporter.sendUPSLog(3)),this.isPause=!1,this.onPlay()}},{key:"_onPause",value:function(t){l.default.d(this.TAG,"_onPause:"),this.isPause=!0,0===c.default.getScreenState()&&this._adplugin.requestPauseAd(),this.onPause()}},{key:"_onEnded",value:function(t){this.isEnd||(this.currentState=C.YKP.PLAYER_STATE.END,this.isEnd=!0,this._reporter.addPlayerDurationReport(61),this._reporter.sendTSLog(61),this.getTrialInfo()||this._replay||this._endAd?(l.default.d(this.TAG,"onEnded"),this.onEnded()):(l.default.d(this.TAG,"playEndAD"),this._adplugin.playEndAD()))}},{key:"_onCanplay",value:function(t){l.default.d(this.TAG,"_onCanplay"+this._player.currentTime),this.onCanplay(t)}},{key:"_onTimeupdate",value:function(t,e){e<=this.totalTime&&(this.currentTime=e,this.onTimeupdate(t,e))}},{key:"_onError",value:function(t){l.default.d(this.TAG,"_onError"),this.error=!0,this.currentState=C.YKP.PLAYER_STATE.ERROR,"m3u8"===this.supportType?0===this.currentTime?this.sendErrorLog("32","32408"):this.sendErrorLog("32","32602"):this.sendErrorLog("31","31602"),this.onError(t)}},{key:"_onLoadeddata",value:function(t){this.onLoadeddata(t),l.default.d(this.TAG,"_onLoadeddata")}},{key:"_onLoadedmetaData",value:function(t){this.onLoadedmetaData(t),l.default.d(this.TAG,"_onLoadedmetaData")}},{key:"_onLoadStart",value:function(t){this.onLoadStart(t),l.default.d(this.TAG,"_onLoadStart")}},{key:"_onAbort",value:function(t){this.onAbort(t),l.default.d(this.TAG,"_onAbort")}},{key:"_onStalled",value:function(t){this.onStalled(),l.default.d(this.TAG,"_onStalled")}},{key:"_onSuspend",value:function(t){this.onSuspend(),l.default.d(this.TAG,"_onSuspend")}},{key:"_onWaiting",value:function(t){this.onWaiting(t),l.default.d(this.TAG,"_onWaiting")}},{key:"_onVolumeChange",value:function(t){this.onVolumeChange(t),l.default.d(this.TAG,"_onVolumeChange")}},{key:"_onPlaying",value:function(t){this.onPlaying(t),this.currentState=C.YKP.PLAYER_STATE.PLAYING,l.default.d(this.TAG,"_onPlaying")}},{key:"_onSeeked",value:function(t){this.onSeeked(t),l.default.d(this.TAG,"_onSeeked")}},{key:"_onSeeking",value:function(t){this.onSeeking(t),l.default.d(this.TAG,"_onSeeking")}},{key:"_onDurationChange",value:function(t){this.onDurationChange(t),l.default.d(this.TAG,"_onDurationChange")}},{key:"_onProgress",value:function(t){this.onProgress(t)}},{key:"_onRateChange",value:function(t){this.onRateChange(t),l.default.d(this.TAG,"_onRateChange")}},{key:"_onAdTimeUpdate",value:function(t,e,i,n){this.onAdTimeUpdate(t,e,i,n)}},{key:"_onAdStartPlay",value:function(t,e){this.isPause=!1,this._player.adStatus=!0,this.currentState=C.YKP.PLAYER_STATE.ADPLAY,this._isAdPlaying||(this._isAdPlaying=!0,this._reporter.sendUPSLog(1)),"front"!==e||this.vv59||(this._reporter.addPlayerDurationReport(59),this.vv59=!0),this.onAdStartPlay(t,e)}},{key:"_onAdEnd",value:function(t,e){l.default.i(this.TAG,"_onAdEnd::"+e+"|||"+t),this.onAdEnd(t,e),this._isAdPlaying=!1,this._reporter.sendUPSLog(2),"front"===e?(this._frontAd=!0,this._realStartPlay(!0)):"end"===e&&(this._endAd=!0,this._isAdPlaying=!1,this.currentState=C.YKP.PLAYER_STATE.END,this.onEnded()),this._player.adStatus=!1}},{key:"_onAdPause",value:function(t,e){l.default.d(this.TAG,"  _onAdPause:"),this.currentState=C.YKP.PLAYER_STATE.ADPAUSE,this.isPause=!0,this.onAdPause(t,e)}},{key:"_onAdError",value:function(t,e){l.default.d(this.TAG,"_onAdError"),this._adError=!0,this._onAdEnd(t,e),this.onAdError(t,e)}},{key:"_onAdTimeout",value:function(t,e){this.onAdTimeout(t,e)}},{key:"_onAdLoading",value:function(t,e){this.onAdLoading(t,e)}},{key:"_onAdCanPlay",value:function(t,e){l.default.i(this.TAG,"_onAdCanPlay"),this.onAdCanPlay(t,e)}},{key:"_onAdReady",value:function(t,e){"front"===e&&!this.error&&this.control.autoplay&&this._adplugin.autoPlay(),this.onAdReady(t,e)}},{key:"_adDataOk",value:function(t,e){k.AD_MAP.PAUSE===e?t.VAL.length&&this.pauseAdDataOk(t):("front"===e&&this._reporter.initAdInfo(t),this.adDataOk(t,e))}},{key:"_adDataError",value:function(t){l.default.i(this.TAG,"this._curNum++;"),this._onAdEnd(null,t),this.adDataError()}},{key:"getVideoInfo",value:function(){return this._videoInfo.getVideoInfo()}},{key:"getUserInfo",value:function(){return this._videoInfo.getUserInfo()}},{key:"getVideoList",value:function(){return this._videoInfo.getVideoList()}},{key:"getShow",value:function(){return this._videoInfo.getShow()}},{key:"getUps",value:function(){return this._videoInfo.ups}},{key:"getCurStreamLogo",value:function(){var t=this._videoInfo.getStreamLogo();return t&&t[this.control.lang]&&null!==t[this.control.lang][this.control.hd]?t[this.control.lang][this.control.hd]:null}},{key:"getTrialInfo",value:function(){return this._videoInfo.getTrialInfo()}},{key:"getAlbum",value:function(){return this._videoInfo.getAlbum()}},{key:"getUploader",value:function(){
return this._videoInfo.getUploader()}},{key:"getPreviewInfo",value:function(){return this._videoInfo.getPreviewInfo()}},{key:"getCloudOptions",value:function(){return this._videoInfo.getCloudOptions()}},{key:"getTicketInfo",value:function(){return this._videoInfo.ticket}},{key:"getPayInfo",value:function(){return this._videoInfo.getPayInfo()}},{key:"getVideolike",value:function(){return this._videoInfo.getVideolike()}},{key:"getLanguageList",value:function(){return this._videoInfo.languageList}},{key:"getHdList",value:function(t){return this._videoInfo.hdList?t&&this._videoInfo.langcodes.join(",").indexOf(t)>-1?this._videoInfo.hdList[t].hditems:this._videoInfo.hdList[this.control.lang].hditems:null}},{key:"getVipPayInfo",value:function(){return this._videoInfo.getVipPayInfo()}},{key:"getZpdPayInfo",value:function(){return this._videoInfo.getZpdPayInfo()}},{key:"getController",value:function(){return this._videoInfo.getController()}},{key:"getError",value:function(){return this._videoInfo.error}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"ifShowLogo",value:function(){var t=this._videoInfo.getStreamLogo();if(t&&t[this.control.lang]&&t[this.control.lang][this.control.hd]){var e=1!==t[this.control.lang][this.control.hd];return e}return!0}},{key:"launchFullscreen",value:function(){this.control.fullscreen=!0}},{key:"exitFullscreen",value:function(){this.control.fullscreen=!1}},{key:"getAdInfo",value:function(t){return this._adplugin.addata}},{key:"skipAd",value:function(t){this._adplugin.skip(t)}},{key:"load",value:function(t,e){this._endAd=!1;var i=t?t:{};if(t)for(var n in t)i[n]=t[n];this._upsInfo.start(this._upsdataSuccess.bind(this),this._upsDataFail.bind(this),this._upsTimeout.bind(this),i,e)}},{key:"play",value:function(){if(l.default.d(this.TAG,"play::"+this.currentState+"  _isAdPlaying:"+this._isAdPlaying),!this.error){if(this.currentState===C.YKP.PLAYER_STATE.END)return this.isEnd=!1,this.replay(),void this.onReplay();this._firstTag&&!this._isAdPlaying&&this.sendEventLog("xPs","c"),this._isAdPlaying||this.currentState===C.YKP.PLAYER_STATE.INIT?this._adplugin.play():this._realStartPlay(!0)}}},{key:"pause",value:function(){l.default.d(this.TAG,"play::"+this.currentState+" isEnd:"+this.isEnd),this.error||this.isEnd||(this._isAdPlaying?(this.currentState=C.YKP.PLAYER_STATE.ADPAUSE,this._adplugin.pause()):(this.sendEventLog("xPa","c"),this._player.pause(),this.currentState=C.YKP.PLAYER_STATE.PAUSE))}},{key:"replay",value:function(){if(l.default.i(this.TAG,"replay"),!this.error){if(this._firstTag)return!1;if(this.isEnd=!1,this.error=!1,this._firstTag=!0,this._isAdPlaying=!1,this.currentTime=0,this._frontAd=!0,this._replay=!0,"m3u8"===this.supportType){var t=this._videoInfo.stream[this.control.lang][this.control.hd].m3u8_url;this._player.m3u8Url=t}return this.config.limitTime?this._player.replay(this.config.limitTime.start):this._player.replay(),this.sendEventLog("Rp","c"),this._reporter.tsInit(),this._reporter.addPlayerDurationReport(62),!0}}},{key:"changeByVid",value:function(t,e,i){if(this._adError=!1,this.isEnd=!1,this.vv59=!1,this._endAd=!1,this.currentState=C.YKP.PLAYER_STATE.INIT,!t)return void l.default.e(this.TAG,"changeByVid the param vid is undefined");this.pause(),this._isAdPlaying&&this.onAdEnd(),this.destroy();var n={};if(n.vid=t,i&&i.control&&(this.control=i.control),i&&i.param)for(var s in i.param)n[s]=i.param[s];var a=null;i&&this.isThirdParty?(a={},this.custumPassword=i.password,a.password=i.password,a.embsig=i.embsig,a.refer=i.refer):this.custumPassword=null,this.config.videoId=t,this._upsInfo.start(function(t){this._upsdataSuccess(t),e&&e(t)}.bind(this),this._upsDataFail.bind(this),this._upsTimeout.bind(this),n,a)}},{key:"reLoad",value:function(t){this.isEnd=!1,this.vv59=!1,this._adError=!1,this._reporter.tsInit(),this._firstTag=!0,this.currentState=C.YKP.PLAYER_STATE.INIT;var e={};t?(e.password=t,this.password=t):(this._reporter.changeParam({isRetry:1}),this.password=null),this.load(e)}},{key:"seek",value:function(t){this.error||(0===t||t)&&(l.default.i(this.TAG,"seek(_time):"+this._isAdPlaying),this._isAdPlaying||this._player.seek(t))}},{key:"getVideoAttr",value:function(t){return this.mediaElement?this.mediaElement[t]:null}},{key:"setVideoAttr",value:function(t,e){this.mediaElement&&(this.mediaElement[t]=e)}},{key:"getVideoInfoParam",value:function(){return this._videoInfo}},{key:"changeLanguage",value:function(t,e){if(t===this.control.lang)return l.default.i(this.TAG," this.control.lang:"+this.control.lang+"  langCode:"+t+"  this.currentState:"+this.currentState),!1;if(this.currentState===C.YKP.PLAYER_STATE.ERROR||this.currentState===C.YKP.PLAYER_STATE.INIT||this.currentState===C.YKP.PLAYER_STATE.ADPLAY||this.currentState===C.YKP.PLAYER_STATE.ADPAUSE)return this.control.lang=t,e&&e(this.control),!0;var i={};if(this._videoInfo.stream[t]&&this._videoInfo.stream[t][this.control.hd]){if("m3u8"===this.supportType){var n=this._videoInfo.stream[t][this.control.hd].m3u8_url;i.m3u8Url=this._adplugin.buildM3u8(n,!0),i.frontAdTime=0}else i.segs=this._videoInfo.stream[t][this.control.hd].segs;return this._player.load(i),this.control.lang=t,e&&e(this.control),!0}return!1}},{key:"changeHd",value:function(t,e){var i={};if(t===this.control.hd)return l.default.i(this.TAG," this.control.hd:"+this.control.hd+"  hdCode:"+t+"  this.currentState:"+this.currentState),!1;if(l.default.i(this.TAG," changeHd:"+t),this.currentState===C.YKP.PLAYER_STATE.ERROR||this.currentState===C.YKP.PLAYER_STATE.INIT||this.currentState===C.YKP.PLAYER_STATE.ADPLAY||this.currentState===C.YKP.PLAYER_STATE.ADPAUSE){var n=this._videoInfo.hdList[this.control.lang].hdcodes;return n.join(",").indexOf(t)>-1&&(this.control.hd=t,e&&e(this.control),!0)}if(this._videoInfo.stream[this.control.lang]&&this._videoInfo.stream[this.control.lang][t]){if("m3u8"===this.supportType){var s=this._videoInfo.stream[this.control.lang][t].m3u8_url;i.m3u8Url=this._adplugin.buildM3u8(s,!0),i.frontAdTime=0}else i.segs=this._videoInfo.stream[this.control.lang][t].segs;return this.control.hd=t,this._player.pause(),this._player.load(i),e&&e(this.control),!0}return!1}},{key:"changeMuted",value:function(t){return t>1&&(t=1),t>0?(this.mediaElement.muted=!1,this.mediaElement.volume=t):(this.mediaElement.muted=!0,this.mediaElement.volume=0),this.mediaElement.volume}},{key:"sendEventLog",value:function(t,e,i,n){this._reporter.sendUserActionReport(t,e,i,n)}},{key:"sendAdClickLog",value:function(t){this._adplugin.sendCUM(t)}},{key:"sendPauseAdCUM",value:function(t){x.default.sendPauseAdCUM(t)}},{key:"sendPauseAdSUS",value:function(t){x.default.sendPauseAdSUS(t)}},{key:"sendErrorLog",value:function(t,e){this.viewErrorCode=this._reporter.createViewCode();var i={};i.errorType=t;var n=this.mediaElement.src||"";n.indexOf("m3u8")>-1?(i.m3u8Url=n,i.cdnUrl=""):(i.cdnUrl=n,i.m3u8Url=""),i.upsUrl=encodeURIComponent(this._upsInfo.upsUrl),i.errorCode=e||"",i.currentTime=this.currentTime,this._reporter.sendErrorLog(this.viewErrorCode,i)}},{key:"sendCustomLog",value:function(){var t={};t.client_id=this.config.client_id;var e=c.default.urlParameter(t);this.sendGoldLog("/yt/ytoutside.custom.fail.gif","CLK",e,"H1485189559")}},{key:"sendGoldLog",value:function(t,e,i,n){this._reporter.sendGoldLog(t,e,i,n)}},{key:"upsDataError",value:function(t){l.default.i(this.TAG,"extupsDataError")}},{key:"upsDataFail",value:function(t){l.default.i(this.TAG,"extupsDataFail")}},{key:"upsDataReady",value:function(t){l.default.i(this.TAG,"extupsDataReady")}},{key:"upsDataSuccess",value:function(t){l.default.i(this.TAG,"upsDataSuccess")}},{key:"onPlay",value:function(t){}},{key:"onPause",value:function(t){}},{key:"onEnded",value:function(t){}},{key:"onPlaying",value:function(t){}},{key:"onError",value:function(t){}},{key:"onCanplay",value:function(t){}},{key:"onTimeupdate",value:function(t,e){}},{key:"onLoadStart",value:function(t){}},{key:"onLoadeddata",value:function(t){}},{key:"onLoadedmetaData",value:function(t){}},{key:"onAbort",value:function(t){}},{key:"onStalled",value:function(t){}},{key:"onSuspend",value:function(t){}},{key:"onWaiting",value:function(t){}},{key:"onVolumeChange",value:function(t){}},{key:"onSeeking",value:function(t){}},{key:"onSeeked",value:function(t){}},{key:"onDurationChange",value:function(t){}},{key:"onProgress",value:function(t){}},{key:"onRateChange",value:function(t){}},{key:"adDataOk",value:function(t,e){l.default.i(this.TAG,"adDataOk|||"+e)}},{key:"pauseAdDataOk",value:function(t){}},{key:"adDataError",value:function(t){l.default.i(this.TAG,"adDataError:"+t)}},{key:"onAdTimeUpdate",value:function(t,e,i,n){}},{key:"onAdStartPlay",value:function(t,e){l.default.i(this.TAG,"onAdStartPlay:"+e)}},{key:"onAdEnd",value:function(t,e){l.default.i(this.TAG,"onAdEnd:"+e)}},{key:"onAdPause",value:function(t,e){l.default.i(this.TAG,"onAdPause:"+e)}},{key:"onAdError",value:function(t,e){l.default.i(this.TAG,"onAdError:"+e)}},{key:"onAdLoading",value:function(t,e){}},{key:"onAdCanPlay",value:function(t,e){}},{key:"onAdReady",value:function(t,e){}},{key:"onAdTimeout",value:function(t,e){}}]),t}();exports.YoukuH5PlayerCore=R,exports.Browser=h.default,exports.Log=l.default,exports.util=c.default,exports.EventEmitter=D.default},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(2),o=(i(a),function(){function t(){n(this,t)}return s(t,null,[{key:"e",value:function(e,i){if(t.ENABLE_ERROR){e&&!t.FORCE_GLOBAL_TAG||(e=t.GLOBAL_TAG);var n="ERROR["+e+"] > "+i;console.error?console.error(n):console.warn?console.warn(n):console.log(n),t.ENABLE_PRINT&&t.p(n)}}},{key:"i",value:function(e,i){if(t.ENABLE_INFO){e&&!t.FORCE_GLOBAL_TAG||(e=t.GLOBAL_TAG);var n="INFO["+e+"] > "+i;console.info?console.info(n):console.log(n),t.ENABLE_PRINT&&t.p(n)}}},{key:"w",value:function(e,i){if(t.ENABLE_WARN){e&&!t.FORCE_GLOBAL_TAG||(e=t.GLOBAL_TAG);var n="WARN["+e+"] > "+i;console.warn?console.warn(n):console.log(n),t.ENABLE_PRINT&&t.p(n)}}},{key:"d",value:function(e,i){if(t.ENABLE_DEBUG){e&&!t.FORCE_GLOBAL_TAG||(e=t.GLOBAL_TAG);var n="DEBUG["+e+"] > "+i;console.debug?console.debug(n):console.log(n),t.ENABLE_PRINT&&t.p(n)}}},{key:"p",value:function(e){e="***"+e,t.dom?t.dom.innerHTML=t.dom.innerHTML+"<br>"+e:document.getElementById(t.DOMID)?t.dom=document.getElementById(t.DOMID):(t.dom=document.createElement("div"),document.getElementsByTagName("body")[0].appendChild(t.dom))}}]),t}());o.GLOBAL_TAG="YoukuH5PlayerCore",o.FORCE_GLOBAL_TAG=!1,o.ENABLE_ERROR=!0,o.ENABLE_INFO=!1,o.ENABLE_WARN=!0,o.ENABLE_DEBUG=!1,o.ENABLE_PRINT=!1,o.DOMID="YoukuH5PlayerCore_log",exports.default=o},function(t,exports){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),n=function(){function t(i){e(this,t),i?this.val=i.toString():this.val=""}return i(t,null,[{key:"compare",value:function(t,e){t=t.toString().split("."),e=e.toString().split(".");for(var i=0;i<t.length||i<e.length;i++){var n=parseInt(t[i],10),s=parseInt(e[i],10);if(isNaN(n)&&(n=0),isNaN(s)&&(s=0),n<s)return-1;if(n>s)return 1}return 0}}]),i(t,[{key:"gt",value:function(e){return t.compare(this,e)>0}},{key:"gte",value:function(e){return t.compare(this,e)>=0}},{key:"lt",value:function(e){return t.compare(this,e)<0}},{key:"lte",value:function(e){return t.compare(this,e)<=0}},{key:"eq",value:function(e){return 0===t.compare(this,e)}},{key:"toString",value:function(){return this.val.toString()}}]),t}();exports.default=n},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={FRONT_AD:"frontAD",BACK_AD:"backAD",INSERT_AD:"insertAD",PAUSE_AD:"pauseAD",OVERLAY_AD:"overlayAD",AD_END:"adend",AD_ERROR:"aderror",AD_PLAY:"adplay",AD_PAUSE:"adpause",AD_TIMEUPDATE:"adtimeupdate",AD_LOADING:"adloading",AD_TIMEOUT:"adtimeout",AD_CANPLAY:"adcanplay",AD_READY:"adready",AD_DATA_OK:"addataok",AD_DATA_ERROR:"addataerror",UGLY_CLOSE_AD:"uglyclosead",FRONT_AD_END:"frontADend",FRONT_AD_ERROR:"frontADerror",FRONT_AD_INFO_OK:"frontAdinfook",FRONT_AD_UNITED_INFO_OK:"unitedfrontadinfook",FRONT_AD_INFO_ADAPER_OK:"frontAdinfoadapterok",FRONT_AD_INFO_TIMEOUT:"frontAdinfotimeout",BACK_AD_END:"backAdend",BACK_AD_ERROR:"backaderror",BACK_AD_INFO_OK:"backAdinfook",BACK_AD_INFO_TIMEOUT:" backAdinfotimeout",INSERT_AD_INFO_OK:"insertAdinfook",PAUSE_AD_INFO_OK:"pauseAdinfook",PAUSE_AD_INFO_ERROR:"pauseAdinfoerror",PAUSE_AD_INFO_TIMEOUT:"pauseadinfotimeout",OVERLAY_AD_INFO_OK:"overlayAdinfook",AdPluginObject:"adpluginobject"};exports.default=e},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={PLAYER_STATE:{INIT:"PLAYER_STATE_INIT",READY:"PLAYER_STATE_READY",AD:"PLAYER_STATE_AD",ADPLAY:"PLAYER_STATE_ADPLAYING",ADPAUSE:"PLAYER_STATE_ADPAUSE",PLAYING:"PLAYER_STATE_PLAYING",END:"PLAYER_STATE_END",ERROR:"PLAYER_STATE_ERROR",PAUSE:"PLAYER_STATE_PAUSE"}};exports.YKP=e},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={loadstart:"onLoadStart",canplay:"onCanPlay",loadeddata:"onLoadedData",loadedmetadata:"onLoadedMetaData",abort:"onAbort",error:"onError",pause:"onPause",waiting:"onWaiting",stalled:"onStalled",suspend:"onSuspend",play:"onPlay",volumechange:"onVolumeChange",playing:"onPlaying",seeked:"onSeeked",seeking:"onSeeking",durationchange:"onDurationChange",progress:"onProgress",ratechange:"onRateChange",timeupdate:"onTimeUpdate",ended:"onEnded"};exports.VIDEO_EVENTS=e},function(t,exports,e){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function n(t,e){var i=new l(location.href.split("#")[0]);for(var n in i.params)t.params.hasOwnProperty(n)||(t.params[n]=i.params[n]);if("object"===("undefined"==typeof e?"undefined":f(e)))for(var s in e)"number"==typeof e[s]?t.params[s]=""+e[s]:"function"==typeof e[s]?t.params[s]="":t.params[s]=e[s];return t}function s(t,e){return e?void(location.href=t):(O||(O=m.createElement("iframe"),O.id="callapp_iframe_"+Date.now(),O.frameborder="0",O.style.cssText="display:none;border:0;width:0;height:0;",m.body.appendChild(O)),void(O.src=t))}function a(t,e){e!==!1&&e===!0?top.location.replace(t):top.location.href=t}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};I=!0;var e=t.params,i=/auto/i.test(e.source);if(x.restore()&&i)return void x.clear();i&&(e.universalRedirect=window.location.href,x.save());var s=e.universalRedirect||"";s&&(s=new l(s)),t.exdParams&&s&&n(s,t.exdParams),r(s),s=s.toString(),e.fallback_url=s,e.fua=/Safari\/\d+(\.\d+)*$/.test(navigator.userAgent)?"safari":"other",e.special=1,e.ts=(new Date).getTime(),e.action=e.action?e.action:"play";var o=new l(w);n(o,e),t.exdParams&&n(o,t.exdParams),r(o),a(o.toString())}function r(t){if(t instanceof l)for(var e in t._params)null!==t.params[e]&&"undefined"!==t.params[e]&&""!==t.params[e]||delete t.params[e]}function h(t){var e=document.cookie.match(RegExp("(^| )"+t+"=([^;]*)(;|$)"));return null!==e?unescape(e[2]):null}function d(){return E?"youkuapp":T?"weixin":A?"weibo":b?"uc":"other"}var l=i(e(25)),u=e(28),c=i(e(31)),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=window.document,p=window.navigator.userAgent,_=u.os,v=u.params,y=u.browser,g=u.os.isIOS?2500:3e3,E=/youku/i.test(p),T=/microMessenger/i.test(p),A=/weibo/i.test(p),b=/ucbrowser/i.test(p),P="com.youku.phone",k=/iPad/.test(navigator.userAgent)?"youkuhd://":"youku://",w="http://link-jump.youku.com/a/b/",D="http://a.app.qq.com/o/simple.jsp?pkgname=com.youku.phone",S={chars:"0123456789abcdefghijklmnopqrstuvwxyz",uuid:function(t){for(var e=this.chars.length,i=[],n=0;n<t;n++)i.push(this.chars[parseInt(Math.random()*e)]);return i.join("")}},I=!1,L={gotoApp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=h("__ysuid");t.pathname=t.pathname?t.pathname:"splash",t.params.action=t.params.action?t.params.action:"",t.params.ua=p,t.params.refer=v.refer?v.refer:v.from?v.from:t.params.refer,t.params.ccts=(new Date).getTime(),t.params.cookieid=e?e+"|"+S.uuid(6):"",t.params.tuid=v.tuid?v.tuid:t.params.tuid;var i=new l(k+t.pathname);i.pathname="",t.params&&n(i,t.params),r(i);var d="";t.whiteList&&t.whiteList.length>0&&(d=t.whiteList.find(function(t){return new RegExp(t).test(p)}));var u=_.isAndroid&&y.isChrome&&!y.isWebview,c=_.isAndroid&&!!p.match(/samsung/i)&&_.version.gte("4.3")&&_.version.lt("4.5");!d&&(u||c||t.forceIntent)&&(i.hash="Intent;scheme="+i.protocol.replace(":","")+";package="+P+";end",i.protocol="intent:");var f=_.isIPhone&&_.version.gte("9.0");return C.track(t.params),d?s(i.toString(),f):T&&!_.isIPhone?setTimeout(function(){a(D+"&android_schema="+encodeURIComponent(i.toString()))},100):f&&t.universalLinkState!==!1?o(t):"intent:"===i.protocol?setTimeout(function(){a(i.toString())},100):s(i.toString(),f),i.toString()},download:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.downloadUrl){var e=new l(t.downloadUrl);t.exdParams&&n(e,t.exdParams),r(e),e=e.toString(),a(e,t.replace)}},gotoPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t=c({timeout:g},t),t.targetUrl=L.gotoApp(t),I)return t.targetUrl;if(t.isNeedDownload)var e=window.setTimeout(function(){clearTimeout(e),L.download(t)},t.timeout);else if(t.uri)var i=window.setTimeout(function(){clearTimeout(i),a(t.uri,t.replace)},t.timeout);return t.targetUrl}},C={track:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=function(){return _.isIOS?"ios":_.isAndroid?"android":"other"}(),i={page:t.pagetype||"defaultPage",source:t.source||"defaultSource",shortua:d(),os:e};this.send(i)},send:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="";for(var i in t)e+="&"+i+"="+t[i];e&&(e=e.substring(1,e.length));try{goldlog.record("/yt/youkuphoneplaypage.callapp.callappLog","CLK",e,"H1535059694")}catch(t){var n="//gm.mmstat.com/yt/youkuphoneplaypage.callapp.callappLog?"+e+"&r_="+(new Date).valueOf();(new Image).src=n}}},O=void 0,x={key:"_h5_app_launcher_ios9_timestamp",save:function(){localStorage.setItem(this.key,(new Date).getTime())},restore:function(){return parseInt(localStorage.getItem(this.key)||0)},clear:function(){localStorage.removeItem(this.key)}};t.exports=L},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var n,s,a=e(5),o=i(a),r=window.navigator.userAgent;if(s=r.match(/Windows\sPhone\s(?:OS\s)?([\d\.]+)/))n={name:"Windows Phone",isWindowsPhone:!0,version:new o.default(s[1])};else if(r.match(/Safari/)&&(s=r.match(/Android[\s\/]([\d\.]+)/)))n={version:new o.default(s[1])},r.match(/Mobile\s+Safari/)?(n.name="Android",n.isAndroid=!0):(n.name="AndroidPad",n.isAndroidPad=!0);else if(s=r.match(/(iPhone|iPad|iPod)/)){var h=s[1];(s=r.match(/OS ([\d_\.]+) like Mac OS X/))&&(n={name:h,isIPhone:"iPhone"===h||"iPod"===h,isIPad:"iPad"===h,isIOS:!0,version:new o.default(s[1].split("_").join("."))})}n||(n={name:"unknown",version:new o.default("0.0.0")}),exports.default=n},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={FRONT_AD_API:"//valf.atm.youku.com/vf",END_AD_API:"//valb.atm.youku.com/vb",MID_AD_API:"//valo.atm.youku.com/vo",STA_AD_API:"//valt.atm.youku.com/vt",PAUSE_AD_API:"//valp.atm.youku.com/vp"},i={FRONT_AD_API:"//mf.atm.youku.com/mf",END_AD_API:"//mb.atm.youku.com/mb",CONTENT_AD_API:"//mo.atm.youku.com/mo",STA_AD_API:"//mt.atm.youku.com/mt",PAUSE_AD_API:"//mp.atm.youku.com/mp"},n={IF_FRONT:!0,IF_MID:!0,IF_END:!0,IF_CONT:!0},s={FRONT:"front",END:"end",CONT:"contentad",STA:"standard",PAUSE:"pause"};exports.YoukuAdApiPC=e,exports.YoukuAdApiM=i,exports.ADConfigM=n,exports.AD_MAP=s},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(2),o=i(a),r=function(){function t(e){n(this,t),this.addata=e,this.curnum=0}return s(t,[{key:"changeNum",value:function(t){this.curnum=t}},{key:"setData",value:function(t){this.addata=t}},{key:"sendSUS",value:function(t){if(!(!this.addata||t<0||t>=this.addata.VAL.length)){var e=this.addata.VAL[t],i=e.SUS;if("undefined"!=typeof i){for(var n=0;n<i.length;n++){var s=i[n].U;o.default.sendlog(s)}this._loadBRS(e.BRS)}}}},{key:"sendUnitedVTVC",value:function(t){if(this.addata){t+=2;var e=this.addata.VAL[0],i=e.VTVC;this._vtccache||(this._vtccache=[]);for(var n=null,s=1e6,a=1e5,r=0;r<i.length;r++){var h=i[r].U,d=parseInt(i[r].T,10),l=t-d;l>=0&&l<a&&(a=l,n=h,s=d)}null!=n&&this._vtccache.indexOf(s)===-1&&(this._vtccache.push(s),debug.log("<b> vc = "+n+"</b>"),o.default.loadfile(n,"js"))}}},{key:"sendVC",value:function(t){if(!(!this.addata||t<0||t>=this.addata.VAL.length)){var e=this.addata.VAL[this.curnum],i=e.VT;if("undefined"!=typeof i){var n=e.VC;loadjscssfile(n,"js")}}}},{key:"sendSUS_",value:function(t){if(!(!this.addata||t<0||t>=this.addata.VAL.length)){var e=this.addata,i=this.curnum+2,n=e["A"+i].SU,s=e["A"+i].ATMSU,a=e["A"+i].ISOSU;o.default.sendlog(n),o.default.sendlog(s),o.default.sendlog(a)}}},{key:"sendSUE",value:function(t){if(!(!this.addata||t<0||t>=this.addata.VAL.length)){var e=this.addata.VAL[t],i=e.SUE;if("undefined"!=typeof i)for(var n=0;n<i.length;n++){var s=i[n].U;o.default.sendlog(s)}}}},{key:"sendSU",value:function(t){if(this.addata){var e=this.addata.VAL[this.curnum],i=e.SU;if("undefined"!=typeof i){this._sucache||(this._sucache=[]);for(var n=1e4,s=1e6,a=0;a<i.length;a++){var r=(i[a].U,parseInt(i[a].T,10)),h=t-r;h>=0&&h<n&&(n=h,s=r)}if(1e6!=s&&this._sucache.indexOf(s)==-1){this._sucache.push(s);for(var d=0;d<i.length;d++)parseInt(i[d].T,10)==s&&o.default.sendlog(i[d].U)}}}}},{key:"sendSU_",value:function(t){if(this.addata){curnum+=2;var e=this.addata["A"+curnum].MT;if(e&&t>=parseInt(e,10)){var i=this.addata["A"+curnum].MU,n=this.addata["A"+curnum].CMU;o.default.sendlog(i),o.default.sendlog(n)}}}},{key:"sendCUM",value:function(){if(this.addata){var t=this.addata.VAL[this.curnum],e=t.CUM;if("undefined"!=typeof e)for(var i=0;i<e.length;i++){var n=e[i].U;o.default.sendlog(n)}}}},{key:"sendUnitedCUM",value:function(t){if(this.addata){var e=this.addata.VAL[0],i=e.CUM;if("undefined"!=typeof i&&0!==i.length)for(var n=0;n<i.length;n++)if(t<parseInt(i[n].T,10)){for(var s=0;s<(i[n].CUM||[]).length;s++)o.default.sendlog(i[n].CUM[s].U);break}}}},{key:"_loadBRS",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(/^https/.test(t)||/^https/.test(location.href)&&/^\/{2}:/.test(t))&&o.default.loadfile(t,"js")}}],[{key:"sendPauseAdCUM",value:function(t){var e=t.VAL[0].CUM;if(e)for(var i=0;i<e.length;i++)o.default.sendlog(e[i].U)}},{key:"sendPauseAdSUS",value:function(t){var e=t.VAL[0].SUS;if(e)for(var i=0;i<e.length;i++)o.default.sendlog(e[i].U)}}]),t}();exports.default=r},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={flv:"flv",mp4hd:"mp4",mp4hd2:"flv",mp4hd3:"flv",mp4hd2v2:"mp4",mp4hd3v2:"mp4",mp4sd:"mp4","3gphd":"mp4","3gp":"flv",flvhd:"flv"},i={flvhd:"标清","3gphd":"标清",mp4sd:"标清",mp4hd:"高清",mp4hd2:"超清",mp4hd3:"1080p",mp4hd2v2:"超清",mp4hd3v2:"1080p"},n={flvhd:"mp4sd",mp4hd2:"mp4hd2v2",mp4hd3:"mp4hd3v2"};exports.VIDEOHD_MAP=e,exports.SHOWHD_MAP=i,exports.ACT_HD_MAP=n},function(t,exports){"use strict";function e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function i(){var t=self.navigator.userAgent.toLowerCase(),i=/(edge)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(iemobile)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],s=/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(android)/.exec(t)||/(windows)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||[],a={browser:i[5]||i[3]||i[1]||"",version:i[2]||i[4]||"0",majorVersion:i[4]||i[2]||"0",platform:s[0]||""},o={};if(o.isMobile=t.indexOf("mobile")>-1,o.isIOS9=/iPhone|iPod/.test(navigator.userAgent)&&/OS 9|OS 1\d{1,}/i.test(navigator.userAgent),o.isMobile){var r=e({alipay:"alipayclient",youku:"youku",UC:"ucbrowser",qqBrowser:"mqqbrowser",maoyan:"movie/",weixin:"micromessenger",sogou:"sogoumse"},"sogou","sogoumobilebrowser");for(var h in r)t.indexOf(r[h])>-1&&(o.browserType=h)}if(a.browser){o[a.browser]=!0;var d=a.majorVersion.split(".");o.version={major:parseInt(a.majorVersion,10),string:a.version},d.length>1&&(o.version.minor=parseInt(d[1],10)),d.length>2&&(o.version.build=parseInt(d[2],10))}if(a.platform&&(o[a.platform]=!0),(o.chrome||o.opr||o.safari)&&(o.webkit=!0),o.rv||o.iemobile){o.rv&&delete o.rv;var l="msie";a.browser=l,o[l]=!0}if(o.edge){delete o.edge;var u="msedge";a.browser=u,o[u]=!0}if(o.opr){var c="opera";a.browser=c,o[c]=!0}if(o.safari&&o.android){var f="android";a.browser=f,o[f]=!0}o.browserType?(o.name=o.browserType,o.safari=!1,o.chrome=!1):o.safari?(o.name="safari",o.safari=!0):(o.name="chrome",o.chrome=!0),o.android?(o.os="android",o.android=!0):"iphone"===a.platform||"ipod"===a.platform||"ipad"===a.platform||"mac"===a.platform?(o.os="ios",o.ios=!0):"windows phone"!==a.platform&&"windows"!==a.platform||(o.os="windows"),o.isMobile?o.device="phone":"windows"===a.platform?o.device="pc":o.device=a.platform,o.isIphone="iphone"===a.platform,o.isIpod="ipod"===a.platform,o.isIpad="ipad"===a.platform,n=o,window.Browser=o}Object.defineProperty(exports,"__esModule",{value:!0});var n={};i(),exports.default=n},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={hexcase:0,b64pad:"",chrsz:8,hex_md5:function(t){return this.binl2hex(this.core_md5(this.str2binl(t),t.length*this.chrsz))},b64_md5:function(t){return this.binl2b64(this.core_md5(this.str2binl(t),t.length*this.chrsz))},hex_hmac_md5:function(t,e){return this.binl2hex(this.core_hmac_md5(t,e))},b64_hmac_md5:function(t,e){return this.binl2b64(this.core_hmac_md5(t,e))},calcMD5:function(t){return this.binl2hex(this.core_md5(this.str2binl(t),t.length*this.chrsz))},md5_vm_test:function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc")},core_md5:function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,n=-271733879,s=-1732584194,a=271733878,o=0;o<t.length;o+=16){var r=i,h=n,d=s,l=a;i=this.md5_ff(i,n,s,a,t[o+0],7,-680876936),a=this.md5_ff(a,i,n,s,t[o+1],12,-389564586),s=this.md5_ff(s,a,i,n,t[o+2],17,606105819),n=this.md5_ff(n,s,a,i,t[o+3],22,-1044525330),i=this.md5_ff(i,n,s,a,t[o+4],7,-176418897),a=this.md5_ff(a,i,n,s,t[o+5],12,1200080426),s=this.md5_ff(s,a,i,n,t[o+6],17,-1473231341),n=this.md5_ff(n,s,a,i,t[o+7],22,-45705983),i=this.md5_ff(i,n,s,a,t[o+8],7,1770035416),a=this.md5_ff(a,i,n,s,t[o+9],12,-1958414417),s=this.md5_ff(s,a,i,n,t[o+10],17,-42063),n=this.md5_ff(n,s,a,i,t[o+11],22,-1990404162),i=this.md5_ff(i,n,s,a,t[o+12],7,1804603682),a=this.md5_ff(a,i,n,s,t[o+13],12,-40341101),s=this.md5_ff(s,a,i,n,t[o+14],17,-1502002290),n=this.md5_ff(n,s,a,i,t[o+15],22,1236535329),i=this.md5_gg(i,n,s,a,t[o+1],5,-165796510),a=this.md5_gg(a,i,n,s,t[o+6],9,-1069501632),s=this.md5_gg(s,a,i,n,t[o+11],14,643717713),n=this.md5_gg(n,s,a,i,t[o+0],20,-373897302),i=this.md5_gg(i,n,s,a,t[o+5],5,-701558691),a=this.md5_gg(a,i,n,s,t[o+10],9,38016083),s=this.md5_gg(s,a,i,n,t[o+15],14,-660478335),n=this.md5_gg(n,s,a,i,t[o+4],20,-405537848),i=this.md5_gg(i,n,s,a,t[o+9],5,568446438),a=this.md5_gg(a,i,n,s,t[o+14],9,-1019803690),s=this.md5_gg(s,a,i,n,t[o+3],14,-187363961),n=this.md5_gg(n,s,a,i,t[o+8],20,1163531501),i=this.md5_gg(i,n,s,a,t[o+13],5,-1444681467),a=this.md5_gg(a,i,n,s,t[o+2],9,-51403784),s=this.md5_gg(s,a,i,n,t[o+7],14,1735328473),n=this.md5_gg(n,s,a,i,t[o+12],20,-1926607734),i=this.md5_hh(i,n,s,a,t[o+5],4,-378558),a=this.md5_hh(a,i,n,s,t[o+8],11,-2022574463),s=this.md5_hh(s,a,i,n,t[o+11],16,1839030562),n=this.md5_hh(n,s,a,i,t[o+14],23,-35309556),i=this.md5_hh(i,n,s,a,t[o+1],4,-1530992060),a=this.md5_hh(a,i,n,s,t[o+4],11,1272893353),s=this.md5_hh(s,a,i,n,t[o+7],16,-155497632),n=this.md5_hh(n,s,a,i,t[o+10],23,-1094730640),i=this.md5_hh(i,n,s,a,t[o+13],4,681279174),a=this.md5_hh(a,i,n,s,t[o+0],11,-358537222),s=this.md5_hh(s,a,i,n,t[o+3],16,-722521979),n=this.md5_hh(n,s,a,i,t[o+6],23,76029189),i=this.md5_hh(i,n,s,a,t[o+9],4,-640364487),a=this.md5_hh(a,i,n,s,t[o+12],11,-421815835),s=this.md5_hh(s,a,i,n,t[o+15],16,530742520),n=this.md5_hh(n,s,a,i,t[o+2],23,-995338651),i=this.md5_ii(i,n,s,a,t[o+0],6,-198630844),a=this.md5_ii(a,i,n,s,t[o+7],10,1126891415),s=this.md5_ii(s,a,i,n,t[o+14],15,-1416354905),n=this.md5_ii(n,s,a,i,t[o+5],21,-57434055),i=this.md5_ii(i,n,s,a,t[o+12],6,1700485571),a=this.md5_ii(a,i,n,s,t[o+3],10,-1894986606),s=this.md5_ii(s,a,i,n,t[o+10],15,-1051523),n=this.md5_ii(n,s,a,i,t[o+1],21,-2054922799),i=this.md5_ii(i,n,s,a,t[o+8],6,1873313359),a=this.md5_ii(a,i,n,s,t[o+15],10,-30611744),s=this.md5_ii(s,a,i,n,t[o+6],15,-1560198380),n=this.md5_ii(n,s,a,i,t[o+13],21,1309151649),i=this.md5_ii(i,n,s,a,t[o+4],6,-145523070),a=this.md5_ii(a,i,n,s,t[o+11],10,-1120210379),s=this.md5_ii(s,a,i,n,t[o+2],15,718787259),n=this.md5_ii(n,s,a,i,t[o+9],21,-343485551),i=this.safe_add(i,r),n=this.safe_add(n,h),s=this.safe_add(s,d),a=this.safe_add(a,l)}return Array(i,n,s,a)},md5_cmn:function(t,e,i,n,s,a){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(n,a)),s),i)},md5_ff:function(t,e,i,n,s,a,o){return this.md5_cmn(e&i|~e&n,t,e,s,a,o)},md5_gg:function(t,e,i,n,s,a,o){return this.md5_cmn(e&n|i&~n,t,e,s,a,o)},md5_hh:function(t,e,i,n,s,a,o){return this.md5_cmn(e^i^n,t,e,s,a,o)},md5_ii:function(t,e,i,n,s,a,o){return this.md5_cmn(i^(e|~n),t,e,s,a,o)},core_hmac_md5:function(t,e){var i=this.str2binl(t);i.length>16&&(i=core_md5(i,t.length*this.chrsz));for(var n=Array(16),s=Array(16),a=0;a<16;a++)n[a]=909522486^i[a],s[a]=1549556828^i[a];var o=this.core_md5(n.concat(this.str2binl(e)),512+e.length*this.chrsz);return this.core_md5(s.concat(o),640)},safe_add:function(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i},bit_rol:function(t,e){return t<<e|t>>>32-e},str2binl:function(t){for(var e=Array(),i=(1<<this.chrsz)-1,n=0;n<t.length*this.chrsz;n+=this.chrsz)e[n>>5]|=(t.charCodeAt(n/this.chrsz)&i)<<n%32;return e},binl2hex:function(t){for(var e=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",n=0;n<4*t.length;n++)i+=e.charAt(t[n>>2]>>n%4*8+4&15)+e.charAt(t[n>>2]>>n%4*8&15);return i},binl2b64:function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",n=0;n<4*t.length;n+=3)for(var s=(t[n>>2]>>8*(n%4)&255)<<16|(t[n+1>>2]>>8*((n+1)%4)&255)<<8|t[n+2>>2]>>8*((n+2)%4)&255,a=0;a<4;a++)i+=8*n+6*a>32*t.length?this.b64pad:e.charAt(s>>6*(3-a)&63);
return i}};exports.default=e},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(3),o=e(1),r=i(o),h=function(){function t(e,i){n(this,t),this.adDom=e,this.pauseDom=i,this.adBtns={},this.pauseBtns={},this._createAdDom(),this._emitter=new r.default,this.lastTime=0,this.num=0}return s(t,[{key:"_createAdDom",value:function(){var t=a.util.createElement("x-advert-info");this.skipDom=a.util.createElement("x-advert-skip"),this.skipDom.innerHTML='<div class="x-advert-txt">跳过广告</div><div class="x-mask">';var e=a.util.createElement("x-advert-countdown");e.innerHTML=' <div class="x-advert-txt">广告 <span class="x-advert-sec"></span> 秒</div><div class="x-mask"></div>',t.appendChild(this.skipDom),t.appendChild(e),this.adDom.appendChild(t);var i=a.util.createElement("x-advert-detail");i.innerHTML='<div class="x-advert-txt">详细了解<span class="x-ico-detail"></span></div><div class="x-mask"></div>',this.adDom.appendChild(i),this.adBtns.skipBtn=a.util.get(".x-advert-txt",t)[0],this.adBtns.timeNum=a.util.get(".x-advert-sec",t)[0],this.adBtns.detailBtn=a.util.get(".x-advert-txt",i)[0]}},{key:"_createPauseDom",value:function(){this.pauseBtns.content=a.util.createElement("x-pause-content"),this.pauseBtns.closeBtn=a.util.createElement("x-pause-close"),this.pauseBtns.adtipBtn=a.util.createElement("x-pause-adtip"),this.pauseDom.appendChild(this.pauseBtns.content),this.pauseDom.appendChild(this.pauseBtns.closeBtn),this.pauseDom.appendChild(this.pauseBtns.adtipBtn)}},{key:"_fSkipAd",value:function(t){this._emitter.emit("adpause");var e="http://cps.youku.com/redirect.html?id=000002bf";location.href=e}},{key:"_knowDetail",value:function(){this._emitter.emit("adpause");var t=this.adInfo[this.num].CU;location.href=t}},{key:"_bindEvent",value:function(){this.ifEvent||(this.ifEvent=!0,this.e={skipAd:this._fSkipAd.bind(this),knowDetail:this._knowDetail.bind(this)},a.util.addEventListenerHander(this.adBtns.skipBtn,"touchend",this.e.skipAd),a.util.addEventListenerHander(this.adBtns.detailBtn,"touchend",this.e.knowDetail))}},{key:"setAdInfo",value:function(t){this.adInfo=t.VAL,this.totalTime=t.totalTime,this.adBtns.timeNum.innerHTML=parseInt(this.totalTime),this._bindEvent()}},{key:"reset",value:function(){this.adInfo=null,this.totalTime=0,this.lastTime=0,this.num=0}},{key:"initPauseAd",value:function(){this._createPauseDom()}},{key:"hide",value:function(){a.util.hide(this.adDom)}},{key:"show",value:function(){a.util.show(this.adDom)}},{key:"update",value:function(t,e){return this.num=e,t>=this.totalTime?void this.hide():void(this.lastTime>0&&t-this.lastTime<.5||(this.lastTime=t,this.adBtns.timeNum.innerHTML=parseInt(this.totalTime-t)))}}]),t}();exports.default=h},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(3),o=e(9),r=i(o),h=e(1),d=i(h),l=function(){function t(e,i,s){n(this,t),this.parentDom=e,this._player=i,this.config=s,this.btns={},this._createDom(),this._emitter=new d.default,this._bindEvent()}return s(t,[{key:"_createDom",value:function(){this.endPanelInner=a.util.createElement("x-endPanel-inner","","","div"),this.parentDom.appendChild(this.endPanelInner),this.btns.btnReplayDom=a.util.createElement("x-btn-replay","","","a");var t=a.util.createElement("x-replay-pic","","","span"),e=a.util.createElement("x-replay-text","","重新播放","span");this.btns.btnReplayDom.appendChild(t),this.btns.btnReplayDom.appendChild(e),this.btns.callDom=a.util.createElement("x-btn-em","","","button"),this.endPanelInner.appendChild(this.btns.callDom),this.endPanelInner.appendChild(this.btns.btnReplayDom)}},{key:"_bindEvent",value:function(){this.ifEvent||(this.ifEvent=!0,this.e={callApp:this.callApp.bind(this),replay:this.replay.bind(this)},a.util.addEventListenerHander(this.btns.callDom,"click",this.e.callApp),a.util.addEventListenerHander(this.btns.btnReplayDom,"click",this.e.replay))}},{key:"show",value:function(t,e,i,n){this.flag=t,this.vid=i,this.source=n,this.btns.callDom.innerHTML=e}},{key:"callApp",value:function(){var t,e=this.vid.replace("==","");2==this.flag?(t="https://h5.m.youku.com//ju/download.html?spm=a1z3i.a4.0.0.5311ca28QkO2Em&from=shenmabaike",this._player.sendGoldLog("/yt/youku_h5_player.openapp.ending","CLK","","H1509201106")):t="https://h5.m.youku.com//ju/download.html?spm=a1z3i.a4.0.0.5311ca28QkO2Em&from=shichang",r.default.gotoPage({pathname:"play",params:{vid:e,source:this.source},isNeedDownload:!0,downloadUrl:t}),this._emitter.emit("h5PlayerCallApp")}},{key:"replay",value:function(){this._emitter.emit("replay"),this.hideEndPanel(),2==this.flag&&this._player.sendGoldLog("/yt/youku_h5_player.openapp.replay","CLK","","H1509201166")}},{key:"hideEndPanel",value:function(){a.util.hide(this.parentDom)}}]),t}();exports.default=l},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(3),o=e(1),r=i(o),h=function(){function t(e,i){n(this,t),this.changeDom=e,this.hdshowDom=i,this._createDom(),this._emitter=new r.default,this.ifEvent=!1,this.e={showHd:this.showHd.bind(this),changeHd:this.changeHd.bind(this),changeLang:this.changeLang.bind(this)}}return s(t,[{key:"init",value:function(t,e,i,n,s){this.lang=t||"",this.hd=e||"",this.langList=i||[],this.hdList=n||[],this.player=s,this._conversionHd(),this._bindEvent()}},{key:"_bindEvent",value:function(){this.ifEvent||(this.ifEvent=!0,a.util.addEventListenerHander(this.changeDom,"click",this.e.showHd),a.util.addEventListenerHander(this.hdUl,"click",this.e.changeHd),a.util.addEventListenerHander(this.langUl,"click",this.e.changeLang))}},{key:"_createDom",value:function(){this.hdListTitle=a.util.createElement("x-hdshowlist-title","","清晰度/语言","span"),this.hdListItems=a.util.createElement("x-hdshowlist-items","","","div"),this.hdUl=a.util.createElement("left","","","ul"),this.langUl=a.util.createElement("","","","ul"),this.hdListItems.appendChild(this.hdUl),this.hdListItems.appendChild(this.langUl),this.hdshowDom.style.zIndex=71,this.hdshowDom.appendChild(this.hdListTitle),this.hdshowDom.appendChild(this.hdListItems)}},{key:"_conversionHd",value:function(){this.langCh="",this.hdCh="";var t=null,e=this.hdList.filter(function(e,i,n){var s=!0;return"标清"===e.hdname&&(s=!1,t?"3gphd"===e.hdcode&&(t=e):t=e),s});t&&e.unshift(t),this.hdList=e,this._chooseHd(),this._chooseLang(),this.changeDom.innerHTML=this.hdCh+"/"+this.langCh,this.showBtn()}},{key:"_chooseHd",value:function(){var t=this;this.hdUl.innerHTML="",this.hdList.forEach(function(e){var i=a.util.createElement("","",e.hdname,"li");i.setAttribute("hdcode",e.hdcode),e.hdcode===t.hd&&(t.hdCh=e.hdname,i.setAttribute("class","current")),t.hdUl.appendChild(i)})}},{key:"_chooseLang",value:function(){var t=this;this.langUl.innerHTML="",this.langList.forEach(function(e){var i=a.util.createElement("","",e.lang,"li");i.setAttribute("langcode",e.langcode),e.langcode===t.lang&&(t.langCh=e.lang,i.setAttribute("class","current")),t.langUl.appendChild(i)})}},{key:"changeHd",value:function(t){if(t.target.getAttribute("hdcode")&&t.target.getAttribute("hdcode")!==this.hd){var e=this.player.changeHd(t.target.getAttribute("hdcode"),function(t){});if(e)return this.hd=t.target.getAttribute("hdcode"),this._chooseHd(),this.hideHd(),void(this.changeDom.innerHTML=this.hdCh+"/"+this.langCh)}}},{key:"changeLang",value:function(t){if(t.target.getAttribute("langcode")&&t.target.getAttribute("langcode")!==this.lang){var e=this.player.changeLanguage(t.target.getAttribute("langcode"),function(){});if(e)return this.lang=t.target.getAttribute("langcode"),this._chooseLang(),this.hideHd(),void(this.changeDom.innerHTML=this.hdCh+"/"+this.langCh)}}},{key:"showHd",value:function(){a.util.show(this.hdshowDom)}},{key:"hideHd",value:function(){a.util.hide(this.hdshowDom)}},{key:"showBtn",value:function(){a.util.show(this.changeDom)}},{key:"hideBtn",value:function(){a.util.hide(this.changeDom)}}]),t}();exports.default=h},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(3),o=e(1),r=i(o),h=e(9),d=i(h),l=function(){function t(e,i,s,a){n(this,t),this.TAG="NoticePannel",this.parentDom=e,this._player=i,this.btns={},this.config=s,this.videoList=a,this.e={},this.callAppOpts={isNeedDownload:!0,timeout:2e3,downloadUrl:"",uri:"",replace:!1,params:{action:"",vid:"",source:"",refer:"",universalLinkState:!1},pathname:"splash",exdParams:{}},this._createDom(),this._emitter=new r.default,this.canOpenApp={android:"MQQBrowser|ucbrowser|weibo|micromessenger|AliApp|article",ios:"MQQBrowser|ucbrowser|weibo|QHBrowser|micromessenger|AliApp|article",noIntent:"MQQBrowser|ucbrowser|baidubrowser|sogouMobilebrowser|mxbrowser|LieBao|360 APhone|windvane|youku",iosNoUN:"Crios|Fxios|baidubrowser|sogouMobilebrowser|QHBrowser|Mxios"},this._bindEvent()}return s(t,[{key:"_createDom",value:function(){this.errorTipDom=a.util.createElement("x-errortip");var t=a.util.createElement("x-youkulogo x-iconmode");this.btns.errorNote=a.util.createElement("","","视频出错请重试","span"),this.btns.retryBtn=a.util.createElement("x-error-retry x-iconmode"),this.errorTipDom.appendChild(t),this.errorTipDom.appendChild(this.btns.errorNote),this.errorTipDom.appendChild(this.btns.retryBtn),this.limitTipDom=a.util.createElement("x-limittip");var e=a.util.createElement("x-youkulogo x-iconmode");this.btns.limitNote=a.util.createElement("","","本页面仅支持试看50分钟，更多内容尽在优酷App","span"),this.btns.limitOpen=a.util.createElement("x-openappbtn","","打开app，观看完整视频","button"),this.limitTipDom.appendChild(e),this.limitTipDom.appendChild(this.btns.limitNote),this.limitTipDom.appendChild(this.btns.limitOpen);var i=a.util.createElement("x-afteropen");this.btns.limitDown=a.util.createElement("x-downApp","","下载App","button"),this.btns.limitPlay=a.util.createElement("playagain","","重新试看","button"),i.appendChild(this.btns.limitDown),i.appendChild(this.btns.limitPlay),this.limitTipDom.appendChild(i),this.btns.limitAfter=i,this.passwordDom=a.util.createElement("x-password-panel"),this.btns.passwordNote=a.util.createElement("","","该视频已被加密，请输入密码","span"),this.btns.passwordInput=a.util.createElement("","","","input"),this.btns.passwordInput.type="password",this.btns.passwordInput.placeholder="请输入视频密码",this.btns.passwordInput.required=!0,this.btns.okBtn=a.util.createElement("","","","button"),this.btns.okBtn.innerHTML="确定",this.passwordDom.appendChild(this.btns.passwordNote),this.passwordDom.appendChild(this.btns.passwordInput),this.passwordDom.appendChild(this.btns.okBtn),this.fullDom=a.util.createElement("x-full-video","","","div"),a.util.hide(this.fullDom),this.parentDom.appendChild(this.errorTipDom),this.parentDom.appendChild(this.limitTipDom),this.parentDom.appendChild(this.passwordDom),this.parentDom.parentNode.appendChild(this.fullDom)}},{key:"_bindEvent",value:function(){this.ifEvent||(this.ifEvent=!0,this.e={submit:this.submitPassword.bind(this),retry:this.retry.bind(this),openApp:this.openApp.bind(this),downApp:this.downApp.bind(this),replay:this.replay.bind(this),fullPay:this.fullPay.bind(this)},a.util.addEventListenerHander(this.btns.okBtn,"touchend",this.e.submit),a.util.addEventListenerHander(this.btns.retryBtn,"touchend",this.e.retry),a.util.addEventListenerHander(this.btns.limitOpen,"touchend",this.e.openApp),a.util.addEventListenerHander(this.btns.limitDown,"click",this.e.downApp),a.util.addEventListenerHander(this.btns.limitPlay,"click",this.e.replay),a.util.addEventListenerHander(this.fullDom,"touchend",this.e.fullPay))}},{key:"initData",value:function(t){this.vid=t}},{key:"showLimit",value:function(t){t&&(this.btns.limitNote.innerHTML=t),a.util.hide(this.btns.limitAfter),a.util.show(this.btns.limitOpen),a.util.show(this.parentDom),a.util.show(this.limitTipDom)}},{key:"hideLimit",value:function(){a.util.hide(this.parentDom),a.util.hide(this.limitTipDom),a.util.hide(this.btns.limitAfter)}},{key:"showFullLimit",value:function(){this.fullDom.innerHTML=this._player.getVideoInfoParam().callButtonDes,a.util.show(this.fullDom)}},{key:"hideFullLimit",value:function(){a.util.hide(this.fullDom)}},{key:"showError",value:function(t,e){t&&(this.btns.errorNote.innerHTML=t),e?a.util.hide(this.btns.retryBtn):a.util.show(this.btns.retryBtn),a.util.show(this.parentDom),a.util.show(this.errorTipDom)}},{key:"hideError",value:function(){a.util.hide(this.parentDom),a.util.hide(this.errorTipDom)}},{key:"showPassword",value:function(t){this.btns.passwordInput.disabled=!1,this.btns.passwordInput.readOnly=!1,this.btns.passwordInput.value="",this.passwordIfClick=!1,t&&(this.btns.passwordInput.placeholder=t),a.util.show(this.parentDom),a.util.show(this.passwordDom)}},{key:"hidePassword",value:function(){a.util.hide(this.parentDom),a.util.hide(this.passwordDom)}},{key:"submitPassword",value:function(){if(!this.passwordIfClick){this.passwordIfClick=!0;var t=this.btns.passwordInput.value;if(""==t)return void(this.passwordIfClick=!1);this.btns.passwordInput.disabled=!0,this.btns.passwordInput.readOnly=!0;var e={};e.password=t,this._emitter.emit("retry",e),this.hidePassword()}}},{key:"openApp",value:function(){if(a.Log.i(this.TAG," openApp():"+this.ifopenApp),!this.ifopenApp){this.ifopenApp=!0,this.callApp("mplaypage12");var t=this;setTimeout(function(){a.util.hide(t.btns.limitOpen),a.util.show(t.btns.limitAfter),t.ifopenApp=!1},1e3)}}},{key:"downApp",value:function(){var t="";null!=window.navigator.userAgent.match(/OS/i)?(t="https://itunes.apple.com/app/id336141475",location.href=t):(t="http://down2.uc.cn/youku/down.php?pub=bd629376ebafddd1",window.open(t,"target=_blank"))}},{key:"retry",value:function(){var t={};this._emitter.emit("retry",t),this.hideError()}},{key:"replay",value:function(){this._emitter.emit("replay"),this.hideLimit()}},{key:"getQueryString",value:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?unescape(i[2]):null}},{key:"fullPay",value:function(){this._player.sendGoldLog("/yt/youku_h5_player.openapp.playing","CLK","","H1510124627");var t=this._player.getVideoInfoParam().callButtonDes,e=this._player.getVideoInfoParam().callButtonUrl;""!=t&&""!=e?window.top.location.href=e:this.callOpenApp(this.config.clientId,"https://h5.m.youku.com//ju/download.html?spm=a1z3i.a4.0.0.5311ca28QkO2Em&from=shenmabaike")}},{key:"callOpenApp",value:function(t,e){if(this.callAppOpts){this.callAppOpts.params.source=t;var i=this.getCallVid();i&&(this.callAppOpts.exdParams.position=t,this.callAppOpts.params.vid=i.replace("==",""),this.callAppOpts.params.action="play",this.callAppOpts.pathname="play"),e&&(this.callAppOpts.downloadUrl=e),this.exdUrl?(this.callAppOpts.downloadUrl=this.exdUrl,d.default.download(this.callAppOpts)):d.default.gotoPage(this.callAppOpts)}}},{key:"getCallVid",value:function(){var t=void 0;return t=null==this.videoList?this.vid:this.videoList.list[0].encodevid}},{key:"callApp",value:function(t,e,i){var n=this.getQueryString("refer")||"",s=this.getQueryString("tuid")||"",o=a.util.cookie.getCookie("__ysuid"),r="mplaypage2";t&&(r=t);var h="";i&&(h="|"+i);var d=encodeURIComponent(window.navigator.userAgent),l="youku://play?vid="+this.vid+"&refer="+n+"&tuid="+s+"&ua="+d+"&source="+r+"&cookieid="+o+h,u=new RegExp(this.canOpenApp.noIntent,"i"),c="youku://jsbplay?vid="+this.vid+"&refer="+n+"&tuid="+s+"&ua="+d+"&source="+r+"&cookieid="+o+h;if(null!=window.navigator.userAgent.match(/OS 9|OS 1\d{1,}/i)||2==e&&null!=window.navigator.userAgent.match(/OS/i)&&null!=window.navigator.userAgent.match(/CriOS/i))this.config.isIphoneYouku?window.location.href=c:window.location.href=l;else{var f=document.createElement("iframe");f.height=0,f.width=0,f.src=l,document.body.appendChild(f),setTimeout(function(){if(0==window.appLaunch&&null!=window.navigator.userAgent.match(/Android/i)&&null==window.navigator.userAgent.match(u)){var t="intent://play?vid="+this.vid+"&refer="+n+"&tuid="+s+"&ua="+d+"&source="+r+"&cookieid="+o+h+"#Intent;scheme=youku;package=com.youku.phone;end;";window.location=t}},1e3)}}}]),t}();exports.default=l},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(3),o=e(1),r=i(o),h="http://vip.youku.com/?c=xhr&a=h5_player_get_pay_info",d="http://cvip.youku.com/order/pay_info_h5",l="https://account.youku.com/",u=function(){function t(e){n(this,t),this.parentDom=e,this._createDom(),this._emitter=new r.default,this.e={tryPlay:this.tryPlay.bind(this),openVip:this.openVip.bind(this)}}return s(t,[{key:"init",value:function(t,e,i,n){this.videoInfo=t||{},this.trialInfo=e||null,this.payInfo=i||null,this.errorCode=n||"",(!this.trialInfo||this.trialInfo&&("cannot"===this.trialInfo.type||parseInt(0===this.trialInfo.time)))&&a.util.hide(this.tryBtn),this._organizeInfo(),this._bindEvent()}},{key:"_bindEvent",value:function(){this.ifEvent||(this.ifEvent=!0,a.util.addEventListenerHander(this.tryBtn,"touchend",this.e.tryPlay),a.util.addEventListenerHander(this.openBtn,"touchend",this.e.openVip))}},{key:"_createDom",value:function(){this.showTipDom=a.util.createElement("x-showtips-txt"),this.infoDom=a.util.createElement("x-tips-info","","","h2"),this.btnDom=a.util.createElement("x-showtips-btn"),this.tryBtn=a.util.createElement("x-btn x-btn-try","","免费试看","button"),this.openBtn=a.util.createElement("x-btn","","立即开通","button"),this.btnDom.appendChild(this.tryBtn),this.btnDom.appendChild(this.openBtn),this.showTipDom.appendChild(this.infoDom),this.showTipDom.appendChild(this.btnDom),this.parentDom.appendChild(this.showTipDom)}},{key:"_organizeInfo",value:function(){return this.videoInfo?void(this.payInfo.ownChannelId?this._getOwnerPromptInfo():this._getMemberPromptInfo()):this.errorCode?void("-3007"===this.errorCode?this.infoDom.innerHTML='该视频需<em class="x-type">付费</em>观看':"-3008"===this.errorCode?this._getOwnerPromptInfo():this._getMemberPromptInfo()):void 0}},{key:"_getOwnerPromptInfo",value:function(){var t=this,e=d+"?own_channel_id="+this.payInfo.ownChannelId+"&video_id="+this.videoInfo.id;a.util.getJsonp(e,function(e){if("20000"===e.code&&"success"===e.msg){var i=e.result.desc;i=i.replace(/>/,"</em>").replace(/</,'<em class="x-type">'),t.infoDom.innerHTML=e.result.desc,t.buy_link=e.result.button_url+"&cburl="+encodeURIComponent(location.href)}},function(){console.log("获取自频道提示信息接口报错")})}},{key:"_getMemberPromptInfo",value:function(){var t=this,e=h+"&video_id="+this.videoInfo.id;a.util.getJsonp(e,function(e){"20000"===e.code&&"success"===e.msg&&(t.infoDom.innerHTML=e.result.product_desc,t.buy_link=e.result.buy_link)},function(){console.log("获取会员提示信息接口报错")})}},{key:"show",value:function(){a.util.show(this.parentDom)}},{key:"tryPlay",value:function(){a.util.hide(this.parentDom),this._emitter.emit("tryPlay")}},{key:"openVip",value:function(){"-3007"===this.errorCode?window.location.href=l+"?callback="+encodeURIComponent(window.location.href):this.buy_link&&(window.location.href=this.buy_link)}}]),t}();exports.default=u},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=e(3),r=e(1),h=i(r),d=e(22),l=i(d),u=e(23),c=i(u),f=e(16),m=i(f),p=e(19),_=i(p),v=e(20),y=i(v),g=e(18),E=i(g),T=e(17),A=i(T),b=function(){function t(e,i,s){n(this,t),this.playerDom=e,this.config=s?s:{},this.btn={poster:o.util.get(".x-video-poster",this.playerDom)[0],title:o.util.get(".x-video-title",this.playerDom)[0],midPlayBtn:o.util.get(".x-video-button",this.playerDom)[0],youkulogo:o.util.get(".x-youkulogo",this.playerDom)[0],register:o.util.get(".x-video-rnum",this.playerDom)[0],license:o.util.get(".x-video-lnum",this.playerDom)[0],trigger:o.util.get(".x-trigger",this.playerDom)[0],loading:o.util.get(".x-video-loading",this.playerDom)[0],prompt:o.util.get(".x-prompt",this.playerDom)[0],adBtn:o.util.get(".x-advert",this.playerDom)[0],pauseAdBtn:o.util.get(".x-ad-pause",this.playerDom)[0],noteDom:o.util.get(".x-noticeshow",this.playerDom)[0],payDom:o.util.get(".x-showtips",this.playerDom)[0],hdshowDom:o.util.get(".x-hdshowlist",this.playerDom)[0],grad:o.util.get(".x-gradient",this.playerDom)[0],endDom:o.util.get(".x-endPanel",this.playerDom)[0]},this.dashboard=o.util.get(".x-dashboard",this.playerDom)[0],this.dashboard.style.display="block",this.panner={},this.class={pause:"i_pause",play:"i_play",outScreen:"x-iconmode i_outscreen",inScreen:"x-iconmode i_fscreen"},this.ifEvent=!1,this.ifFullScreen=!1,this.screenDirect=o.util.getScreenState(),this.touchMoving=!1,this.e={play:this.play.bind(this),playNext:this.playNext.bind(this),onTrigger:this.onTrigger.bind(this),onSeeking:this.onSeeking.bind(this),onProgress:this.onTouchProgress.bind(this),onProgressEnd:this.onTouchProgressEnd.bind(this),retry:this.retry.bind(this),switchFullscreen:this.switchFullscreen.bind(this),orientationchange:this._orientationchange.bind(this),callApp:this.callApp.bind(this)},this._emitter=new h.default,this._player=i,this._createDashboardDom(),this._uiInit(),this._progress=new l.default(this.btn.progress,this.btn.minProgress),this._prompt=new c.default(this.btn.prompt),this._adPannel=new m.default(this.btn.adBtn,this.btn.pauseAdBtn),this._noticePannel=new _.default(this.btn.noteDom,i,this.config,this._player.getVideoList()),this._noticePannel._emitter.on("retry",this.e.retry),this.titleDisplay="block",this._endPanel=new A.default(this.btn.endDom,i,s),this.isIOS10=/iPhone|iPod/.test(navigator.userAgent)&&/OS 10|OS 1\d{1,}/i.test(navigator.userAgent),this.isIOS=window.navigator.userAgent.indexOf("iPhone OS")>-1}return a(t,[{key:"_createDashboardDom",value:function(){this.xconsoleout=o.util.createElement("x-console-wrap"),this.xconsole=o.util.createElement("x-console"),this.dashboard.appendChild(this.xconsoleout),this.xconsoleout.appendChild(this.xconsole),this.btn.playBtn=o.util.createElement("x-play i_pause"),this.btn.nextVid=o.util.createElement("x-next i_next"),this.btn.progress=o.util.createElement("x-progress"),this.btn.changeBtn=o.util.createElement("change"),this.btn.fullScreenBtn=o.util.createElement("x-iconmode i_fscreen"),this.xconsole.appendChild(this.btn.playBtn),this.xconsole.appendChild(this.btn.nextVid),this.xconsole.appendChild(this.btn.progress),this.xconsole.appendChild(this.btn.changeBtn),this.xconsole.appendChild(this.btn.fullScreenBtn),o.util.hide(this.xconsoleout),0!==o.util.getScreenState()&&(o.util.hide(this.btn.nextVid),o.util.hide(this.btn.changeBtn)),this.btn.minProgress=o.util.createElement("x-progress-mini"),this.dashboard.appendChild(this.btn.minProgress),o.util.hide(this.btn.minProgress),this.config.closeFullFullScreen&&o.util.hide(this.btn.fullScreenBtn)}},{key:"_resize",value:function(){var t=document.documentElement.clientWidth,e=9*t/16;this.playerDom.style.height=e+"px",this.playerDom.style.width=t+"px"}},{key:"_uiInit",value:function(){this.config.dash&&(this.config.dash.play&&o.util.hide(this.btn.playBtn),this.config.dash.next&&o.util.hide(this.btn.nextVid),this.config.dash.full&&o.util.hide(this.btn.fullScreenBtn),this.config.dash.change&&o.util.hide(this.btn.changeBtn))}},{key:"init",value:function(t){if(this.hideLoading(),this._video=this._player.getVideoInfo(),this.hideLoading(),this._video){if(this.config.imgPoster&&(this._video.logo=this.config.imgPoster),this._video.logo){if(this.btn.poster.children.length>0)this.btn.poster.children[0].src=this._video.logo.replace("https://","//");else{var e=document.createElement("img");e.src=this._video.logo.replace("https://","//"),this.btn.poster.appendChild(e)}o.util.show(this.btn.poster)}this.btn.title.style.display=this.titleDisplay;var i=this.config.titleStyle;if("object"===("undefined"==typeof i?"undefined":s(i)))for(var n in i){var a=i[""+n];this.btn.title.style[n]=a,"display"==n&&(this.titleDisplay=a)}if(this.btn.title.innerHTML=this._video.title,this._noticePannel.initData(this._video.encodeid),!this._player.getError()){this._hdInfoPannel||(this._hdInfoPannel=new E.default(this.btn.changeBtn,this.btn.hdshowDom)),this._hdInfoPannel.init(this._player.control.lang,this._player.control.hd,this._player.getLanguageList(),this._player.getHdList(),this._player),this.hideChangeBtn(),o.util.show(this.btn.title,this.titleDisplay),this.showMidPlayBtn();var r=null;this._player.getTrialInfo()&&(r=parseInt(this._player.getTrialInfo().time)),this._progress.init(this._video.seconds,0,0),this._prompt.init(this._video.seconds,0,r),this.showRegisterNum(),this.showLogo(),this._bindEvent();var h=(this._player.getVideoInfo().type.join(","),this._player.getPayInfo());if(h&&h.can_play===!1)this._payInfoPannel||(this._payInfoPannel=new y.default(this.btn.payDom),this._payInfoPannel._emitter.on("tryPlay",this.e.play)),this.hideMidPlayBtn(),this._payInfoPannel.init(this._video,this._player.getTrialInfo(),this._player.getPayInfo()),this._payInfoPannel.show();else{var d=this._player.getTrialInfo();d&&"h5"===d.type&&(this.isLimit=!0)}}}}},{key:"_bindEvent",value:function(){this.ifEvent||(this.ifEvent=!0,o.util.addEventListenerHander(this.btn.midPlayBtn,"click",this.e.play),o.util.addEventListenerHander(this.btn.playBtn,"touchend",this.e.play),o.util.addEventListenerHander(this.btn.nextVid,"touchend",this.e.playNext),o.util.addEventListenerHander(this.btn.trigger,"touchend",this.e.onTrigger),o.util.addEventListenerHander(this.btn.fullScreenBtn,"touchend",this.e.switchFullscreen),o.util.addEventListenerHander(window,"orientationchange",this.e.orientationchange),this._progress._emitter.on("touchprogressend",this.e.onProgressEnd),this._progress._emitter.on("touchprogress",this.e.onProgress),this._progress._emitter.on("seeking",this.e.onSeeking),this._adPannel._emitter.on("adpause",this.e.play),this._noticePannel._emitter.on("replay",this.e.play))}},{key:"showRegisterNum",value:function(){this.show&&(this.show.license_num&&(this.btn.license.innerHTML=this.show.license_num,o.util.show(this.btn.license)),this.show.youku_register_num&&(this.btn.register.innerHTML=this.show.youku_register_num,o.util.show(this.btn.register)))}},{key:"hideRegisterNum",value:function(){this.show&&(this.show.license_num||this.show.youku_register_num)&&(o.util.hide(this.btn.license),o.util.hide(this.btn.register))}},{key:"hideMidPlayBtn",value:function(){o.util.hide(this.btn.midPlayBtn)}},{key:"showMidPlayBtn",value:function(){o.util.show(this.btn.midPlayBtn)}},{key:"showLogo",value:function(){var t=!1;t=!(this._player.thirdData&&this._player.thirdData&&parseInt(this._player.thirdData.noband.status))&&this._player.ifShowLogo(),this.show=this._player.getShow(),t?(this.show&&this.show.exclusive?this.btn.youkulogo.className="x-youkulogo x-youkulogo-exclusive":this.btn.youkulogo.className="x-youkulogo",o.util.show(this.btn.youkulogo)):o.util.hide(this.btn.youkulogo)}},{key:"hideLogo",value:function(){o.util.hide(this.btn.youkulogo)}},{key:"showChangeBtn",value:function(){0===o.util.getScreenState()?(o.util.show(this.btn.changeBtn),o.util.show(this.btn.nextVid)):(o.util.hide(this.btn.changeBtn),o.util.hide(this.btn.nextVid))}},{key:"hideChangeBtn",value:function(){o.util.hide(this.btn.changeBtn),o.util.hide(this.btn.nextVid)}},{key:"play",value:function(){this.showMedia(),this._player.isPause||this._player.mediaElement.paused?this._player.play():this._player.pause()}},{key:"replay",value:function(){this.showMedia(),this._player.replay()}},{key:"callApp",value:function(){this._player.onCallApp()}},{key:"retry",value:function(t){this.showLoading(),t&&t.password?this._player.reLoad(t.password):this._player.reLoad()}},{key:"onTrigger",value:function(){this.adplay||(this.adplay||this.ifdashShow?(o.util.hide(this.btn.title),this.hideDash(!1,!0)):(o.util.show(this.btn.title,this.titleDisplay),this.showDash(!0)))}},{key:"onPlay",value:function(){this.hideLoading(),this.adplay=!1,this.hideMidPlayBtn(),o.util.hide(this.btn.poster),o.util.hide(this.btn.title),o.util.hide(this.btn.loading),this.showLogo();var t=this.btn.playBtn.className;this.btn.playBtn.className=t.replace(this.class.pause,this.class.play),this.showCallButton=this._player.getVideoInfoParam().showCallButton,1==parseInt(this.showCallButton)?this._noticePannel.showFullLimit():this._noticePannel.hideFullLimit(),this._noticePannel.videoList=this._player.getVideoList()}},{key:"onPause",value:function(){1==parseInt(this.showCallButton)&&this._noticePannel.hideFullLimit();var t=this.btn.playBtn.className;return this.btn.playBtn.className=t.replace(this.class.play,this.class.pause),this.config.dash&&this.config.dash.pauseState?(this.hideDash(null,!0),void this.showMidPlayBtn()):void(!this.isIOS10&&this.isIOS&&this.showMidPlayBtn())}},{key:"onTimeUpdate",value:function(t){this.hideLoading(),t>5&&t-5<1&&this.hideRegisterNum(),this.lastTime&&!this._progress.isTouching||(this.lastTime=t),(0===t||1e3*Math.abs(t-this.lastTime)>=500)&&(this.lastTime=t,this._progress.update(t))}},{key:"onEnded",value:function(t){if(this.hideDash(!0),this.hideMedia(),this.trialInfo=this._player.getTrialInfo(),this._progress.update(0,0),this.hideLoading(),this.trialInfo&&"h5"===this.trialInfo.type){var e=parseInt(this.trialInfo.time);this.showLimit(e)}else if(this._payInfoPannel)this._payInfoPannel.show();else{if(this.config.embed_content&&this.config.embed_vid){o.util.show(this.btn.endDom);var i=this.config.source?this.config.source:"H5mr1705";this._endPanel.show(1,this.config.embed_content,this.config.embed_vid,i)}else 1==parseInt(this.showCallButton)?(o.util.show(this.btn.endDom),this._endPanel.show(2,"打开优酷app观看",this.getCallVid(),this.config.clientId)):(o.util.show(this.btn.poster),this.showMidPlayBtn());(this.config.embed_content&&this.config.embed_vid||1==parseInt(this.showCallButton))&&(this._endPanel._emitter.on("replay",this.e.play),
this._endPanel._emitter.on("h5PlayerCallApp",this.e.callApp))}}},{key:"getCallVid",value:function(){var t=void 0;return t=null==this._player.getVideoList()?this._video.encodeid:this._player.getVideoList().list[0].encodevid}},{key:"onError",value:function(t){if(this.hideLoading(),this.hideMidPlayBtn(),this.hideDash(!0),!t||!t.code)return this.showError("播放错误，请重试"),void this.sendEventLog("xve","m");var e=t.code;if(e=""+e,"-2002"===e||"-2003"===e){this.hideMidPlayBtn(),this.needPassword=!0;var i=t.note?t.note.replace(/<font color="#FF0000">/,"").replace("</font>",""):"请输入密码";this.showPassword(i)}else if("-3007"===e||"-3006"===e||"-3008"===e||"-3001"===e||"-3002"===e||"-3003"===e)this._video||(this._video=this._player.getVideoInfo()),this._payInfoPannel||(this._payInfoPannel=new y.default(this.btn.payDom)),this._payInfoPannel.init(this._video,"",this._player.getPayInfo(),e),this._payInfoPannel.show();else{var n=t&&t.note?t.note:"播放错误";this.showError(n,!0)}}},{key:"showDash",value:function(t){t&&this._player.sendEventLog("xCd","c"),this._progress.changeStatus(!1),o.util.show(this.xconsoleout),o.util.show(this.btn.title,this.titleDisplay),o.util.show(this.btn.grad),this._progress.changeTrackWidth(),o.util.hide(this.btn.minProgress),this.ifdashShow=!0,this.config.event&&this.config.event.showDash&&this.config.event.showDash();var e=this;this.dashtimer&&(clearTimeout(this.dashtimer),this.dashtimer=null),this.dashtimer=setTimeout(function(){e._progress.isTouching&&e.adplay?e.showDash():e.hideDash(null,!0)},5e3)}},{key:"hideDash",value:function(t,e){return this.dashtimer&&(clearTimeout(this.dashtimer),this.dashtimer=null),e&&this._player.sendEventLog("xHd","c"),this._progress.changeStatus(!0),this.ifdashShow=!1,o.util.hide(this.xconsoleout),o.util.hide(this.btn.title),o.util.hide(this.btn.hdshowDom),o.util.hide(this.btn.grad),this.config.event&&this.config.event.hideDash&&this.config.event.hideDash(),t?void o.util.hide(this.btn.minProgress):void o.util.show(this.btn.minProgress)}},{key:"hideMedia",value:function(){o.util.hide(this._player.mediaElement)}},{key:"showMedia",value:function(){o.util.show(this._player.mediaElement)}},{key:"showLoading",value:function(){o.util.show(this.btn.loading)}},{key:"hideLoading",value:function(){o.util.hide(this.btn.loading)}},{key:"showRecord",value:function(t){this.showDash(),this._progress.showRecode(t)}},{key:"showSkipHead",value:function(t){this.showDash(),this._progress.showSkiplog(t,"已经为您跳过片头")}},{key:"showSkipTail",value:function(t){this.showDash(),this._progress.showSkiplog(t,"已经为您跳过片尾")}},{key:"playNext",value:function(){this._videoList=this._player.getVideoList(),this._videoList.next&&this._player.changeByVid(this._videoList.next.encodevid)}},{key:"showError",value:function(t,e){this.hideDash(!0),this.hideMidPlayBtn(),this.hideLoading(),this.hideRegisterNum(),this._noticePannel.showError(t,e)}},{key:"showPassword",value:function(t){this.hideDash(!0),this.hideMidPlayBtn(),this.hideLoading(),this._noticePannel.showPassword(t)}},{key:"showLimit",value:function(t){this.hideDash(!0),this.hideMidPlayBtn(),this.hideLoading(),this.hideRegisterNum();var e=t>=60?parseInt(t/60)+"分钟":t+"秒",i="本页面仅支持试看"+e+"，更多内容尽在优酷App";this._noticePannel.showLimit(i)}},{key:"switchFullscreen",value:function(t){var e=t&&t.method?t.method:"c";if(o.Log.d(this.TAG,"switchFullscreen:width："+document.documentElement.clientWidth+" height:"+document.documentElement.clientHeight),this.ifFullScreen){this._player.sendEventLog("exfs",e);var i=document.documentElement.clientWidth,n=0;if(n=0===o.util.getScreenState()?document.documentElement.clientHeight:9*i/16,document.webkitCancelFullScreen)return this._changeFullState(),this.ifFullScreen=!1,this._player.exitFullscreen(),void document.webkitCancelFullScreen()}else{if(this._player.launchFullscreen(),this._player.sendEventLog("xenfs",e),this.isIOS&&1===o.util.getScreenState())return this.playerDom.webkitRequestFullScreen?(this.ifFullScreen=!0,void this.playerDom.webkitRequestFullScreen()):void(this._player.mediaElement.webkitSupportsFullscreen&&this._player.mediaElement.readyState>=1&&this._player.mediaElement.webkitEnterFullscreen());document.documentElement.clientWidth,document.documentElement.clientHeight;if(this.playerDom.webkitRequestFullScreen)return this._changeFullState("enter"),this.ifFullScreen=!0,void this.playerDom.webkitRequestFullScreen();this._player.mediaElement.webkitSupportsFullscreen&&this._player.mediaElement.readyState>=1&&this._player.mediaElement.webkitEnterFullscreen()}}},{key:"_changeFullState",value:function(t){"enter"===t?this.btn.fullScreenBtn.className=this.class.outScreen:this.btn.fullScreenBtn.className=this.class.inScreen}},{key:"_orientationchange",value:function(){this.sendEventLog("xre","m")}},{key:"seek",value:function(t,e){this.showLoading(),this._player.seek(e)}},{key:"onTouchProgress",value:function(t,e){var i=t.st||0,n=t.dt||0;this._prompt.setTip(i,n),this._prompt.show(),this._progress.update(i)}},{key:"onTouchProgressEnd",value:function(t,e,i){this.touchMoving=!0,this._player.sendEventLog("xDs","d",i),this._player.seek(e),this._prompt.hide()}},{key:"onSeeking",value:function(t,e){this._player.sendEventLog("xcs","c"),this.seek(t,e)}},{key:"initAd",value:function(t){0!==t.totalTime&&this._adPannel.setAdInfo(t)}},{key:"onAdPlay",value:function(){this.adplay||(this.hideDash(!0),this.hideLogo(),o.util.hide(this.btn.title),o.util.hide(this.btn.poster),this.hideRegisterNum(),o.util.hide(this.btn.minProgress)),this.adplay=!0,this.hideMidPlayBtn(),this.showLoading()}},{key:"onAdCanPlay",value:function(){this.hideLoading(),this._adPannel.show()}},{key:"onAdPause",value:function(){this.showMidPlayBtn()}},{key:"onAdTimeUpdate",value:function(t,e){this.hideLoading(),this._adPannel.update(t,e)}},{key:"onAdEnd",value:function(){this.adplay&&(this.adplay=!1,this._adPannel.hide(),this._adPannel.reset(),this.showLogo(),this.showRegisterNum(),this.showDash())}},{key:"onLoading",value:function(){this.showLoading()}},{key:"onCanplay",value:function(){this.hideLoading()}}]),t}();exports.default=b},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(3),o=e(1),r=i(o),h=function(){function t(e,i){n(this,t),this.TAG="Progress",this.dom=e,this.minDom=i,this.btn={curTimeBtn:null,totalTimeBtn:null,track:null,loaded:null,played:null,recode:null,skiplog:null,seekBtn:null},this.e={seek:this.seek.bind(this),touchstart:this.onTouchStart.bind(this),touchend:this.onTouchEnd.bind(this),touchmove:this.onTouchMove.bind(this)},this.createDom(),this._emitter=new r.default}return s(t,[{key:"createDom",value:function(){this.btn.curTimeBtn=a.util.createElement("x-playtime",null,"00:00","span"),this.btn.totalTimeBtn=a.util.createElement("x-alltime",null,"00:00","span"),this.btn.track=a.util.createElement("x-progress-track"),this.dom.appendChild(this.btn.curTimeBtn),this.dom.appendChild(this.btn.track),this.dom.appendChild(this.btn.totalTimeBtn),this.btn.loaded=a.util.createElement("x-progress-load","","","span"),this.btn.loaded.style.width="0px",this.btn.played=a.util.createElement("x-progress-play","","<span class='seek-btn'><i class='seek-icon'></i></span>","div"),this.btn.played.style.width="15px",this.btn.seekBtn=a.util.get(".seek-btn",this.btn.played)[0],this.btn.recode=a.util.createElement("x-play-recode"),a.util.hide(this.btn.recode),this.btn.skiplog=a.util.createElement("x-play-skiplog"),a.util.hide(this.btn.skiplog),this.btn.track.appendChild(this.btn.loaded),this.btn.track.appendChild(this.btn.played),this.btn.track.appendChild(this.btn.skiplog),this.btn.track.appendChild(this.btn.recode),this.minDom&&(this.btn.minLoaded=a.util.createElement("x-progress-load-mini","","","span"),this.btn.minPlayed=a.util.createElement("x-progress-play-mini","","","span"),this.minDom.appendChild(this.btn.minLoaded),this.minDom.appendChild(this.btn.minPlayed),a.util.hide(this.minDom))}},{key:"init",value:function(t,e,i){this.totalTime=t,this.currentTime=e,this.loadTime=i;var n=e/t*100,s=i/t*100;e/t*this.btn.track.offsetWidth<15&&(n=15/this.btn.track.offsetWidth*100),this.btn.played.style.width=n+"%",this.btn.loaded.style.width=s+"%",this.btn.minLoaded&&(this.btn.minPlayed.style.width=n+"%",this.btn.minLoaded.style.width=s+"%"),this.btn.totalTimeBtn.innerHTML=a.util.getTimeModel(t),this.btn.curTimeBtn.innerHTML=a.util.getTimeModel(e),this.changeTrackWidth(),this._bindEvent()}},{key:"_bindEvent",value:function(){this.ifEvent||(this.ifEvent=!0,a.util.addEventListenerHander(this.btn.track,"touchend",this.e.seek),a.util.addEventListenerHander(this.btn.seekBtn,"touchstart",this.e.touchstart))}},{key:"changeTrackWidth",value:function(){this._trackWidth=this.btn.track.offsetWidth,this._left=this.btn.track.offsetLeft}},{key:"changeStatus",value:function(t){this.hide=t}},{key:"update",value:function(t,e){if(t||0===t){t=t>this.totalTime?this.totalTime:t,this.currentTime=t;var i=t/this.totalTime;i*this._trackWidth<15&&(i=15/this.btn.track.offsetWidth),this.btn.played.style.width=100*i+"%",this.btn.minPlayed&&(this.btn.minPlayed.style.width=t/this.totalTime*100+"%"),this.btn.curTimeBtn.innerHTML=a.util.getTimeModel(t)}if(e||0===e){e=e>this.totalTime?this.totalTime:e;var n=e/this.totalTime*100;this.btn.loaded.style.width=n+"%",this.btn.minLoaded&&(this.btn.minLoaded.style.width=n+"%")}}},{key:"showRecode",value:function(t){var e=t/this.totalTime;t/this.totalTime<.12&&(e=.12),this.btn.recode.style.left=100*e+"%",this.btn.recode.innerHTML="已记录您上次观看至"+a.util.getTimeModel(t),a.util.show(this.btn.recode);var i=this;setTimeout(function(){i.hideRecode()},3e3)}},{key:"hideRecode",value:function(){a.util.hide(this.btn.recode)}},{key:"showSkiplog",value:function(t,e){var i=t/this.totalTime;t/this.totalTime<.13&&(i=.13),this.btn.skiplog.style.left=100*i+"%",this.btn.skiplog.innerHTML=e,a.util.show(this.btn.skiplog);var n=this;setTimeout(function(){n.hideSkiplog()},3e3)}},{key:"hideSkiplog",value:function(){a.util.hide(this.btn.skiplog)}},{key:"seek",value:function(t){var e=t.offsetX||t.changedTouches[0].clientX-this._left;console.log("x = "+e+"   e.changedTouches[0].clientX:"+t.changedTouches[0].clientX);var i=e/this.btn.track.offsetWidth,n=i*this.totalTime;n<0&&(n=0),n===this.totalTime&&(n=this.totalTime),this.update(n),this._emitter.emit("seeking",t,n)}},{key:"onTouchStart",value:function(t){if(!this.hide){if(this.changeTrackWidth(),1!=t.targetTouches.length||this.isTouching)return!1;this.startX=t.targetTouches[0].clientX,a.Log.d(this.TAG,"onTouchStart:"+this.startX+"  "+this.currentTime),t.preventDefault(),this.isTouching=!0,this.startTime=this.currentTime,a.util.addEventListenerHander(this.btn.seekBtn,"touchmove",this.e.touchmove),a.util.addEventListenerHander(this.btn.seekBtn,"touchend",this.e.touchend)}}},{key:"onTouchMove",value:function(t){if(this.isTouching=!0,1!=t.targetTouches.length)return!1;t.preventDefault(),t.stopPropagation();var e=t.targetTouches[0].clientX-this.startX,i=e/this._trackWidth,n=this.startTime+i*this.totalTime,s={st:n,dt:n-this.currentTime};return this._emitter.emit("touchprogress",s),this.currentTime=Math.min(Math.max(n,0),this.totalTime),this.update(this.currentTime),!1}},{key:"onTouchEnd",value:function(t){if(t.changedTouches.length>1)return!1;var e={tb:parseInt(100*this.startTime)/100,to:parseInt(100*this.currentTime)/100};t.preventDefault(),t.stopPropagation();Math.min(Math.max(this.currentTime,0),this.totalTime-5);this._emitter.emit("touchprogressend",t,this.currentTime,e),a.util.removeEventListenerHander(this.btn.seekBtn,"touchmove",this.e.touchmove),a.util.removeEventListenerHander(this.btn.seekBtn,"touchend",this.e.touchend),this.isTouching=!1}}]),t}();exports.default=h},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(3),o=e(1),r=(i(o),function(){function t(e){n(this,t),this.parentDom=e,this.class={forward:"x-prompt-icon forward",back:"x-prompt-icon back"},this.e={},this._createDom()}return s(t,[{key:"init",value:function(t,e,i){e=e?e:0,this.totalTime=t,this.tryTime=i||0===i?i:-1,this.totalTimeDom.innerHTML=a.util.getTimeModel(this.totalTime),this.curTimeDom.innerHTML=a.util.getTimeModel(e)}},{key:"_createDom",value:function(){this.modeDom=a.util.createElement("x-prompt-mode"),this.stateDom=a.util.createElement("x-prompt-icon"),this.timeDom=a.util.createElement("x-prompt-time"),this.modeDom.appendChild(this.stateDom),this.modeDom.appendChild(this.timeDom),this.curTimeDom=a.util.createElement("x-current","","","span");var t=a.util.createElement("","","/","i");this.totalTimeDom=a.util.createElement("x-total","","","span"),this.timeDom.appendChild(this.curTimeDom),this.timeDom.appendChild(t),this.timeDom.appendChild(this.totalTimeDom),this.parentDom.appendChild(this.modeDom)}},{key:"setStatus",value:function(t){}},{key:"hideStatus",value:function(t){}},{key:"setTip",value:function(t,e){this.tryTime>-1&&t>this.tryTime&&(t=this.tryTime),t<0?t=0:t>this.totalTime&&(t=this.totalTime),this._progressFlag=!0,this.curTimeDom.innerHTML=a.util.getTimeModel(t),e<=0?(this.stateDom.className=this.class.back,a.util.show(this.parentDom)):(this.stateDom.className=this.class.forward,a.util.show(this.parentDom)),this.autoHide();var i=this;setTimeout(function(t){i._progressFlag=!1},1e3)}},{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"autoHide",value:function(){if(!this.timer){var t=this;this.timer=setTimeout(function(){t.timer=null,t._progressFlag?t.autoHide():a.util.hide(t.parentDom)},2e3)}}}]),t}());exports.default=r},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=e(3),h=e(21),d=i(h),l=function(t){function e(t,i,a,o){n(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));r.TAG="H5PhonePlayer",r.playerCon=a;var h=o?o:{};return i.width&&i.height&&(h.width=i.width,h.height=i.height),i.embed_content&&i.embed_vid&&(h.embed_content=i.embed_content,h.embed_vid=i.embed_vid),i.source&&(h.source=i.source),h.closeFullFullScreen=i.closeFullFullScreen,h.isIphoneYouku=i.isIphoneYouku,h.titleStyle=i.titleStyle,h.imgPoster=i.imgPoster,h.clientId=i.client_id,r.h5_firstFlag=!0,r.ad_firstFlag=!0,r._control=new d.default(r.playerCon,r,h),r._control.onLoading(),r}return a(e,t),o(e,[{key:"upsDataReady",value:function(){this._control.hideLoading();this.getVideoInfo();this._control.init()}},{key:"upsDataError",value:function(t){this._control.hideLoading(),this._control.onError(t)}},{key:"upsDataFail",value:function(t){this._control.hideLoading();var e=t&&t.note?t.note:"获取视频数据超时，请重试";this._control.showError(e)}},{key:"onPlay",value:function(){this.h5_firstFlag&&(this.h5_firstFlag=!1,this.config.events&&this.config.events.onPlayStart&&this.config.events.onPlayStart()),this.config.events&&this.config.events.onPlay&&this.config.events.onPlay(),r.util.show(this.mediaElement),this._control.onPlay()}},{key:"onPause",value:function(){this._control.onPause(),this.config.events&&this.config.events.onPause&&this.config.events.onPause()}},{key:"onReplay",value:function(){this.config.events&&this.config.events.onReplay&&this.config.events.onReplay()}},{key:"onCallApp",value:function(){this.config.events&&this.config.events.onCallApp&&this.config.events.onCallApp()}},{key:"onError",value:function(t){this.sendEventLog("xve","e"),this._control.showError("视频播放失败，请重试")}},{key:"onStalled",value:function(t){this.isPause||this.isEnd||this._control.onLoading()}},{key:"onSuspend",value:function(t){this.isPause||this.isEnd||this._control.onLoading()}},{key:"onWaiting",value:function(t){this.isPause||this.isEnd||(this._control.onLoading(),this.config.events&&this.config.events.onWaiting&&this.config.events.onWaiting())}},{key:"onCanplay",value:function(t){this._control.onCanplay()}},{key:"onTimeupdate",value:function(t,e){this._control.onTimeUpdate(e),this.config.events&&this.config.events.onTimeupdate&&this.config.events.onTimeupdate(e)}},{key:"onEnded",value:function(t){if(r.util.hide(this.mediaElement),this._control.onEnded(t),this.config.events&&this.config.events.onPlayEnd){var e=this.getVideoList(),i=!this.getPayInfo()&&!this.getTrialInfo()&&e&&e.next?e.next:null;this.config.events.onPlayEnd(i)}}},{key:"onAdTimeUpdate",value:function(t,e,i,n){this._control.onAdTimeUpdate(e,n)}},{key:"onAdStartPlay",value:function(t,e){this.ad_firstFlag&&"front"===e&&(this.ad_firstFlag=!1,this.config.events&&this.config.events.onAdPlayStart&&this.config.events.onAdPlayStart()),this._control.onAdPlay()}},{key:"onAdCanPlay",value:function(t,e){this._control.onAdCanPlay()}},{key:"onAdPause",value:function(t,e){this._control.onAdPause()}},{key:"onAdEnd",value:function(t,e){this._control.onAdEnd()}},{key:"onAdError",value:function(t,e){}},{key:"adDataOk",value:function(t,e){this._control.initAd(t,e)}},{key:"adDataError",value:function(){}},{key:"switchFullScreen",value:function(){this._control&&this._control.switchFullscreen()}}]),e}(r.YoukuH5PlayerCore);exports.default=l},function(t,exports){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){var i=[],n=!0,s=!1,a=void 0;try{for(var o,r=t[Symbol.iterator]();!(n=(o=r.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){s=!0,a=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw a}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();Object.defineProperty(exports,"__esModule",{value:!0});var a=new RegExp("^([a-z0-9-]+:)?[/]{2}(?:([^@/:?]+)(?::([^@/:]+))?@)?([^:/?#]+)(?:[:]([0-9]+))?([/][^?#;]*)?(?:[?]([^#]*))?([#][^?]*)?$","i"),o=function(){function t(i){e(this,t),this._params={},this._hash="",i&&this.assign(i.toString())}return s(t,[{key:"assign",value:function(t){t=t||"";var e=t.match(a);if(!e)throw new Error("Parse Error");this.protocol=e[1]||("object"===("undefined"==typeof location?"undefined":n(location))?location.protocol:""),this.username=e[2]||"",this.password=e[3]||"",this.hostname=e[4],this.port=e[5]||"",this.pathname=e[6]||"/",this.search=e[7]||"",this.hash=e[8]||"",this.origin=this.protocol+"//"+this.host}},{key:"toString",value:function(){var t=this.protocol+"//";return this.username&&(t+=this.username,this.password&&(t+=":"+this.password),t+="@"),t+=this.hostname,this.port&&"80"!==this.port&&(t+=":"+this.port),this.pathname&&(t+=this.pathname),this.search&&(t+=this.search),this.hash&&(t+=this.hash),t}},{key:"params",get:function(){return this._params},set:function(t){if(t&&"object"===("undefined"==typeof t?"undefined":n(t))&&!(t instanceof Date)&&!(t instanceof RegExp)&&!(t instanceof Array)&&!(t instanceof String)&&!(t instanceof Number)&&!(t instanceof Boolean)){for(var e in this._params)delete this._params[e];for(var e in t)this._params[e]=t[e]}}},{key:"search",get:function(){var t=[];for(var e in this._params)if(void 0!==this._params[e])if(""!==this._params[e])try{t.push(encodeURIComponent(e)+"="+encodeURIComponent(this._params[e]))}catch(i){t.push(e+"="+this._params[e])}else try{t.push(encodeURIComponent(e))}catch(i){t.push(e)}return t.length?"?"+t.join("&"):""},set:function(t){if("string"==typeof t||t instanceof String){t=t.toString(),0===t.indexOf("?")&&(t=t.substr(1));var e=t.split("&");for(var n in this._params)delete this._params[n];for(var s=0;s<e.length;s++){var a=e[s].split("="),o=i(a,2),r=o[0],h=o[1];if(void 0!==h&&(h=h.toString()),r)try{this._params[decodeURIComponent(r)]=decodeURIComponent(h)}catch(t){this._params[r]=h}}}}},{key:"hash",get:function(){return this._hash},set:function(t){("string"==typeof t||t instanceof String)&&(t=t.toString(),t&&t.indexOf("#")<0&&(t="#"+t),this._hash=t||"")}},{key:"host",get:function(){return this.hostname+(this.port?":"+this.port:"")},set:function(t){if("string"==typeof t||t instanceof String){t=t.toString();var e=t.match(/([^:\/?#]+)(?:[:]([0-9]+))?/);e&&(this.hostname=e[1],this.port=e[2]||"")}}}]),t}();exports.default=o},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var n,s,a=e(5),o=i(a),r=e(10),h=i(r),d=window.navigator.userAgent,l=!1,u="",c="",f="";(s=d.match(/WindVane[\/\s]([\d\.\_]+)/i))&&(n=s[1]),(s=d.match(/AliApp\(([A-Z\-]+)\/([\d\.]+)\)/i))&&(l=!0,u=s[1],f=s[2],c=u.indexOf("-PD")>0?h.default.isIOS?"iPad":h.default.isAndroid?"AndroidPad":h.default.name:h.default.name),!u&&d.indexOf("TBIOS")>0&&(u="TB");var m=window._ua_popLayer||"",p=!1,_="";m&&(s=m.match(/PopLayer\/([\d\.]+)/i))&&(p=!0,_=s[1]),l&&(l={windvane:new o.default(n||"0.0.0"),appname:u||"unkown",version:new o.default(f||"0.0.0"),platform:c||h.default.name,poplayer:p||!1,poplayerVersion:new o.default(_||"0.0.0")}),exports.default=l},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var n,s,a=e(5),o=i(a),r=window.navigator.userAgent;(s=r.match(/(?:UCWEB|UCBrowser\/)([\d\.]+)/))?n={name:"UC",isUC:!0,version:new o.default(s[1])}:(s=r.match(/MQQBrowser\/([\d\.]+)/))?n={name:"QQ",isQQ:!0,version:new o.default(s[1])}:(s=r.match(/(?:Firefox|FxiOS)\/([\d\.]+)/))?n={name:"Firefox",isFirefox:!0,version:new o.default(s[1])}:(s=r.match(/MSIE\s([\d\.]+)/))||(s=r.match(/IEMobile\/([\d\.]+)/))?(n={version:new o.default(s[1])},r.match(/IEMobile/)?(n.name="IEMobile",n.isIEMobile=!0):(n.name="IE",n.isIE=!0),r.match(/Android|iPhone/)&&(n.isIELikeWebkit=!0)):(s=r.match(/(?:Chrome|CriOS)\/([\d\.]+)/))?(n={name:"Chrome",isChrome:!0,version:new o.default(s[1])},r.match(/Version\/[\d+\.]+\s*Chrome/)&&(n.name="Chrome Webview",n.isWebview=!0)):r.match(/Safari/)&&(s=r.match(/Android[\s\/]([\d\.]+)/))?n={name:"Android",isAndroid:!0,version:new o.default(s[1])}:r.match(/iPhone|iPad|iPod/)&&(r.match(/Safari/)&&(s=r.match(/Version\/([\d\.]+)/))?n={name:"Safari",isSafari:!0,version:new o.default(s[1])}:(s=r.match(/OS ([\d_\.]+) like Mac OS X/))&&(n={name:"iOS Webview",isWebview:!0,version:new o.default(s[1].replace(/\_/g,"."))})),n||(n={name:"unknown",version:new o.default("0.0.0")}),exports.default=n},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Version=exports.params=exports.thirdapp=exports.aliapp=exports.os=exports.browser=void 0;var n=e(26),s=i(n),a=e(27),o=i(a),r=e(10),h=i(r),d=e(30),l=i(d),u=e(29),c=i(u),f=e(5),m=i(f);exports.browser=o.default,exports.os=h.default,exports.aliapp=s.default,exports.thirdapp=l.default,exports.params=c.default,exports.Version=m.default},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={},i=window.location.search.replace(/^\?/,"");if(i)for(var n=i.split("&"),s=0;s<n.length;s++){n[s]=n[s].split("=");try{e[n[s][0]]=decodeURIComponent(n[s][1])}catch(t){e[n[s][0]]=n[s][1]}}exports.default=e},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,i=window.navigator.userAgent;e=i.match(/Weibo/i)?{appname:"Weibo",isWeibo:!0}:!!i.match(/MicroMessenger/i)&&{appname:"Weixin",isWeixin:!0},exports.default=e},function(t,exports){function e(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var s in n)i.call(n,s)&&(t[s]=n[s])}return t}t.exports=e;var i=Object.prototype.hasOwnProperty},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(6),o=i(a),r=e(2),h=i(r),d=e(1),l=i(d),u=e(4),c=i(u),f=e(12),m=i(f),p=function(){function t(e){n(this,t),this.TAG="ADPlayer",this.config=e,this.supportType=e.supportType||"mp4",this.addata=null,this.curNum=0,this.remainTime=0,this.currentTime=0,this._pastTime=0,this._firstTag=!0,this._isEnd=!0,this.posiTime=0,this.e={onPlay:this._onPlay.bind(this),onEnd:this._onEnd.bind(this),onUnitEnd:this._onUnitEnd.bind(this),onPause:this._onPause.bind(this),onTimeupdate:this._onTimeupdate.bind(this),onUnitTimeUpdate:this._onUnitTimeUpdate.bind(this),onCanPlay:this._onCanPlay.bind(this),onStalled:this._onStalled.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)},this.tryNum=1,this._emitter=new l.default,this._mediaElement=null,this._timer=null,this._adreport=new m.default}return s(t,[{key:"destroy",value:function(){this.addata=null,this.curNum=0,this.remainTime=0,this.currentTime=0,this._pastTime=0,this._firstTag=!0,this._isEnd=!0,this._timer&&(clearInterval(this._timer),this._timer=null)}},{key:"attachMediaElement",value:function(t){this._mediaElement=t,this._mediaElement.poster="",h.default.addEventListenerHander(this._mediaElement,"play",this.e.onPlay),"m3u8"===this.supportType?(h.default.addEventListenerHander(this._mediaElement,"timeupdate",this.e.onUnitTimeUpdate),h.default.addEventListenerHander(this._mediaElement,"ended",this.e.onUnitEnd)):(h.default.addEventListenerHander(this._mediaElement,"ended",this.e.onEnd),h.default.addEventListenerHander(this._mediaElement,"timeupdate",this.e.onTimeupdate)),h.default.addEventListenerHander(this._mediaElement,"canplay",this.e.onCanPlay),h.default.addEventListenerHander(this._mediaElement,"stalled",this.e.onStalled),h.default.addEventListenerHander(this._mediaElement,"error",this.e.onError),h.default.addEventListenerHander(this._mediaElement,"progress",this.e.onProgress),h.default.addEventListenerHander(this._mediaElement,"pause",this.e.onPause)}},{key:"dettachMediaElement",value:function(){if(this._mediaElement)return this._mediaElement.removeEventListener("timeupdate",this.e.onTimeupdate),this._mediaElement.removeEventListener("ended",this.e.onEnd),h.default.removeEventListenerHander(this._mediaElement,"play",this.e.onPlay),h.default.removeEventListenerHander(this._mediaElement,"ended",this.e.onEnd),h.default.removeEventListenerHander(this._mediaElement,"timeupdate",this.e.onTimeupdate),h.default.removeEventListenerHander(this._mediaElement,"canplay",this.e.onCanPlay),h.default.removeEventListenerHander(this._mediaElement,"stalled",this.e.onStalled),h.default.removeEventListenerHander(this._mediaElement,"error",this.e.onError),h.default.removeEventListenerHander(this._mediaElement,"progress",this.e.onProgress),h.default.removeEventListenerHander(this._mediaElement,"pause",this.e.onPause),"m3u8"===this.supportType?void this._mediaElement.pause():void(this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null))}},{key:"on",value:function(t,e){this._emitter.addListener(t,e)}},{key:"off",value:function(t,e){this._emitter.removeListener(t,e)}},{key:"setAdData",value:function(t,e){c.default.i(this.TAG,"setAdData:"),this.addata=t,this._adreport.setData(t),this.remainTime=this.addata.totalTime,this.m3u8url=e,this.load()}},{key:"startTimer",value:function(){if(!this._timer){var t=this;this._lastTime=0,this._timer=setInterval(function(){return t._isEnd?void clearInterval(t._timer):(t._lastTime===t._mediaElement.currentTime&&(c.default.i(t.TAG,"stall try again"),this._mediaElement.load(),this._mediaElement.play()),void(t._lastTime=t._mediaElement.currentTime))},3e3)}}},{key:"load",value:function(){if(c.default.i(this.TAG,"load"),!this._mediaElement)throw new IllegalStateException("HTMLMediaElement must be attached before load()!");if(!this.addata)throw new IllegalStateException("adPlayer must be set adData and adtype");var t=this.addata.VAL.length;return 0===t?(c.default.d(this.TAG,"the length of addata is 0"),void this.destroy()):(this.currentTime=0,this._pastTime=0,this.curNum=0,this._isEnd=!1,"m3u8"===this.supportType?(this.src=this.m3u8url,this.posiTime=this._mediaElement.currentTime||0):this.src=this.addata.VAL[this.curNum].RS,void(this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0)))}},{key:"play",value:function(){if(c.default.i(this.TAG,"this._mediaElement.paused:"+this._mediaElement.paused+" this._isEnd:"+this._isEnd+" this._firstTag:"+this._firstTag),!this._isEnd){if(!this._mediaElement)return void c.default.e("please attachMediaElement for adPlayer");if(this._firstTag){("m3u8"!==this.supportType||"m3u8"===this.supportType&&""===this._mediaElement.src)&&(this._mediaElement.src=this.src),this._mediaElement.style.display="block",this._mediaElement.play();var t=0,e=this;this._mediaElement.addEventListener("canplay",function(){1!==t&&(t=1,c.default.i(e.TAG,"canplay time="+e.currentTime),this.play())})}this._mediaElement.paused&&this._mediaElement.play()}}},{key:"setSrc",value:function(){("m3u8"!==this.supportType||"m3u8"===this.supportType&&""===this._mediaElement.src)&&(this._mediaElement.src=this.src)}},{key:"pause",value:function(){if(!this._isEnd)return this._mediaElement?void this._mediaElement.pause():void c.default.e("please attachMediaElement for adPlayer")}},{key:"skip",value:function(t){if(!(this._isEnd||t<0||0!==t&&!t))if(t<this.addata.VAL.length-1){this.curNum=t+1,this._pastTime=0;for(var e=0;e<this.curNum;e++)this._pastTime+=this.addata.VAL[e].AL;if(this.currentTime=this._pastTime,"m3u8"===this.supportType)this._seek(this._pastTime);else{this._mediaElement.src=this.addata.VAL[this.curNum].RS,this._mediaElement.play();var i=!1,n=this;h.default.addEventListenerHander(this._mediaElement,"canplay",function(){i||(n._mediaElement.play(),i=!0)})}}else this.curNum=this.addata.VAL.length-1,"m3u8"===this.supportType&&this._seek(this.addata.totalTime),this._pastTime+=this.addata.VAL[this.curNum].AL,this.currentTime=this.addata.totalTime,"m3u8"===this.supportType?this._onUnitTimeUpdate(null):(this._mediaElement.pause(),this._ifEmitPause=!0,
this._emitter.emit(o.default.AD_TIMEUPDATE,null,this.currentTime,this.curNum),this._onEnd(null))}},{key:"_seek",value:function(t){if(Math.abs(this._mediaElement.currentTime-t)<1)return!1;try{this._mediaElement.currentTime=t}catch(n){var e=!1,i=this;h.default.addEventListenerHander(this._mediaElement,"canplay",function(){e||(e=!0,i._mediaElement.currentTime=t)})}this._mediaElement.play()}},{key:"_onEnd",value:function(t){this._isEnd||(c.default.i(this.TAG,"_adEnd:||this.curNum:"+this.curNum+"this.currentTime:"+this.currentTime),this._pastTime+=this.addata.VAL[this.curNum].AL,this._adreport.sendSUE(this.curNum),this.curNum++,this.curNum<this.addata.VAL.length?(this._adreport.sendSUS(this.curNum),this._adreport.changeNum(this.curNum),this._mediaElement.pause(),this._ifEmitPause=!0,this._mediaElement.src=this.addata.VAL[this.curNum].RS,this._mediaElement.play()):(c.default.i(this.TAG,"_adEnd:||this._isEnd:"+this._isEnd),this._isEnd||(this._isEnd=!0,this.destroy(),this._emitter.emit(o.default.AD_END,t))))}},{key:"_onUnitEnd",value:function(t){this._isEnd||(c.default.i(this.TAG,"_onUnitEnd:||this._isEnd:"+this._isEnd+"   this._mediaElement.currentTime:"+this._mediaElement.currentTime),this._isEnd=!0,this._mediaElement.pause(),this._ifEmitPause=!0,this.destroy(),this._emitter.emit(o.default.AD_END,t,this._mediaElement.currentTime))}},{key:"_onTimeupdate",value:function(t){if(!this._isEnd&&this._mediaElement){var e=this._mediaElement.currentTime;this.currentTime=this._pastTime+e,this.remainTime=this.addata.totalTime-this.currentTime,this._emitter.emit(o.default.AD_TIMEUPDATE,t,this.currentTime,this.curNum)}}},{key:"_onUnitTimeUpdate",value:function(t){this._isEnd||this._mediaElement&&(this.currentTime=this._mediaElement.currentTime,this.currentTime>=this.addata.totalTime?(this._adreport.sendSUE(this.curNum),this._onUnitEnd(t)):(this.currentTime>this._pastTime+this.addata.VAL[this.curNum].AL&&(this._pastTime+=this.addata.VAL[this.curNum].AL,this._adreport.sendSUE(this.curNum),this.curNum++,this._adreport.sendSUS(this.curNum),this._adreport.changeNum(this.curNum)),this._emitter.emit(o.default.AD_TIMEUPDATE,t,this.currentTime,this.curNum)))}},{key:"_onPlay",value:function(t){this._isEnd||(this._firstTag&&this._adreport.sendSUS(this.curNum),this._firstTag=!1,this._emitter.emit(o.default.AD_PLAY,t))}},{key:"_onPause",value:function(t){return this._isEnd?(c.default.d(this.TAG,"_onPause:"+this._ifEmitPause),void(this._ifEmitPause=!1)):(c.default.i(this.TAG,"_onPause::this._isEnd:"+this._isEnd),void this._emitter.emit(o.default.AD_PAUSE,t))}},{key:"_onError",value:function(t){if(!this._isEnd){if("m3u8"===this.supportType)return void(this.tryNum>0?(this.tryNum--,this._mediaElement.src=this.m3u8url,this._mediaElement.currentTime=this.currentTime,this._mediaElement.play()):(this._isEnd=!0,this._emitter.emit(o.default.AD_ERROR,t)));if(this.curNum<this.addata.VAL.length-1)return void this.skip(this.curNum);this._isEnd=!0,this._emitter.emit(o.default.AD_ERROR,t)}}},{key:"_onCanPlay",value:function(t){c.default.i(this.TAG,"_onCanPlay"),this._isEnd||this._emitter.emit(o.default.AD_CANPLAY,t)}},{key:"_onProgress",value:function(t){}},{key:"_onStalled",value:function(t){}},{key:"_onSeeking",value:function(t){}}]),t}();exports.default=p},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(11),o=e(2),r=i(o),h=e(4),d=i(h),l=e(32),u=i(l),c=e(1),f=i(c),m=e(6),p=i(m),_=function(){function t(e,i,s){n(this,t),this.TAG="ADplugin",this.param={},this.adpoint=[],this.param.aw="w",this.param.vs="1.0",this.param.pver="1",this.param.tict=0,this.param.vr=0,this.param.wintype="xplayer_m3u8",(s||i)&&this.init(s,i),this.param.site=location.origin.indexOf("tudou.com")>-1||"0505"===this.ccode?"-1":"1",this._mediaElement=e,this.status=0,this.contentNum=0,this.netflag=!1,this.startplay=!1,this.content_addata=null,this.stand_addata=null,this.front_addata=null,this.end_addata=null,this.frontAdTime=0,this.endAdTime=0,this.addata=null,this._vtvc=[],this._defaultData={VAL:[]},this.e={adPlayError:this._adError.bind(this),adPlay:this._adPlay.bind(this),adTimeUpdate:this._adtimeUpdate.bind(this),adPlayEnd:this._adplayEnd.bind(this),adPlayPause:this._adplayPause.bind(this),adCanPlay:this._adcanplay.bind(this),adPlayLoading:this._adplayLoading.bind(this),adReady:this._adReady.bind(this)},this._emitter=new f.default,this._adplayer=new u.default({supportType:this.supportType}),this._adplayer.attachMediaElement(this._mediaElement),this._addAdplayerEmit()}return s(t,[{key:"destroy",value:function(){this.adpoint=[],this.status=0,this.contentNum=0,this.netflag=!1,this.startplay=!1,this.content_addata=null,this.stand_addata=null,this.front_addata=null,this.end_addata=null,this.frontAdTime=0,this.endAdTime=0,this.addata=null,this.unitedAd=!1,this._adplayer.destroy()}},{key:"_reset",value:function(){this.status=0,this.startplay=!1,this.adType="",this.netflag=!1,this.addata=null,this._ispause=!1}},{key:"init",value:function(t,e){if(e){if(e.m3u8_url&&(this.m3u8url=e.m3u8_url),e.supportType&&(this.supportType=e.supportType),e.ccode&&(this.ccode=e.ccode),e.param)for(var i in e.param)this.param[i]=e.param[i];if(e.adConfig)for(var n in e.adConfig)this.param[n]=e.adConfig[n];e.adext&&(this.param.adext=e.adext)}if(t){this.videoId=t.encodeId,this.param.isvert=r.default.getScreenState(),this.param.wintype="xplayer_m3u8",this.param.vl=t.trial?parseInt(t.trial.time)-1:parseInt(t.video.seconds),this.param.ct=t.video.category_letter_id,this.param.sid=t.ups.psid,this.param.ccode=t.ccode;for(var s=t.video.subcategories||[],a=[],o=0,h=s.length;o<h;o++)a.push(s[o].id);this.param.cs=a.join("|");var d=t.video.type.join(",");this.param.paid=d.indexOf("fee")>-1||d.indexOf("channel_vip")>-1||t.fee||t.show&&t.show.pay?1:0,this.param.s=t.show?t.show.id:0,this.param.v=t.videoId,this.param.vip=t.user&&t.user.vip?1:0;var l=t.video.tags||[];this.param.k=encodeURIComponent(l.join("|")),this.param.u=t.video.userid||"",this.param.td=t.video.source?t.video.source:0,this.param.ti=encodeURIComponent(t.video.title),this.param.vr=0,t.trial&&(this.param.tt=t.trial.type);var u=t.dvd&&t.dvd.point||[];this._setAdPoint(u),"m3u8"===this.supportType?(this.requestFrontAd(),this.requestEndAd()):this.requestFrontAd()}}},{key:"_removeAdplayerEmit",value:function(){this._adplayer.off(p.default.AD_PLAY,this.e.adPlay),this._adplayer.off(p.default.AD_PAUSE,this.e.adPlayPause),this._adplayer.off(p.default.AD_END,this.e.adPlayEnd),this._adplayer.off(p.default.AD_TIMEUPDATE,this.e.adTimeUpdate),this._adplayer.off(p.default.AD_ERROR,this.e.adPlayError),this._adplayer.off(p.default.AD_CANPLAY,this.e.adCanPlay),this._adplayer.off(p.default.AD_LOADING,this.e.adPlayLoading)}},{key:"_addAdplayerEmit",value:function(){this._adplayer.on(p.default.AD_PLAY,this.e.adPlay),this._adplayer.on(p.default.AD_PAUSE,this.e.adPlayPause),this._adplayer.on(p.default.AD_END,this.e.adPlayEnd),this._adplayer.on(p.default.AD_TIMEUPDATE,this.e.adTimeUpdate),this._adplayer.on(p.default.AD_ERROR,this.e.adPlayError),this._adplayer.on(p.default.AD_CANPLAY,this.e.adCanPlay),this._adplayer.on(p.default.AD_LOADING,this.e.adPlayLoading)}},{key:"on",value:function(t,e){this._emitter.addListener(t,e)}},{key:"off",value:function(t,e){this._emitter.removeListener(t,e)}},{key:"play",value:function(){if(d.default.i(this.TAG,"play|||this.startplay:"+this.startplay),!this.addata)return void this._adplayEnd(null);if(this.startplay)this._adplayer.play();else{if(0===this.addata.VAL.length)return d.default.d(this.TAG,"play|||this.addata.VAL.length:"+this.addata.VAL.length),void this._adplayEnd(null);this.ifReady||this._initAdPlayer(this.addata),this.loadVTVC(this.addata.vtvc),d.default.i(this.TAG,"play|||this._adplayer:"),this._adplayer.play()}this._ispause=!1}},{key:"autoPlay",value:function(){return r.default.show(this._mediaElement),0===this.addata.VAL.length?(d.default.d(this.TAG,"play|||this.addata.VAL.length:"+this.addata.VAL.length),void this._adplayEnd(null)):void this._adplayer.setSrc()}},{key:"pause",value:function(){this.addata&&this.startplay&&(this._adplayer.pause(),this._ispause=!0)}},{key:"skip",value:function(t,e){this._adplayer.skip(t)}},{key:"ifPlayAd",value:function(t){if(0===this._midpoints.length)return!1;if(this.contentNum<this._midpoints.length){var e=parseInt(this._midpoints[this.contentNum].start)/1e3;if(e-t<=5&&!this.netflag&&!this.content_addata)return this.requestContentAd(),!1;if(t>=e)return!0}return!1}},{key:"_initAdPlayer",value:function(t){return this.ifReady=!0,0===this.addata.VAL.length?void this._adReady(null):(this._adplayer.setAdData(this.addata,this.m3u8url),void this._adReady(null))}},{key:"_setAdPoint",value:function(t){for(var e=[],i=0,n=0,s=0,a=t.length;s<a;s++)"standard"!==t[s].ctype&&"contentad"!==t[s].ctype||(t[s].num="standard"===t[s].ctype?i++:n++,e.push(t[s]));this._midpoints=e}},{key:"_isNeedAd",value:function(t){return!0}},{key:"_splitVTVC",value:function(t){var e=0,i=(t.VAL||[],[]),n=[],s=[],a={};for(var o in t)"VAL"!=o&&(a[o]=t[o]);a.VAL=[];for(var r=t.VAL||[],h=0;h<r.length;h++)2!==parseInt(r[h].VT)?null!=r[h].RS&&""!=r[h].RS.trim()&&null!=r[h].VID&&null!=r[h].VQT&&(a.VAL.push(r[h]),s.push(r[h].RS),n.push(parseInt(r[h].AL)),e+=r[h].AL):(r[h].pos_=h-1-i.length,i.push(r[h]));return a.urls=s,a.seconds=n,a.vtvc=i,a.totalTime=e,a}},{key:"buildM3u8",value:function(t,e){t&&(this.m3u8url=t);var i=this.front_addata&&this.front_addata.VAL&&!e?this.front_addata.VAL:[],n=this.end_addata&&this.end_addata.VAL?this.end_addata.VAL:[];if(0===i.length&&0===n.length)return this.m3u8url;var s=this.m3u8url.split("?"),a=s[0];s=s[1].split("&");for(var o=0,h=-1,d="",l="",u=0;u<s.length;u++){var c=s[u].split("=");c.length>0&&"vid"===c[0]&&(o=u,l=c[1]),c.length>0&&"type"===c[0]&&(d=c[1],h=u)}d||(d="mp4");for(var f=[],m=0,p=i.length,_=0;_<p;_++){var v=i[_],y=(v.RS,v.VID),g=v.VQT;f["a"+(_+1)]=y+"_"+g}m=i.length+1,f.v=this.videoId+"_"+d;for(var E=n.length,T=0;T<E;T++){var A=n[T],b=(A.RS,A.VID),P=A.VQT;f["a"+(m+T)]=b+"_"+P}return s[o]="ids="+encodeURIComponent(r.default.toJSON(f)),s[h]="",this.m3u8url=a+"?"+s.join("&"),this.m3u8url}},{key:"parseFrontAd",value:function(t){if(!this.front_addata){if(d.default.i(this.TAG,"parseFrontAd"),this.adType=a.AD_MAP.FRONT,this.addata=this.front_addata,this.front_addata=this._splitVTVC(t),this.frontAdTime=this.front_addata.totalTime,this.netflag=!1,this._emitter.emit(p.default.AD_DATA_OK,this.front_addata,this.adType),"m3u8"===this.supportType)return void this.parseUnited();this.addata=this.front_addata,this._initAdPlayer()}}},{key:"parseEndAd",value:function(t){return d.default.i(this.TAG,"parseEndAd"),this.netflag=!1,this.adType=a.AD_MAP.END,this.end_addata=this._splitVTVC(t),"m3u8"===this.supportType?void this.parseUnited():(this.addata=this.end_addata,this._emitter.emit(p.default.AD_DATA_OK,this.end_addata,this.adType),this._initAdPlayer(this.addata),d.default.i(this.TAG,"parseEndAd(data)"),void this.play())}},{key:"parseContentAd",value:function(t){this.netflag=!1,this.content_addata=this._splitVTVC(t),this._emitter.emit(p.default.AD_DATA_OK,this.content_addata,this.adType),this.addata=this.content_addata}},{key:"parsePauseAd",value:function(t){d.default.i(this.TAG,"parsePauseAd"),this._emitter.emit(p.default.AD_DATA_OK,t,a.AD_MAP.PAUSE)}},{key:"parseUnited",value:function(){this.unitedAd||this.front_addata&&this.end_addata&&(this.unitedAd=!0,d.default.i(this.TAG,"parseUnited"),this.endAdTime=this.end_addata.totalTime,this.m3u8url=this.buildM3u8(this.m3u8url,!1),this.addata=this.front_addata,this.adType=a.AD_MAP.FRONT,this._initAdPlayer(this.addata))}},{key:"adDataTimeout",value:function(t){d.default.i(this.TAG,"adDataTimeout:"+t),t===a.AD_MAP.FRONT?this.parseFrontAd(this._defaultData):t===a.AD_MAP.END&&this.parseEndAd(this._defaultData),this._emitter.emit(p.default.AD_DATA_ERROR,this.adType)}},{key:"adDataError",value:function(t){d.default.e(this.TAG,"fronOutAdError:"+t),t===a.AD_MAP.FRONT?this.parseFrontAd(this._defaultData):t===a.AD_MAP.END&&this.parseEndAd(this._defaultData),this._emitter.emit(p.default.AD_DATA_ERROR,this.adType)}},{key:"changeParam",value:function(t){for(var e in t)this.param[e]=t[e]}},{key:"requestFrontAd",value:function(t){var e=this;d.default.i(this.TAG,"requestFrontAd：ifPlay："+t),this.adType=a.AD_MAP.FRONT;var i={};i.p=7;var n=r.default.protocol+a.YoukuAdApiM.FRONT_AD_API+"?"+r.default.urlParameter(this.param)+"&"+r.default.urlParameter(i);this.netflag=!0,r.default.getJsonp(n,function(i){e.parseFrontAd(i,t)},function(){e.adDataError(a.AD_MAP.FRONT)},function(){e.adDataTimeout(a.AD_MAP.FRONT)})}},{key:"requestContentAd",value:function(t){var e=this;d.default.i(this.TAG,"requestContentAd");var i={};i.p=8,i.ps=this._midpoints[this.contentNum];this._midpoints[this.contentNum];i.pt=this._midpoints[this.contentNum].start/1e3;var n=r.default.protocol+a.YoukuAdApiM.CONTENT_AD_API+"?"+r.default.urlParameter(this.param)+"&"+r.default.urlParameter(i);this.netflag=!0,r.default.getJsonp(n,function(i){e.parseContentAd(i,t)},function(){e.adDataError(a.AD_MAP.CONT)},function(){e.adDataTimeout(a.AD_MAP.CONT)})}},{key:"requestStandardAd",value:function(){var t={};t.p=9}},{key:"requestEndAd",value:function(t){var e=this;d.default.i(this.TAG,"requestEndAd:ifPlay"+t);var i={};i.p=9,i.ctu=1;var n=r.default.protocol+a.YoukuAdApiM.END_AD_API+"?"+r.default.urlParameter(this.param)+"&"+r.default.urlParameter(i);this.netflag=!0,r.default.getJsonp(n,function(i){e.parseEndAd(i,t)},function(){e.adDataError(a.AD_MAP.END)},function(){e.adDataTimeout(a.AD_MAP.END)})}},{key:"requestPauseAd",value:function(){var t=this;d.default.i(this.TAG+" requestPauseAd");var e={p:10},i=""+r.default.protocol+a.YoukuAdApiM.PAUSE_AD_API+"?"+r.default.urlParameter(this.param)+"&"+r.default.urlParameter(e);r.default.getJsonp(i,function(e){t.parsePauseAd(e)},function(){t.adDataError(a.AD_MAP.PAUSE)},function(){t.adDataTimeout(a.AD_MAP.PAUSE)})}},{key:"loadVTVC",value:function(t){if(t)for(var e=0;e<t.length;e++)r.default.loadfile(t[e].VC,"js")}},{key:"sendCUM",value:function(){this._adplayer._adreport&&this._adplayer._adreport.sendCUM()}},{key:"playFrontAD",value:function(){d.default.i(this.TAG,"playFrontAD():"),this.adType=a.AD_MAP.FRONT,this.front_addata?(this.addata=this.front_addata,this._initAdPlayer(this.addata),this.play()):"m3u8"===this.supportType?(this.requestFrontAd(),this.requestEndAd()):this.requestFrontAd(!0)}},{key:"playEndAD",value:function(){this.adType=a.AD_MAP.END,"m3u8"===this.supportType?(this.addata=this.end_addata,this._emitter.emit(p.default.AD_DATA_OK,this.end_addata,this.adType),this._initAdPlayer(this.addata,!0),this.play()):this.requestEndAd(!0)}},{key:"playContentAd",value:function(){this.adType=a.AD_MAP.CONT}},{key:"_adReady",value:function(t){d.default.i(this.TAG,"_adReady|adtype:"+this.adType),this._emitter.emit(p.default.AD_READY,t,this.adType)}},{key:"_adError",value:function(t){d.default.i(this.TAG,"_adError|adtype"),this._emitter.emit(p.default.AD_ERROR,t,this.adType)}},{key:"_adPlay",value:function(t){this.startplay=!0,d.default.i(this.TAG,"_adPlay|adtype"+this.adType),this._emitter.emit(p.default.AD_PLAY,t,this.adType)}},{key:"_adtimeUpdate",value:function(t,e,i){this._currentTime=e,this._emitter.emit(p.default.AD_TIMEUPDATE,t,e,this.adType,i)}},{key:"_adplayEnd",value:function(t,e){d.default.i(this.TAG,"_adplayEnd|adtype|"+this.adType),this.startplay=!1,this.adType!==a.AD_MAP.CONT&&this.adType!==a.AD_MAP.STA||this.contentNum++,this.adType===a.AD_MAP.FRONT&&(this.frontAdTime=e?e:this.frontAdTime,d.default.i(this.TAG,"_adplayEnd(e):this..frontAdTime"+this.frontAdTime)),this.addata=null,this._emitter.emit(p.default.AD_END,t,this.adType),this._reset()}},{key:"_adplayPause",value:function(t){d.default.i(this.TAG,"_adplayPause|adtype"+this.adType),this._emitter.emit(p.default.AD_PAUSE,t,this.adType)}},{key:"_adplayLoading",value:function(t){d.default.i(this.TAG,"_adplayLoading|adtype"+this.adType),this._emitter.emit(p.default.AD_LOADING,t,this.adType)}},{key:"_adcanplay",value:function(t){d.default.i(this.TAG,"_adcanplay|adtype"+this.adType),this._emitter.emit(p.default.AD_CANPLAY,t,this.adType)}}]),t}();exports.default=_},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(8),o=e(1),r=i(o),h=e(4),d=i(h),l=e(2),u=i(l),c=function(){function t(e){n(this,t),this.TAG="M3U8Player",this._currentTime=0,this.m3u8Url=e.m3u8Url||[],this._tryTime=e.tryTime||-1,this._totalTime=e.totalTime||0,this._firstflag=!0,this._frontAdTime=0,this._endAdTime=0,this._emitter=new r.default,this.adStatus=!0,this._ifEmitPause=!1,this._e={onPlay:this._onPlay.bind(this),onPause:this._onPause.bind(this),onEnded:this._onEnd.bind(this),onCanPlay:this._onCanplay.bind(this),onTimeUpdate:this._onTimeupdate.bind(this),onError:this._onError.bind(this),onLoadeddata:this._onLoadeddata.bind(this),onLoadedmetaData:this._onLoadedmetaData.bind(this),onAbort:this._onAbort.bind(this),onStalled:this._onStalled.bind(this),onSuspend:this._onSuspend.bind(this),onWaiting:this._onWaiting.bind(this),onVolumeChange:this._onVolumeChange.bind(this),onPlaying:this._onPlaying.bind(this),onSeeked:this._onSeeked.bind(this),onSeeking:this._onSeeking.bind(this),onDurationChange:this._onDurationChange.bind(this),onProgress:this._onProgress.bind(this),onRateChange:this._onRateChange.bind(this),onLoadStart:this._onLoadStart.bind(this)}}return s(t,[{key:"destroy",value:function(){this._currentTime=0,this._segs=[],this._tryTime=-1,this._totalTime=0,this._firstflag=!0,this._mediaElement&&this._mediaElement.pause(),this._ifEmitPause=!1,this.dettachMediaElement()}},{key:"on",value:function(t,e){this._emitter.addListener(t,e)}},{key:"off",value:function(t,e){this._emitter.removeListener(t,e)}},{key:"attachMediaElement",value:function(t){if(!this.ifEvent){this.ifEvent=!0,this._mediaElement=t,this._mediaElement.poster="";for(var e in a.VIDEO_EVENTS)u.default.addEventListenerHander(this._mediaElement,e,this._e[a.VIDEO_EVENTS[e]])}}},{key:"dettachMediaElement",value:function(){if(this.ifEvent=!1,this._mediaElement){for(var t in a.VIDEO_EVENTS)u.default.removeEventListenerHander(this._mediaElement,t,this._e[a.VIDEO_EVENTS[t]]);this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null)}}},{key:"load",value:function(t){t.m3u8Url&&(this.m3u8Url=t.m3u8Url),t.time&&(this._currentTime=t.time),t.totalTime&&(this._totalTime=t.totalTime),t.frontAdTime?this._frontAdTime=t.frontAdTime:this._frontAdTime=0,t.endAdTime&&(this._endAdTime=_mediaElement.endAdTime),this._ifEmitPause=!0,this._firstflag&&""!==this._mediaElement.src||(this._mediaElement.src=this.m3u8Url),d.default.i(this.TAG,"m3u8Url:"+this._mediaElement.src+" _currentTime:"+this._currentTime+"   _frontAdTime:"+this._frontAdTime),this._currentTime>0&&(this._mediaElement.pause(),this.firstTime=this._currentTime+this._frontAdTime,this.seek(this.firstTime)),0===this._currentTime&&this._frontAdTime>0&&this._onCanplay(null)}},{key:"play",value:function(){this.m3u8Url&&this._mediaElement&&(this._mediaElement.style.display="block",this._mediaElement.src||(this._mediaElement.src=this.m3u8Url,this._mediaElement.play()),this._mediaElement.play())}},{key:"pause",value:function(){this.m3u8Url&&this._mediaElement&&(this._mediaElement.paused||this._mediaElement.pause())}},{key:"replay",value:function(t){if(this.m3u8Url&&this._mediaElement){if(this._firstflag=!0,this._frontAdTime=0,t)return void this.seek(t);this._mediaElement.src=this.m3u8Url,this._currentTime=0,this._mediaElement.currentTime=0+this._frontAdTime,this._mediaElement.play()}}},{key:"seek",value:function(t){if(this.m3u8Url&&this._mediaElement&&this._mediaElement.src&&!(t<0)){0===t&&(t=.2),t>=this._totalTime&&(t=this._totalTime-1>0?this._totalTime-1:this._totalTime),t+=this._frontAdTime,d.default.i(this.TAG,"Seek:"+t+"   _mediaElement.currentTime:"+this._mediaElement.currentTime+" _frontAdTime:"+this._frontAdTime);try{this._mediaElement.currentTime=t}catch(n){var e=this,i=0;this._mediaElement.addEventListener("canplay",function(){1!==i&&(i=1,e._mediaElement.currentTime=t,e._mediaElement.play())})}}}},{key:"_setCurrentTime",value:function(t){try{this._mediaElement.currentTime=t}catch(i){var e=!1;u.default.addEventListenerHander("canplay",function(){e||(e=!0,this._mediaElement.currentTime=t)})}}},{key:"_onPlay",value:function(t){this._ifEmitPause=!1,this.adStatus||this._mediaElement.currentTime<this._frontAdTime||(this._firstflag&&(this._firstflag=!1),this._emitter.emit(a.VIDEO_EVENTS.play,t))}},{key:"_onPause",value:function(t){if(!(this.adStatus||this._mediaElement.currentTime<this._frontAdTime))return this._ifEmitPause?(d.default.d(this.TAG,"_onPause:_ifEmitPause"+this._ifEmitPause),void(this._ifEmitPause=!1)):void this._emitter.emit(a.VIDEO_EVENTS.pause,t)}},{key:"_onEnd",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||(d.default.i(this.TAG,"_onEnd(e)"+this._mediaElement.currentTime),this._emitter.emit(a.VIDEO_EVENTS.ended,t))}},{key:"_onCanplay",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||(this.firstTime>0&&(d.default.i(this.TAG+"  _onCanplay(e):this.firstTime:"+this.firstTime),this._mediaElement.currentTime=this.firstTime,this._mediaElement.play(),this.firstTime=0),this._emitter.emit(a.VIDEO_EVENTS.canplay,t))}},{key:"_onTimeupdate",value:function(t){if(!(this.adStatus||this._mediaElement.currentTime<this._frontAdTime))return this._currentTime=this._mediaElement.currentTime-this._frontAdTime,this._currentTime>=this._totalTime?(this._mediaElement.pause(),this._ifEmitPause=!0,d.default.i(this.TAG,"trytime is out"),void this._onEnd(t)):void this._emitter.emit(a.VIDEO_EVENTS.timeupdate,t,this._currentTime)}},{key:"_onError",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.error,t)}},{key:"_onLoadeddata",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||this._emitter.emit(a.VIDEO_EVENTS.loadeddata,t)}},{key:"_onLoadedmetaData",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||this._emitter.emit(a.VIDEO_EVENTS.loadedmetadata,t)}},{key:"_onLoadStart",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||this._emitter.emit(a.VIDEO_EVENTS.loadstart,t)}},{key:"_onAbort",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||this._emitter.emit(a.VIDEO_EVENTS.abort,t)}},{key:"_onStalled",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||this._emitter.emit(a.VIDEO_EVENTS.stalled,t)}},{key:"_onSuspend",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||this._emitter.emit(a.VIDEO_EVENTS.suspend,t)}},{key:"_onWaiting",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||this._emitter.emit(a.VIDEO_EVENTS.waiting,t)}},{key:"_onVolumeChange",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||this._emitter.emit(a.VIDEO_EVENTS.volumechange,t)}},{key:"_onPlaying",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||this._emitter.emit(a.VIDEO_EVENTS.playing,t)}},{key:"_onSeeked",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||this._emitter.emit(a.VIDEO_EVENTS.seeked,t)}},{key:"_onSeeking",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||this._emitter.emit(a.VIDEO_EVENTS.seeking,t)}},{key:"_onDurationChange",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||(this._currentTime=this._mediaElement.currentTime-this._frontAdTime,this._emitter.emit(a.VIDEO_EVENTS.durationchange,t))}},{key:"_onProgress",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||this._emitter.emit(a.VIDEO_EVENTS.progress,t)}},{key:"_onRateChange",value:function(t){this.adStatus||this._mediaElement.currentTime<this._frontAdTime||this._emitter.emit(a.VIDEO_EVENTS.ratechange,t)}}]),t}();exports.default=c},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(8),o=e(1),r=i(o),h=e(4),d=i(h),l=e(2),u=i(l),c=function(){function t(e){n(this,t),this.TAG="MP4Player",this._curNum=0,this._isPause=!0,this._pastTime=0,this._currentTime=0,this._segs=e.segs||[],this._tryTime=e.tryTime||-1,this._totalTime=e.totalTime||0,this._firstflag=!0,this._retryNum=2,this._emitter=new r.default,this._e={onPlay:this._onPlay.bind(this),onPause:this._onPause.bind(this),onEnded:this._onEnd.bind(this),onCanPlay:this._onCanplay.bind(this),onTimeUpdate:this._onTimeupdate.bind(this),onError:this._onError.bind(this),onLoadeddata:this._onLoadeddata.bind(this),onLoadedmetaData:this._onLoadedmetaData.bind(this),onAbort:this._onAbort.bind(this),onStalled:this._onStalled.bind(this),onSuspend:this._onSuspend.bind(this),onWaiting:this._onWaiting.bind(this),onVolumeChange:this._onVolumeChange.bind(this),onPlaying:this._onPlaying.bind(this),onSeeked:this._onSeeked.bind(this),onSeeking:this._onSeeking.bind(this),onDurationChange:this._onDurationChange.bind(this),onProgress:this._onProgress.bind(this),onRateChange:this._onRateChange.bind(this),onLoadStart:this._onLoadStart.bind(this)}}return s(t,[{key:"destroy",value:function(){this._curNum=0,this._isPause=!0,this._pastTime=0,this._currentTime=0,this._segs=[],this._tryTime=-1,this._totalTime=0,this._firstflag=!0,this.dettachMediaElement()}},{key:"resetStatus",value:function(){d.default.i(this.TAG,"resetStatus"),this._curNum=0,this._isPause=!0,this._pastTime=0,this._currentTime=0,this._firstflag=!0}},{key:"on",value:function(t,e){this._emitter.addListener(t,e)}},{key:"off",value:function(t,e){this._emitter.removeListener(t,e)}},{key:"attachMediaElement",value:function(t){if(!this.ifEvent){this.ifEvent=!0,this._mediaElement=t,this._mediaElement.poster="";for(var e in a.VIDEO_EVENTS)u.default.addEventListenerHander(this._mediaElement,e,this._e[a.VIDEO_EVENTS[e]])}}},{key:"dettachMediaElement",value:function(){if(this._mediaElement){this.ifEvent=!1;for(var t in a.VIDEO_EVENTS)u.default.removeEventListenerHander(this._mediaElement,t,this._e[a.VIDEO_EVENTS[t]]);this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null)}}},{key:"load",value:function(t){if(t)if(t.segs&&(this._segs=t.segs),t.time&&(this._currentTime=t.time),t.totalTime)this._totalTime=t.totalTime;else{this._totalTime=0;for(var e=0,i=this._segs.length;e<i;e++)this._totalTime+=this._segs[e].seconds_video}this._mediaElement.style.display="block",this._firstflag&&(this._curNum=0),this._mediaElement.src=this._segs[this._curNum].cdn_url,this._mediaElement.play(),this._currentTime>0&&this.seek(this._currentTime)}},{key:"play",value:function(t){this._segs&&0!==this._segs.length&&(t&&(this._mediaElement.src=this._segs[this._curNum].cdn_url,this._mediaElement.currentTime=this._currentTime-this._pastTime),this._isPause=!1,this._mediaElement.play())}},{key:"pause",value:function(){this._segs&&0!==this._segs.length&&(this._isPause=!0,this._mediaElement.pause())}},{key:"seek",value:function(t){if(!this.adStatus&&(d.default.i(this.TAG,"seek(time):"+t),this._segs&&0!==this._segs.length)){t>=this._totalTime&&(t=this._totalTime>=1?this._totalTime-1:this._totalTime),t<0&&(t=0);var e=0,i=this._segs.length;return 1===i?(e=0,this._curNum=0,this._mediaElement.currentTime=t,this._mediaElement.play(),void this._setCurrentTime(t)):void this._seekMultiSeg(t)}}},{key:"replay",value:function(t){return this._firstflag=!0,this._isPause=!0,t?void this.seek(t):(this._curNum=0,this._pastTime=0,this._currentTime=0,this._mediaElement.src=this._segs[this._curNum].cdn_url,this._mediaElement.currentTime=this._currentTime-this._pastTime,void this._mediaElement.play())}},{key:"_seekMultiSeg",value:function(t){var e=0,i=void 0;if(i=0===t?0:this._getCurNumBy(t),0===i?(e=t,this._pastTime=0):(this._pastTime=this._segs[i-1].totalSegs_seconds_video,e=t-this._pastTime),d.default.i(this.TAG,"_num:"+i+" _pastTime:"+this._pastTime+"  _vtTime:"+e),i===this._curNum){this._mediaElement.currentTime=e;this._setCurrentTime(e),this._mediaElement.play()}else{var n=this._segs[i].cdn_url;this.vkey=u.default.getURlKey("vkey",n),this.fileid=this._segs[i].fileid,this._curNum=i,n?(this._mediaElement.pause(),this._mediaElement.src=n,this._mediaElement.currentTime=e,this._setCurrentTime(e),this._mediaElement.play()):this._mediaElement.pause()}}},{key:"_setCurrentTime",value:function(t){try{this._mediaElement.currentTime=t}catch(n){var e=!0,i=this;u.default.addEventListenerHander(this._mediaElement,"canplay",function(){e&&(e=!1,i._mediaElement.currentTime=t,i._mediaElement.play())})}}},{key:"_getCurNumBy",value:function(t){var e=Math.floor(this._segs.length/2);if(1===this._segs.length)return 0;t<this._segs[e].totalSegs_seconds_video&&(e=0);for(var i=this._segs.length;e<i&&!(t<this._segs[e].totalSegs_seconds_video);e++);return e}},{key:"_onPlay",value:function(t){this.adStatus||(this._firstflag&&(this._firstflag=!1),this._emitter.emit(a.VIDEO_EVENTS.play,t))}},{key:"_onPause",value:function(t){if(!this.adStatus)return this._ifEmitPause?void(this._ifEmitPause=!1):void this._emitter.emit(a.VIDEO_EVENTS.pause,t)}},{key:"_onEnd",value:function(t){if(!this.adStatus)if(this._curNum++,this._curNum<this._segs.length){this._pastTime+=this._segs[this._curNum-1].seconds_video,this._mediaElement.pause(),this._ifEmitPause=!0;var e=this._segs[this._curNum].cdn_url;this._mediaElement.src=e,this.vkey=u.default.getURlKey("vkey",e),this.fileid=this._segs[this._curNum].fileid;var i=!0,n=this;u.default.addEventListenerHander(this._mediaElement,"canplay",function(){i&&(d.default.d("MP4Player","canplay:"+n._mediaElement.paused),n._mediaElement.play(),i=!1)}),this._mediaElement.play()}else d.default.i(this.TAG,"_onEnd"+this._curNum),this._emitter.emit(a.VIDEO_EVENTS.ended,t)}},{key:"_onCanplay",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.canplay,t)}},{key:"_onTimeupdate",value:function(t){if(!this.adStatus)return this._currentTime=this._mediaElement.currentTime+this._pastTime,this._currentTime>=this._totalTime?(d.default.i(this.TAG,"trytime is out"),this._mediaElement.pause(),this._ifEmitPause=!0,d.default.i(this.TAG,"_onEnd"+this._curNum),void this._emitter.emit(a.VIDEO_EVENTS.ended,t)):void this._emitter.emit(a.VIDEO_EVENTS.timeupdate,t,this._currentTime)}},{key:"_onError",value:function(t){this.adStatus||(this._retryNum>0?(this._mediaElement.src=this._segs[this._curNum].cdn_url,this.seek(this._currentTime),this._retryNum--):this._emitter.emit(a.VIDEO_EVENTS.error,t))}},{key:"_onLoadeddata",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.loadeddata,t)}},{key:"_onLoadedmetaData",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.loadedmetadata,t);
}},{key:"_onLoadStart",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.loadstart,t)}},{key:"_onAbort",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.abort,t)}},{key:"_onStalled",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.stalled,t)}},{key:"_onSuspend",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.suspend,t)}},{key:"_onWaiting",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.waiting,t)}},{key:"_onVolumeChange",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.volumechange,t)}},{key:"_onPlaying",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.playing,t)}},{key:"_onSeeked",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.seeked,t)}},{key:"_onSeeking",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.seeking,t)}},{key:"_onDurationChange",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.durationchange,t)}},{key:"_onProgress",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.progress,t)}},{key:"_onRateChange",value:function(t){this.adStatus||this._emitter.emit(a.VIDEO_EVENTS.ratechange,t)}}]),t}();exports.default=c},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(2),o=i(a),r=e(4),h=i(r),d=(e(7),Object.freeze({UPS_API_URL:"https://ups.youku.com/ups/get.json",OPEN_API_URL:"https://api.youku.com/players/custom.json",OPEN_API_URL_TOKEN:"https://api.youku.com/players/consume.json",defaultUA:"DIl58SLFxFNndSV1GFNnMQVYkx1PP5tKe1siZu/86PR1u/Wh1Ptd+WOZsHHWxysSfAOhNJpdVWsdVJNsfJ8Sxd8WKVvNfAS8aS8fAOzYARzPyPc3JvtnPHjTdKfESTdnuTW6ZPvk2pNDh4uFzotgdMEFkzQ5wZVXl2Pf1/Y6hLK0OnCNxBj3+nb0v72gZ6b0td+WOZsHHWxysSo/0y9D2K42SaB8Y/+aD2K42SaB8Y/+ahU+WOZsHcrxysooUeND"})),l=function(){function t(e,i,s){n(this,t),this.TAG="UPSInfo",this.tryCount=4,this.param=e,this.iserror=0,this.issuccess=0,this.customtrycount=3,this.isCustomError=0,this.isCustomSuccess=0,this.customErrorFun=s,this.callback=null,this.error=null,this.timeout=null,this.utidErrorNum=0,this.customParam=i,this.customData=null,this.customContol={success:!1}}return s(t,[{key:"destroy",value:function(){this.issuccess=0,this.iserror=0,this.customData=null,this.customContol={success:!1}}},{key:"_initData",value:function(t){h.default.i(this.TAG,"get ups info success"),this.issuccess++,this.callback(t.data,this.customData)}},{key:"_requestError",value:function(t){if(console.error(this.TAG,"_requestError"+this.iserror),!this.issuccess)if(this.iserror++,this.iserror<this.tryCount&&!this.issuccess){this.ckey=o.default.getUA()?o.default.getUA():this.ckey,this.param.client_ts=(new Date).getTime();var e=this._buildUpsUrl();e=this.iserror>2&&"http:"===o.default.protocol?e.replace("https:","http:"):e,this.upsUrl=e,o.default.request(e,function(t){this._initData(t)}.bind(this),function(t){this._requestError(t)}.bind(this),function(){this.timeout()}.bind(this),5e3)}else this.iserror=0,this.error(t)}},{key:"_getOpenAPI",value:function(){var t={};t.refer=this.customParam.refer,t.client_id=this.customParam.client_id,t.video_id=this.param.vid,t.version="1.0",t.type="h5",t.embsig=this.customParam.embsig||"";var e=d.OPEN_API_URL+"?"+o.default.urlParameter(t);o.default.getJsonp(e,function(t){this._parseCustom(t)}.bind(this),function(){this._customFail()}.bind(this),function(){this._customFail()}.bind(this),3e3)}},{key:"_parseCustom",value:function(t){h.default.d(this.TAG,"_parseCustom(data)"),this.customData=t,this.customData&&this.customParam.password&&this.customData.passless&&1===parseInt(this.customData.passless)?(this.param.client_id=this.customParam.client_id,this.param.password=this.customParam.password):(this.param.client_id?delete this.param.client_id:"",delete this.param.password),this.isCustomSuccess=1,this._getUpsData()}},{key:"_customFail",value:function(){this.isCustomSuccess||(this.isCustomError++,this.isCustomError<this.customtrycount?_getOpenAPI():(this.customData=null,this._getUpsData(),h.default.d(this.TAG,"_customFail()"),this.customErrorFun&&this.customErrorFun()))}},{key:"sendThirdToken",value:function(){if(this.customData){var t=this.customData.token,e=d.OPEN_API_URL_TOKEN+"?token="+t;o.default.getJsonp(e,function(t){this._thirdTokenSuccess(t)}.bind(this),function(){this._thirdTokenFail()}.bind(this),function(){this._thirdTokenFail()}.bind(this),1e4)}}},{key:"_thirdTokenSuccess",value:function(t){h.default.d(this.TAG,"_thirdTokenSuccess(data):"+JSON.stringify(t))}},{key:"_thirdTokenFail",value:function(){h.default.d(this.TAG,"_thirdTokenFail()")}},{key:"_buildUpsUrl",value:function(){var t=o.default.upstest?o.default.upstest:d.UPS_API_URL;t+="?"+o.default.urlParameter(this.param),t+="&utid="+encodeURIComponent(this.utid),this.customData&&this.customParam.password&&1===this.customData.status&&1===this.customData.passless&&(t+="&client_id="+this.customParam.client_id),this.customData&&this.customData.stealsign&&(t+="&r="+encodeURIComponent(this.customData.stealsign)),t+="&ckey="+encodeURIComponent(this.ckey);var e=o.default.getUCStr(this.param.vid,this.param.ccode);return t+=e}},{key:"_getUpsData",value:function(){if(this.param.client_ts=parseInt((new Date).getTime()/1e3),this.param.utid?this.utid=this.param.utid:this.utid=o.default.getCna(),delete this.param.utid,this.utid&&this.ckey){this.utidErrorNum=0;var t=this._buildUpsUrl();this.upsUrl=t,o.default.request(t,function(t){this._initData(t)}.bind(this),function(t){this._requestError(t)}.bind(this),function(){this.timeout()}.bind(this),5e3)}else{if(this.utidErrorNum>10){this.error({note:"请允许cookie存储",code:"0000"});var e="http://gm.mmstat.com/yt/youkuplayer.fdl.error?track_view_code=&utid=&ccode=0501&ups_url=&cdn_url=&m3u8_url=&error_type=10&error_code=10101&error_position=0&user_timestamp="+(new Date).getTime()+"&userid=&vip=&player_version=&t="+(new Date).getTime();return o.default.sendlog(e),void(this.utidErrorNum=0)}this.utidErrorNum++;var i=this;this.tryTimer=setTimeout(function(){h.default.i(this.TAG,"再次获取utid"),i.utid=o.default.getCna(),i.utidErrorNum>9&&!i.ckey?i.ckey=d.defaultUA:i.ckey=o.default.getUA(),i.start(),clearTimeout(this.tryTimer)},500)}}},{key:"start",value:function(t,e,i,n,s){if(this.error=e?e:this.error,this.callback=t?t:this.callback,this.timeout=i?i:function(){},n)for(var a in n)this.param[a]=n[a];if(s)for(var a in s)this.customParam[a]=s[a];s?this._getOpenAPI():(this.customParam&&this.customParam.password&&delete this.customParam.password,this._getUpsData())}}]),t}();exports.default=l},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(2),o=i(a),r=e(4),h=i(r),d=e(13),l={ups:"ups",video:"video",stream:"stream",show:"show",fee:"fee",dvd:"dvd",videos:"videos",trial:"trial",user:"user",vip:"vip",ticket:"ticket",cloud:"cloud",uploader:"uploader",preview:"preview",album:"album",token:"token",controller:"controller",network:"network",playlog:"playlog",videolike:"videolike",pay:"pay",vipPayInfo:"vip_pay_info",zpdPayInfo:"zpd_pay_info",error:"error"},u=function(){function t(e){n(this,t),this.TAG="VideoInfo",this.ups=null,this.security=null,this.stream={},this.ccode=e}return s(t,[{key:"destroy",value:function(){for(var t in l)this[t]=null}},{key:"init",value:function(t,e,i,n,s,a){if(this.destroy(),t.ups||h.default.e(this.TAG,"the data.ups is undefined,please check data"),this.password=e,this.client_id=i,this.showCallButton=n,this.callButtonDes=s,this.callButtonUrl=a,this._copyData(t),this.totalTime=this.video.seconds,this.video.title=o.default.htmlEncodeAll(this.video.title),this.show&&(this.show.title=o.default.htmlEncodeAll(this.show.title)),this.encodeId=this.video.encodeid,this.videoId=this.video.id,this.stream&&!(this.stream.length<1)){var r={lang:"默认",langcode:this.stream[0].audio_lang,vid:this.encodeid},d=[];d.push(r),this.languageList=this.dvd&&this.dvd.audiolang?this.dvd.audiolang:d;for(var l=[],u=0,c=this.languageList.length;u<c;u++)l.push(this.languageList[u].langcode);this.langcodes=l,this.logo={},this._createStream(this.stream,l),this._createHdList()}}},{key:"_copyData",value:function(t){for(var e in l)this[e]=t[l[e]]}},{key:"_getPreviewInfo",value:function(t){this.preview.point=t.point,this.preview.head=t.head,this.preview.tail=t.tail,this.preview.notsharing=t.notsharing,this.preview.threed=t.threed}},{key:"_createStream",value:function(t,e){if(0===t.length)return[];var i={};t[0].audio_lang;this.logo={};for(var n=0,s=e.length;n<s;n++){var a=e[n];i[a]={},this.logo[a]={};for(var o=0,r=t.length;o<r;o++){for(var h=t[o],d=h.segs,l=0,u=0,c=0,f=d.length;c<f;c++)d[c].seconds_audio=parseInt(d[c].total_milliseconds_audio)/1e3,d[c].seconds_video=parseInt(d[c].total_milliseconds_video)/1e3,l+=parseInt(d[c].total_milliseconds_audio),u+=parseInt(d[c].total_milliseconds_video),d[c].totalSegs_seconds_audio=l/1e3,d[c].totalSegs_seconds_video=u/1e3;var m=void 0;t[o].audio_lang===a&&(h.seconds_audio=h.milliseconds_audio/1e3,h.seconds_video=h.milliseconds_video/1e3,i[a][t[o].stream_type]?(m=i[a][t[o].stream_type],m.seconds_video+=h.seconds_video,m.seconds_audio+=h.seconds_audio,m.size+=h.size,m.segs=this._splicSegs(m.segs,h.segs),"tail"===h.channel_type&&(m.tailTime=h.seconds_video)):(m=h,"head"===m.channel_type?m.headTime=h.seconds_video:m.headTime=0,m.tailTime=0,m.m3u8_url=this._checkM3u8(h.m3u8_url),this.logo[a][t[o].stream_type]=h.logo&&"none"!==h.logo?1:0),i[a][t[o].stream_type]=m)}}this.stream=i}},{key:"_splicSegs",value:function(t,e){for(var i=t[t.length-1],n=i.totalSegs_seconds_audio,s=i.totalSegs_seconds_video,a=i.total_milliseconds_video,o=i.total_milliseconds_audio,r=0,h=e.length;r<h;r++){var d=e[r];d.totalSegs_seconds_audio+=n,d.totalSegs_seconds_video+=s,d.total_milliseconds_audio+=o,d.total_milliseconds_video+=a,t.push(d)}return t}},{key:"_checkM3u8",value:function(t){o.default.m3u8test&&(t=t.replace("http://pl-ali.youku.com",o.default.m3u8test)),this.password&&t.indexOf("&password=")<0&&(t+="&password="+this.password),this.client_id&&"youkumobileplaypage"!==this.client_id&&t.indexOf("&client_id")<0&&(t+="&client_id="+this.client_id);var e=o.default.getUCStr(this.encodeId,this.ccode)||"";return t.indexOf("xk=")<0&&e&&(t+=e),t}},{key:"_checkKUrl",value:function(t){return t}},{key:"_createHdList",value:function(){for(var t={},e=0,i=this.langcodes.length;e<i;e++){var n=this.langcodes[e],s=this.stream[n];t[n]={},t[n].hditems=[],t[n].hdcodes=[];for(var a in d.SHOWHD_MAP)if(s[a]&&("3gphd"!==a||!s.mp4sd)){var o=a;s[d.ACT_HD_MAP[a]]&&(o=d.ACT_HD_MAP[a]);var r={hdcode:o,hdname:d.SHOWHD_MAP[a]};t[n].hditems.push(r),t[n].hdcodes.push(o)}}this.hdList=t,this.hdcodes=this.hdList[this.langcodes[0]].hdcodes}},{key:"getVideoInfo",value:function(){return this.video?this.video:null}},{key:"getVideoList",value:function(){if(!this.videos)return null;var t={};return t.list=this.videos.list||[],t.next=this.videos.next||null,t.previous=this.videos.previous||null,t}},{key:"getShow",value:function(){return this.show?this.show:null}},{key:"getStreamLogo",value:function(){return this.logo?this.logo:null}},{key:"getTrialInfo",value:function(){return this.trial?this.trial:null}},{key:"getPreviewInfo",value:function(){if(!this.dvd&&!this.preview)return null;var t={};return this.preview&&(t.thumb=this.preview.thumb,t.timespan=this.preview.timespan),this.dvd&&(t.head=this.dvd.head?parseInt(this.dvd.head)/1e3:0,t.tail=this.dvd.tail?parseInt(this.dvd.tail)/1e3:0,t.point=this.dvd.point),t}},{key:"getCloudOptions",value:function(){if(!this.cloud&&!this.playlog)return null;var t={};return this.playlog&&(t.lastpoint=this.playlog.lastpoint),this.cloud&&(t.subtitle=this.cloud.player_var_subtitle,t.skip=this.cloud.player_skip_titles_credits,t.lang=this.cloud.player_language),t}},{key:"getUserInfo",value:function(){var t={};return this.user&&(t.uid=this.user.uid,t.vip=this.user.vip,t.ip=this.user.ip),this.vip&&(t.ad=this.vip.ad,t.acc_support=this.vip.acc_support,t.acc_pen=this.vip.acc_open,t.hd3=this.vip.hd3,t.note=this.vip.note,t.reason=this.vip.reason,t.link=this.vip.link),t}},{key:"getPayInfo",value:function(){if(!this.pay&&!this.fee)return null;var t={};return this.pay&&(t.can_play=this.pay.can_play,t.h5_caseurl=this.pay.h5_caseurl,t.price=this.pay.price,t.discount_price=this.pay.discount_price,t.duration=this.pay.duration),this.fee&&(t.ad=this.fee.ad,t.paidType=this.fee.paid_type,t.ownChannelId=this.fee.own_channel_id,t.paid=this.fee.paid,t.videoType=this.fee.video_type),t}},{key:"getVipPayInfo",value:function(){return this.vipPayInfo?this.vipPayInfo:null}},{key:"getZpdPayInfo",value:function(){if(!this.zpdPayInfo)return this.zpdPayInfo}},{key:"getFee",value:function(){return this.fee?this.fee:null}},{key:"getUploader",value:function(){return this.uploader}},{key:"getVideolike",value:function(){return this.videolike}},{key:"getController",value:function(){return this.controller?this.controller:null}},{key:"getAlbum",value:function(){return this.album?this.album:null}},{key:"getStreamData",value:function(t,e){return this.stream&&this.stream[t]&&this.stream[t][e]?this.stream[t][e]:null}}]),t}();exports.default=u},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={ALI:{TSLOG:"//yt.mmstat.com/yt/vp.vtslog",DURATIONLOG:"//yt.mmstat.com/yt/vp.vdoview",EVENTLOG:"//yt.mmstat.com/yt/vp.event"},YOUKU:{TSLOG:"//p-log.ykimg.com/tslog",DURATIONLOG:"//stat.youku.com/player/addPlayerDurationReport",EVENTLOG:"//p-log.ykimg.com/event"},TUDOU:{TSLOG:"//gm.mmstat.com/yt/newtudou.web.ts",DURATIONLOG:"//gm.mmstat.com/yt/newtudou.web.vv",EVENTLOG:"//gm.mmstat.com/yt/newtudou.web.event"}},i={guoyu:{num:1,name:"国语"},yue:{num:2,name:"粤语"},chuan:{num:3,name:"川话"},tai:{num:4,name:"台湾"},min:{num:5,name:"闽南"},en:{num:6,name:"英语"},ja:{num:7,name:"日语"},kr:{num:8,name:"韩语"},in:{num:9,name:"印度"},fr:{num:11,name:"法语"},de:{num:12,name:"德语"},it:{num:13,name:"意语"},es:{num:14,name:"西语"},th:{num:16,name:"泰语"},baby:{num:1,name:"萌童"},man:{num:1,name:"暖男"}};exports.REPORT_API=e,exports.LANGMAP=i},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e(2),o=i(a),r=e(14),h=i(r),d=e(38),l=e(7),u=e(4),c=i(u),f=e(40),m=i(f),p=e(15),_=i(p),v=function(){function t(e,i,s,a){n(this,t),this.TAG="Reporter",this.cna=s.cna?s.cna:o.default.getCna(),this.client_id=s.client_id,this.ccode=s.ccode||"0501",this.supportType=s.supportType||"mp4",this.winType=30,this._player=a,this._isThirdParty=this._player.isThirdParty,this._mediaElement=e,this._videoInfo=i,this.totalTime=this._videoInfo&&this._videoInfo.totalTime?this._videoInfo.totalTime:0,this.pubParam={},this._initParam(),this.mtype=this._getMType(),this.tsSn=0,this.tstimer=null,this.drtimer=null,this._adInfo={},this.isRetry=0,this.tsClb=0,this.dClb=0,this.dimension={w:this._mediaElement.offsetWidth,h:this._mediaElement.offsetHeight},this.screenDim={w:screen.availWidth,h:screen.availHeight},this._vvlogconfig=s.vvlogconfig||{};try{this.vvlogext=s._vvlogconfig.vvlogext?s._vvlogconfig.vvlogext:UrchinAplus._yVvlogInfo()}catch(t){this.vvlogext=""}this.vvlogextParam=s.vvlogextParam||{},this.tslogextParam=s.tslogextParam||{};var r=new Date;this._time=r.getFullYear()+""+r.getMonth()+r.getDate()}return s(t,[{key:"destroy",value:function(){this._videoInfo=null,this.tsSn=0,clearTimeout(this.tstimer),this.tstimer=null,clearInterval(this.drtimer),this.drtimer=null}},{key:"init",value:function(t,e){this._videoInfo=t,this.sid=e,this.tsSn=0,this.cna=this.cna?this.cna:o.default.getCna(),this.totalTime=this._videoInfo.totalTime||0,this._initParam()}},{key:"changeParam",value:function(t){if(t)for(var e in t)this[e]=t[e]}},{key:"sendTSLog",value:function(t){var e=5;this.tsSn>=24?e=20:this.tsSn>=12&&(e=10);var i=this;if(this.tstimer=setTimeout(function(t){i.sendTSLog(60)},1e3*e),(61===t||this._player.error)&&(c.default.i(this.TAG,"播放结束times："+t),clearTimeout(this.tstimer),this.tstimer=null),this._player.currentState===l.YKP.PLAYER_STATE.PLAYING&&!this._mediaElement.paused){if(0==this.tsSn)return void this.tsSn++;var n={};n.vvid=this.pubParam.psid,n.vid=this.pubParam.videoId,n.cf=this._getHDFlag(this._player.control.hd),n.cpt=Math.round(this._player.currentTime),n.full=this._player.control.fullscreen?1:0,n.lang=this._getLanguage(),n.pc=60==t?0:1,n.logextvv=_.default.hex_md5(this._time);var s=this._getCurLoadedBytes();n.clb=s-this.tsClb>=0?s-this.tsClb:s,this.tsClb=s,n.iku="n",n.pt=this._getPlayTime(),n.sn=this.tsSn,n.hi=e,n.ext=this._getExtString(t),n.cna=this.cna,n.uid=this.pubParam.uid,n.url=encodeURIComponent(window.location.href);var a=n.vvid+n.vid+n.cpt+n.pt+n.sn;n.r=this._signTS(a),this._isThirdParty&&(n.clientid=this.client_id,n.type="h5");var r="";r="0505"===this.ccode?d.REPORT_API.TUDOU.TSLOG+"?":d.REPORT_API.ALI.TSLOG+"?",r+=o.default.urlParameter(n),r+="&"+o.default.urlParameter(this.tslogextParam),o.default.sendlog(r),this.tsSn++}}},{key:"tsInit",value:function(){this.tsSn=null,this.tsClb=0,this.dClb=0,this.drtimer&&(clearInterval(this.drtimer),this.drtimer=null)}},{key:"initAdInfo",value:function(t){this._adInfo||(this._adInfo={}),this._adInfo.REQID=t.REQID,this._adInfo.is_pread=1}},{key:"addPlayerDurationReport",value:function(t){if(this._videoInfo){c.default.i(this.TAG,"start addPlayerDurationReport ,the times is:"+t);var e={};if(59===t?(e.is_pread=this._adInfo.is_pread||0,e.REQID=this._adInfo.REQID||"NULL"):(e.is_pread=0,e.REQID="NULL"),62===t?(this._adInfo.REQID="NULL",this._adInfo.is_pread=0,e.replay=1):e.replay=0,e.isRetry=this.isRetry,null==this.drtimer&&60==t){var i=this;e.rs=1,e.is_pread=this._adInfo.is_pread||0,e.REQID=this._adInfo.REQID||"NULL",this.drtimer=setInterval(function(t){i._player.currentState!==l.YKP.PLAYER_STATE.PLAYING||i._mediaElement.paused||i.addPlayerDurationReport(60)},6e4)}61==t&&(clearInterval(this.drtimer),this.drtimer=null),e.viewUserId=this.pubParam.uid,this._vvlogconfig&&this._vvlogconfig.pvid&&(e.pvid=this._vvlogconfig.pvid),e.ct=this.pubParam.cateId,e.url=encodeURIComponent(window.location.href),e.referUrl=encodeURIComponent(document.referrer)||"",e.logextvv=_.default.hex_md5(this._time),e.sid=this.pubParam.psid,e.videoid=this.pubParam.videoId,e.cs=this.pubParam.subcates,e.showid_v2=this.pubParam.showId,e.Copyright=this.pubParam.Copyright,e.oct=this.pubParam.showChannelId||"",e.ocs=this.pubParam.ocs||"",e.winType=this.winType,e.videoOwnerId=this.pubParam.userid,e.totalsec=this.pubParam.totalsec,e.hd=this._getHDFlag(this._player.control.hd),e.langid=this._getLanguage(),e.format=this.pubParam.format,e.currentPlayTime=parseInt(this._player.currentTime||0),e.frame=this.pubParam.frame,e.number=t,e.mtype=this.mtype,e.fullflag=this._player.control.fullscreen?1:0,e.ikuflag="n",e.playComplete=0,61==t&&(e.playComplete=1),e.continuationPlay=this.pubParam.continous,e.pid=this.client_id||"",e.timestamp=(new Date).getTime(),e.unCookie=o.default.cookie.isCookie?1:0,e.ctype=this.ccode,e.oip=this.pubParam.ip,e.hwclass=1,e.devicename="pc",e.isp=this.pubParam.dma_code,e.isvip=this.pubParam.isvip,e.paystate=this.pubParam.paystate,e.playstate=this.pubParam.playstate,e.cna=this.cna,e.show_videotype=this.pubParam.show_videotype,e.show_topHdVideo=this.pubParam.videoId;var n=this._getCurLoadedBytes();e.currentLoadedBytes=n-this.dClb>=0?n-this.dClb:n,this.dClb=n,this.pubParam.emb?e.emb=this.pubParam.emb:"",e.Type=this.pubParam.Type,1===this.pubParam.Type&&(e.fid=this.pubParam.playListId,e.fct=this.pubParam.playListChannelId,e.fcs=this.pubParam.fcs,e.folderOwnerId=this.pubParam.folderOwnerId,e.fob=this.pubParam.fob,e.fpo=this.pubParam.fpo),e.stg=this.pubParam.stage;var s="";s="0505"===this.ccode?d.REPORT_API.TUDOU.DURATIONLOG+"?":d.REPORT_API.ALI.DURATIONLOG+"?",s+=o.default.urlParameter(e),s+="&"+o.default.urlParameter(this.vvlogextParam);try{this.vvlogext||(this.vvlogext=UrchinAplus._yVvlogInfo()||""),s=s+"&"+o.default.urlParameter(this.vvlogext)}catch(t){}o.default.sendlog(s)}}},{key:"sendUserActionReport",value:function(t,e,i,n){var s={t:1002,e:t,v:e||"ac"};s.d=o.default.encode64(this.mtype);var a={v:"h5player",vid:this.pubParam.videoId,uid:this.pubParam.uid,ssid:this.pubParam.psid,sid:this.pubParam.showId,ct:this.pubParam.cateId,cs:this.pubParam.subcates,tc:parseInt(this._player.currentTime)||0,w:this._mediaElement.offsetWidth,h:this._mediaElement.offsetHeight};a.f=this._player.control.fullscreen?"on":"off",a.q=this._getQuality(),a.ver="1.0.0";for(var r in i)a[r]=i[r];s.x=o.default.encode64(o.default.urlParameter(a)),s.cna=this.cna;o.default.urlParameter(s);if("xenfs"==t||"xexfs"==t){this._giveupReTag=!0;var h=this;setTimeout(function(t){h._giveupReTag=!1},800)}try{this.vvlogext||(this.vvlogext=UrchinAplus._yVvlogInfo()||""),this.vvlogext&&(s.pc_i=this.vvlogext.pc_i,s.pc_u=this.vvlogext.pc_u)}catch(t){}s.url=n?n:"","0505"===this.ccode?o.default.sendlog(d.REPORT_API.TUDOU.EVENTLOG+"?"+o.default.urlParameter(s)):o.default.sendlog(d.REPORT_API.ALI.EVENTLOG+"?"+o.default.urlParameter(s))}},{key:"checkPlayerResize",value:function(t,e){if(this._giveupReTag===!0)return void debug.log("give up xre after enfs or exfs");var i=this._mediaElement;this._resizeList=this._resizeList||[],this._resizeList.push({str:e,time:(new Date).getTime(),w:i.offsetWidth,h:i.offsetHeight});var n=this;setTimeout(function(e){if(0!=n._resizeList.length){for(var i=n._resizeList[0].time,s=0;s<n._resizeList.length;s++){var a=n._resizeList[s].w,r=n._resizeList[s].h,h=n._resizeList[s].time;a==n.dimension.w&&r==n.dimension.h||(n.dimension.w=a,n.dimension.h=r,(h-i>800||s==n._resizeList.length-1)&&o.default.sendlog(t+n._resizeList[s].str))}n._resizeList=[]}},1e3)}},{key:"addPlayerStaticReport",value:function(){c.default.i(this.TAG,"start addPlayerStaticReport");var t="//stat.youku.com/player/addPlayerStaticReport",e={};e.videoid=this.pubParam.videoId,this._videoInfo.token&&(e.t=this._videoInfo.token.vv),e.totalsec=this.totalTime,e.ikuflag="n_"+this.pubParam.showflag,e.url=escape(this._getParentUrl()?this._getParentUrl():window.location.href),e.fullflag=this._player.control.fullscreen,e.source="video",e.referer=(this._vvlogconfig||"").rurl,e.sid=this.pubParam.psid,e.uid=this.pubParam.uid,e.h=m.default.hcbt(e.t),e.totalseg=this.pubParam.pieceLength;var i=o.default.urlParameter(e);o.default.sendlog(t+"?"+i)}},{key:"sendUPSLog",value:function(t){var e={};e.psid=this.pubParam.psid,e.ups_client_netip=this.pubParam.ip,e.vid=this.pubParam.videoId,e.title=encodeURI(this.pubParam.title),e.ccode=this.ccode,e.uid=this.pubParam.uid||null,e.user_agent=encodeURI(navigator.userAgent),e.vip=this.pubParam.isvip,e.log_type=t;var i=o.default.urlParameter(e);this.sendGoldLog("/yt/youkuplayer.fdl.h5send","EXP",i,"H1482418994")}},{key:"sendErrorLog",value:function(t,e){var i={};i.track_view_code=t,i.utid=this.cna,i.ccode=this.ccode,i.ups_url=e.upsUrl,i.cdn_url=e.cdnUrl,i.m3u8_url=e.m3u8Url?e.m3u8Url:"",i.error_type=e.errorType,i.error_code=e.errorCode||"",i.error_position=e.currentTime?e.currentTime:0,i.user_timestamp=(new Date).getTime(),i.userid=this.pubParam.userid?this.pubParam.userid:"",i.vip=this.pubParam.isvip?this.pubParam.isvip:0,i.player_version="H5",i.logextvv=_.default.hex_md5(this._time);var n=o.default.urlParameter(i);this.sendGoldLog("/yt/youkuplayer.fdl.error","EXP",n,"H1481495508")}},{key:"sendGoldLog",value:function(t,e,i,n){try{goldlog.record(t,e,i,n)}catch(e){c.default.w(this.TAG,"goldLog:goldlog.record is error||url:"+t+"||param:"+i+"||logCode:"+n)}}},{key:"createViewCode",value:function(){var t="H",e=(new Date).getTime()+"";return t+=Math.round(1e10*Math.random()),t+=e.substr(7,12)}},{key:"_initParam",value:function(){if(this._videoInfo){this._videoInfo.user?(this.pubParam.uid=this._videoInfo.user.uid?this._videoInfo.user.uid:0,this.pubParam.isvip=this._videoInfo.user.vip?1:0):(this.pubParam.uid=0,this.pubParam.isvip=0),this.pubParam.frame=this._vvlogconfig&&this._vvlogconfig.frame?1:0,this.pubParam.continous=this._vvlogconfig&&this._vvlogconfig.continous?1:0,this.pubParam.ip=this._videoInfo.ups.ups_client_netip,this.pubParam.psid=this._videoInfo.ups.psid,this.pubParam.videoId=this._videoInfo.video.id,this.pubParam.paystate=this._getPayState(this._videoInfo.show),this.pubParam.playstate=this._videoInfo.trial?2:1,this.pubParam.cateId=this._videoInfo.video.category_id||"",this.pubParam.subcates=this._getSubCategories(this._videoInfo.video.subcategories),this.pubParam.userid=this._videoInfo.video.userid?this._videoInfo.video.userid:"",this.pubParam.title=this._videoInfo.video.title,this.pubParam.totalsec=this._videoInfo.video.seconds;var t=this._videoInfo.hdcodes.join(",");if(t.indexOf("hd3")>-1?this.pubParam.format=3:t.indexOf("hd2")>-1?this.pubParam.format=2:t.indexOf("mp4hd,")?this.pubParam.format=1:this.pubParam.format=0,this._videoInfo.show?(this.pubParam.showflag="1",this.pubParam.showId=this._videoInfo.show.id||"",this.pubParam.Copyright=this._videoInfo.show.copyright||0,this.pubParam.stage=this._videoInfo.show.stage?this._videoInfo.show.stage:0,this.pubParam.show_videotype=this._videoInfo.show.video_type,this.pubParam.showChannelId=this.pubParam.cateId,this.pubParam.ocs=this.pubParam.subcates):(this.pubParam.showId="",this.pubParam.showflag="0",this.pubParam.Copyright=0,this.pubParam.stage=0,this.pubParam.show_videotype=1),this.pubParam.Type=0,this._videoInfo.album){var e=this._videoInfo.album;this.pubParam.Type=1,this.pubParam.playListId=e.id,this.pubParam.folderOwnerId=e.owner_id,this.pubParam.fob=this._vvlogconfig&&this._vvlogconfig.order?this._vvlogconfig.order:1,this.pubParam.fpo=0,player._videoInfo.videos&&(this.pubParam.fpo=player._videoInfo.videos.next?parseInt(player._videoInfo.videos.next.seq)-1:player._videoInfo.videos.previous?parseInt(player._videoInfo.videos.previous.seq):0),this.pubParam.fcs=this.pubParam.subcates,this.pubParam.playListChannelId=this.pubParam.cateId,this.pubParam.stage=e.total}this._isThirdParty&&(this.pubParam.emb=this._getEmb(this.pubParam.ip,this.pubParam.videoId)),this.pubParam.dma_code=this._videoInfo.network?this._videoInfo.network.dma_code:"",this.pieceLength="m3u8"===this.supportType?1:this._videoInfo.stream[this._player.control.lang][this._player.control.hd].length}}},{key:"_getParentUrl",value:function(){var t=null;if(parent!==window)try{t=parent.location.href}catch(e){t=document.referrer}return t}},{key:"_getMType",value:function(){return h.default.android?h.default.isAndroid4?"adr4":"adr":h.default.isIphone?"iph":h.default.isIpad?"ipa":h.default.isIpod?"ipo":"oth"}},{key:"_getQuality",value:function(){if("m3u8"!=this.supportType)return"m";var t=this._player.control.hd;return t.indexOf("mp4hd")!==-1?"m":t.indexOf("flvhd")!==-1?"f":t.indexOf("mp4hd2")!==-1?"h":void 0}},{key:"_signTS",value:function(t){if(null==t)return 0;var e,i=0,n=t.length;for(e=0;e<n;e++)i=43*i+t.charCodeAt(e),i%=1e10;return i}},{key:"_getHDFlag",value:function(t){var e={flv:0,flvhd:0,"3gphd":0,mp4hd:1,mp4hd2:2,mp4hd3:3};return e[t]?e[t]:1}},{key:"_getLanguage",value:function(t){return t||(t=this._player.control.lang),d.LANGMAP[t]?d.LANGMAP[t].num:1}},{key:"_getPlayTime",value:function(){var t=0;return t=this.tsSn>24?180+20*(this.tsSn-24):this.tsSn>12?60+10*(this.tsSn-12):5*this.tsSn}},{key:"_getExtString",value:function(t){var e={};e.iku="n",e.full=this._player.control.fullscreen?1:0,e.lang=this._getLanguage(),e.num=t,e.ctp=0,e.pc=60==t?0:1,e.clb=0,e.ctype=this.ccode,e.ev="1",e.isvip=this.pubParam.isvip,e.paystate=this.pubParam.paystate,e.playstate=this.pubParam.playstate;var i=this.cna;return e.cna=i?i:"",escape(o.default.urlParameter(e))}},{key:"_getPayState",value:function(t){var e=0;if(!t||!t.pay_type)return 0;var i=t.pay_type.join("");return i.indexOf("vod")>-1?e=1:i.indexOf("mon")>-1?e=2:e}},{key:"_getSubCategories",value:function(t){if(!t)return"";for(var e="",i=0;i<t.length;i++)e+=t[i].id+"|";return e.substring(0,e.length-1)}},{key:"_getCurLoadedBytes",value:function(){var t=this._player.mediaElement,e=t.buffered,i=e.length,n=0;try{for(var s=this._videoInfo.stream[this._player.control.lang][this._player.control.hd].size,a=this.pubParam.totalsec,o=0;o<i;o++){var r=e.end(o)-e.start(o);n+=r/a*s}}catch(t){}return parseInt(n)}},{key:"_getEmb",value:function(t,e){var i=location.host,n=location.pathname,s=[];s.push(t),s.push(e),s.push(i),s.push(n);var a=s.join(" ");return o.default.encode64(a)}}]),t}();exports.default=v},function(t,exports){"use strict";function e(t){function e(t,e){var i=t<<e|t>>>32-e;return i}function i(t){var e,i,n="";for(e=7;e>=0;e--)i=t>>>4*e&15,n+=i.toString(16);return n}function n(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}var s,a,o,r,h,d,l,u,c,f=new Array(80),m=1732584193,p=4023233417,_=2562383102,v=271733878,y=3285377520;t=n(t);var g=t.length,E=new Array;for(a=0;a<g-3;a+=4)o=t.charCodeAt(a)<<24|t.charCodeAt(a+1)<<16|t.charCodeAt(a+2)<<8|t.charCodeAt(a+3),E.push(o);switch(g%4){case 0:a=2147483648;break;case 1:a=t.charCodeAt(g-1)<<24|8388608;break;case 2:a=t.charCodeAt(g-2)<<24|t.charCodeAt(g-1)<<16|32768;break;case 3:a=t.charCodeAt(g-3)<<24|t.charCodeAt(g-2)<<16|t.charCodeAt(g-1)<<8|128}for(E.push(a);E.length%16!=14;)E.push(0);for(E.push(g>>>29),E.push(g<<3&4294967295),s=0;s<E.length;s+=16){for(a=0;a<16;a++)f[a]=E[s+a];for(a=16;a<=79;a++)f[a]=e(f[a-3]^f[a-8]^f[a-14]^f[a-16],1);for(r=m,h=p,d=_,l=v,u=y,a=0;a<=19;a++)c=e(r,5)+(h&d|~h&l)+u+f[a]+1518500249&4294967295,u=l,l=d,d=e(h,30),h=r,r=c;for(a=20;a<=39;a++)c=e(r,5)+(h^d^l)+u+f[a]+1859775393&4294967295,u=l,l=d,d=e(h,30),h=r,r=c;for(a=40;a<=59;a++)c=e(r,5)+(h&d|h&l|d&l)+u+f[a]+2400959708&4294967295,u=l,l=d,d=e(h,30),h=r,r=c;for(a=60;a<=79;a++)c=e(r,5)+(h^d^l)+u+f[a]+3395469782&4294967295,u=l,l=d,d=e(h,30),h=r,r=c;m=m+r&4294967295,p=p+h&4294967295,_=_+d&4294967295,v=v+l&4294967295,y=y+u&4294967295}var c=i(m)+i(p)+i(_)+i(v)+i(y);return c.toLowerCase()}Object.defineProperty(exports,"__esModule",{value:!0});var i={hcbt:function(t){var e="";return e=this.genH(t)},genH:function(t){for(var i=!1,n=void 0,s="";!i;){s=this.randomString(20);var a=t+s;n=e(a),"00"==n.substring(0,2)&&(i=!0)}return s},randomString:function(t){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i="",n=0;n<t;n++){var s=Math.floor(Math.random()*e.length);i+=e.substring(s,s+1)}return i}};exports.default=i},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={version:"1.2.2",date:"2017.09.26",key:"h5CoreVersion"};exports.default=e},function(t,exports){"use strict"},function(t,exports,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){for(var e=0,i=h.length;e<i;e++){var n=h[e],s=document.createElement("div");s.className=n.class,
s.innerHTML=n.inner,t.appendChild(s)}}var s=e(2),a=i(s),o=e(24),r=i(o),h=[{class:"x-video-player",inner:""},{class:"x-video-title",inner:""},{class:"x-video-poster",inner:""},{class:"x-video-button",inner:'<div class="x-video-play-ico x-iconmode-new"></div>'},{class:"x-youkulogo",inner:null},{class:"x-video-rnum x-video-num",inner:null},{class:"x-video-lnum x-video-num",inner:null},{class:"x-video-loading",inner:""},{class:"x-advert",inner:null},{class:"x-ad-pause",inner:null},{class:"x-prompt",inner:null},{class:"x-dashboard",inner:null},{class:"x-hdshowlist",inner:""},{class:"x-showtips",inner:""},{class:"x-noticeshow",inner:""},{class:"x-recommend",inner:""},{class:"x-gradient",inner:""},{class:"x-trigger",inner:""},{class:"x-endPanel",inner:""}],d={};d.https="https:"==location.protocol?"https:":"http:",window.YKPlayer={},YKPlayer.Player=function(t,e,i){var s=a.default.get("#"+t);s.innerHTML='<div class="x-player"><div class="ykplayer"></div></div>';var o=s.getElementsByClassName("ykplayer")[0];e.vid&&(e.videoId=e.vid,delete e.vid),e.ccode||(e.ccode="0501"),e.password&&(e.param={},e.param.password=e.password),n(o);var h=o.getElementsByClassName("x-video-player")[0],d=new r.default(h,e,o,i);return d}},function(t,exports){function e(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function n(t){if(d===setTimeout)return setTimeout(t,0);if((d===e||!d)&&setTimeout)return d=setTimeout,setTimeout(t,0);try{return d(t,0)}catch(e){try{return d.call(null,t,0)}catch(e){return d.call(this,t,0)}}}function s(t){if(l===clearTimeout)return clearTimeout(t);if((l===i||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function a(){m&&c&&(m=!1,c.length?f=c.concat(f):p=-1,f.length&&o())}function o(){if(!m){var t=n(a);m=!0;for(var e=f.length;e;){for(c=f,f=[];++p<e;)c&&c[p].run();p=-1,e=f.length}c=null,m=!1,s(t)}}function r(t,e){this.fun=t,this.array=e}function h(){}var d,l,u=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:e}catch(t){d=e}try{l="function"==typeof clearTimeout?clearTimeout:i}catch(t){l=i}}();var c,f=[],m=!1,p=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];f.push(new r(t,e)),1!==f.length||m||n(o)},r.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=h,u.addListener=h,u.once=h,u.off=h,u.removeListener=h,u.removeAllListeners=h,u.emit=h,u.prependListener=h,u.prependOnceListener=h,u.listeners=function(t){return[]},u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(t,exports,e){(function(e){!function(i){function n(){}function s(t,e){return function(){t.apply(e,arguments)}}function a(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}function o(t,e){for(;3===t._state;)t=t._value;return 0===t._state?void t._deferreds.push(e):(t._handled=!0,void a._immediateFn(function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null===i)return void(1===t._state?r:h)(e.promise,t._value);var n;try{n=i(t._value)}catch(t){return void h(e.promise,t)}r(e.promise,n)}))}function r(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if(e instanceof a)return t._state=3,t._value=e,void d(t);if("function"==typeof i)return void u(s(i,e),t)}t._state=1,t._value=e,d(t)}catch(e){h(t,e)}}function h(t,e){t._state=2,t._value=e,d(t)}function d(t){2===t._state&&0===t._deferreds.length&&a._immediateFn(function(){t._handled||a._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;e<i;e++)o(t,t._deferreds[e]);t._deferreds=null}function l(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function u(t,e){var i=!1;try{t(function(t){i||(i=!0,r(e,t))},function(t){i||(i=!0,h(e,t))})}catch(t){if(i)return;i=!0,h(e,t)}}var c=setTimeout;a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var i=new this.constructor(n);return o(this,new l(t,e,i)),i},a.all=function(t){var e=Array.prototype.slice.call(t);return new a(function(t,i){function n(a,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var r=o.then;if("function"==typeof r)return void r.call(o,function(t){n(a,t)},i)}e[a]=o,0===--s&&t(e)}catch(t){i(t)}}if(0===e.length)return t([]);for(var s=e.length,a=0;a<e.length;a++)n(a,e[a])})},a.resolve=function(t){return t&&"object"==typeof t&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(t){return new a(function(e,i){i(t)})},a.race=function(t){return new a(function(e,i){for(var n=0,s=t.length;n<s;n++)t[n].then(e,i)})},a._immediateFn="function"==typeof e&&function(t){e(t)}||function(t){c(t,0)},a._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},a._setImmediateFn=function(t){a._immediateFn=t},a._setUnhandledRejectionFn=function(t){a._unhandledRejectionFn=t},"undefined"!=typeof t&&t.exports?t.exports=a:i.Promise||(i.Promise=a)}(this)}).call(exports,e(47).setImmediate)},function(t,exports,e){(function(t,e){!function(t,i){"use strict";function n(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var n={callback:t,args:e};return p[m]=n,f(m),m++}function s(t){delete p[t]}function a(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}function o(t){if(_)setTimeout(o,0,t);else{var e=p[t];if(e){_=!0;try{a(e)}finally{s(t),_=!1}}}}function r(){f=function(t){e.nextTick(function(){o(t)})}}function h(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}function d(){var e="setImmediate$"+Math.random()+"$",i=function(i){i.source===t&&"string"==typeof i.data&&0===i.data.indexOf(e)&&o(+i.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),f=function(i){t.postMessage(e+i,"*")}}function l(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;o(e)},f=function(e){t.port2.postMessage(e)}}function u(){var t=v.documentElement;f=function(e){var i=v.createElement("script");i.onreadystatechange=function(){o(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}function c(){f=function(t){setTimeout(o,0,t)}}if(!t.setImmediate){var f,m=1,p={},_=!1,v=t.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(t);y=y&&y.setTimeout?y:t,"[object process]"==={}.toString.call(t.process)?r():h()?d():t.MessageChannel?l():v&&"onreadystatechange"in v.createElement("script")?u():c(),y.setImmediate=n,y.clearImmediate=s}}("undefined"==typeof self?"undefined"==typeof t?this:t:self)}).call(exports,function(){return this}(),e(44))},function(t,exports,e){function i(t,e){this._id=t,this._clearFn=e}var n=Function.prototype.apply;exports.setTimeout=function(){return new i(n.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new i(n.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},exports.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},exports._unrefActive=exports.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e(46),exports.setImmediate=setImmediate,exports.clearImmediate=clearImmediate},function(t,exports){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return v.iterable&&(e[Symbol.iterator]=function(){return e}),e}function s(t){this.map={},t instanceof s?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function a(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function o(t){return new Promise(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function r(t){var e=new FileReader,i=o(e);return e.readAsArrayBuffer(t),i}function h(t){var e=new FileReader,i=o(e);return e.readAsText(t),i}function d(t){for(var e=new Uint8Array(t),i=new Array(e.length),n=0;n<e.length;n++)i[n]=String.fromCharCode(e[n]);return i.join("")}function l(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(v.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(v.arrayBuffer&&v.blob&&g(t))this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!E(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var t=a(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?a(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(r)}),this.text=function(){var t=a(this);if(t)return t;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(d(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t){var e=t.toUpperCase();return T.indexOf(e)>-1?e:t}function f(t,e){e=e||{};var i=e.body;if(t instanceof f){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=c(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function m(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),n=i.shift().replace(/\+/g," "),s=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(s))}}),e}function p(t){var e=new s;return t.split(/\r?\n/).forEach(function(t){var i=t.split(":"),n=i.shift().trim();if(n){var s=i.join(":").trim();e.append(n,s)}}),e}function _(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new s(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var v={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(v.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(t){return t&&DataView.prototype.isPrototypeOf(t)},E=ArrayBuffer.isView||function(t){return t&&y.indexOf(Object.prototype.toString.call(t))>-1};s.prototype.append=function(t,n){t=e(t),n=i(n);var s=this.map[t];this.map[t]=s?s+","+n:n},s.prototype.delete=function(t){delete this.map[e(t)]},s.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},s.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},s.prototype.set=function(t,n){this.map[e(t)]=i(n)},s.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},s.prototype.keys=function(){var t=[];return this.forEach(function(e,i){t.push(i)}),n(t)},s.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},s.prototype.entries=function(){var t=[];return this.forEach(function(e,i){t.push([i,e])}),n(t)},v.iterable&&(s.prototype[Symbol.iterator]=s.prototype.entries);var T=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},u.call(f.prototype),u.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},_.error=function(){var t=new _(null,{status:0,statusText:""});return t.type="error",t};var A=[301,302,303,307,308];_.redirect=function(t,e){if(A.indexOf(e)===-1)throw new RangeError("Invalid status code");return new _(null,{status:e,headers:{location:t}})},t.Headers=s,t.Request=f,t.Response=_,t.fetch=function(t,e){return new Promise(function(i,n){var s=new f(t,e),a=new XMLHttpRequest;a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:p(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var e="response"in a?a.response:a.responseText;i(new _(e,t))},a.onerror=function(){n(new TypeError("Network request failed"))},a.ontimeout=function(){n(new TypeError("Network request failed"))},a.open(s.method,s.url,!0),"include"===s.credentials&&(a.withCredentials=!0),"responseType"in a&&v.blob&&(a.responseType="blob"),s.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send("undefined"==typeof s._bodyInit?null:s._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)}]);
//# sourceMappingURL=unifull.min.js.map